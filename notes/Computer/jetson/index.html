
<!DOCTYPE html>
<html class="borderbox" >
    
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    Jetson | DouO's Note</title>
  <meta name="description" content="æœ‰æ™‚æ¨¹æœƒå€’ä¸‹ï¼ŒæŸç‰‡å¤©é ƒåˆ»æ˜äº®
">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon" />
  <!-- Windows 8 Tile Icons -->
  <meta name="application-name" content=" Blog">
  <meta name="msapplication-TileColor" content="#5d4d7a">
  <meta name="msapplication-square70x70logo" content="smalltile.png" />
  <meta name="msapplication-square150x150logo" content="mediumtile.png" />
  <meta name="msapplication-wide310x150logo" content="widetile.png" />
  <meta name="msapplication-square310x310logo" content="largetile.png" />
  <!-- Android Lolipop Theme Color -->
  <meta name="theme-color" content="#5d4d7a">
  <link rel="stylesheet" href="/assets/main.css">
  <script src="/assets/main.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

    <body>
        <header>
  <nav class="top-nav">
    <div class="container">
      <div class="nav-wrapper">
        <div class="row">
          <div class="col s12 m10 offset-m1">
            <h1 class="header">Jetson</h1>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <div class="container"><a href="#" data-target="nav-mobile" class="top-nav sidenav-trigger full hide-on-large-only"><i class="material-icons">menu</i></a></div>
  <ul id="nav-mobile" class="sidenav sidenav-fixed">
    <li>
      <div class="logo">
        <a id="logo-container" href="/notes" class="brand-logo">
          <object id="front-page-logo" type="image/svg+xml">Your browser does not support SVG</object>
        </a>
        <div class="social">
          
          <a href="/rss.xml" title="è®¢é˜…">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-feed"></use>
            </svg>
          </a>
          
          <a href="https://github.com/douo" title="Github">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-github"></use>
            </svg>
          </a>
          
          <a href="https://stackoverflow.com/users/851344/douo" title="StackOverflow">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-stack-overflow"></use>
            </svg>
          </a>
          
          <a href="https://plus.google.com/102537448648560113422" title="Google Plus">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-google-plus"></use>
            </svg>
          </a>
          
          <a href="https://instagram.com/douo" title="Instagram">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-instagram"></use>
            </svg>
          </a>
          
        </div>
    </li>
    </div>
    <li class="search">
      <div class="search-wrapper">
        <input id="search" placeholder="Search"><i class="material-icons">search</i>
        <div class="search-results"></div>
      </div>
    </li>
    <li class="no-padding">
      <div id="blog-nav">
        <ul>
          
          <li><a href="/">ä¸»é¡µ</a></li>
          
          <li><a href="/notes">ç¬”è®°</a></li>
          
          <li><a href="/categories#coder-ref">ç¼–ç </a></li>
          
          <li><a href="/categories#life-ref">ç”Ÿæ´»</a></li>
          
          <li><a href="/categories#otaku-ref">å…´è¶£</a></li>
          
          <li><a href="/tags">æ ‡ç­¾</a></li>
          
          <li><a href="/log">æ—¥å¿—</a></li>
          
          <li><a href="/help">å¸®åŠ©</a></li>
          
          <li><a href="/about">å…³äº</a></li>
          
        </ul>
      </div>
      <div id="note-nav"></div>
    </li>
  </ul>
  <div id="nav-tab" class="hide-on-med-and-down">
    <div class="row">
      <ul class="tabs">
        <li class="tab col s6"><a href="#blog-nav">åšå®¢</a></li>
        <li class="tab col s6"><a href="#note-nav">ç¬”è®°</a></li>
      </ul>
    </div>
  </div>
</header>
<!-- Page Layout here -->
<main><div class="container">
  <div class="row">

    <div class="content col s12 m8 offset-m1 xl7 offset-xl1"> <div class="post-meta">
<span class="post-date tooltipped" data-tooltip="æœ€åæ›´æ–° 23-03-15">2020-12-15</span>
    
</div>

<article>
    <h1 id="åè¯è§£é‡Š">åè¯è§£é‡Š</h1>

<ul>
  <li>jetson
æ¯ä¸ªäº§å“éƒ½æœ‰ä¸€å¥— developer kit å’Œä¸€å¥— moduleï¼Œå¼•ç”¨è‡ª <a href="https://developer.nvidia.com/embedded/faq#jetson-devkit-vs-module">FAQ</a>ï¼Œdeveloper kit ç”¨äºç ”å‘é˜¶æ®µï¼Œmodule ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚
FYI:
    - <a href="https://forums.developer.nvidia.com/t/what-is-the-difference-between-jetson-nano-and-jetson-nano-developer-kit/78414">What is the difference between Jetson Nano and Jetson Nano developer kit - Jetson &amp; Embedded Systems / Jetson Nano - NVIDIA Developer Forums</a></li>
  <li>l4tï¼ˆLinux for Tegraï¼‰ï¼Œä¸º tegra å¤„ç†å™¨å‘è¡Œçš„ linuxï¼ŒåŸºäº ubuntu å®šåˆ¶ã€‚æ–‡æ¡£ï¼š<a href="https://docs.nvidia.com/jetson/l4t/index.html">NVIDIA Jetson Linux Developer Guide : Introduction | NVIDIA Docs</a></li>
  <li>jetpackï¼Œnvidia çš„è½¯ä»¶å¼€æ”¾å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬ l4tå’Œå„ç§å·¥å…·ã€‚<a href="https://docs.nvidia.com/jetson/jetpack/">NVIDIA JetPack Documentation</a></li>
  <li>cuda, gpu å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œ</li>
  <li>tensorrtï¼ŒNVIDIA æ·±åº¦å­¦ä¹ åŠ é€Ÿ</li>
</ul>

<h1 id="jetson-nano-developer-kit">Jetson Nano Developer Kit</h1>

<p>å‚è€ƒ <a href="https://developer.nvidia.com/embedded/learn/get-started-jetson-nano-devkit">Getting Started with Jetson Nano Developer Kit</a></p>

<h1 id="jetson-agx-xavier-flash">Jetson AGX Xavier Flash</h1>

<p>åˆ·æœºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>

<ol>
  <li>é€šè¿‡ nvidia sdk mamager åˆ·å…¥ jetpack</li>
  <li>Manual, æ‰‹åŠ¨åˆ·å…¥ l4tã€‚</li>
</ol>

<h2 id="nvidia-sdk-manager">Nvidia Sdk manager</h2>

<p><a href="https://docs.nvidia.com/sdk-manager/index.html">NVIDIA SDK Manager</a>ï¼Œæä¾›æ¯”è¾ƒç®€å•ã€è‡ªåŠ¨åŒ–çš„åˆ·æœºè¿‡ç¨‹ï¼Œæœ‰ guiï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ <a href="https://docs.nvidia.com/sdk-manager/sdkm-command-line-install/index.html">Command-Line Install :: NVIDIA SDK Manager Documentation</a>ã€‚</p>

<p>ç®€å•å°è¯•äº†ä¸‹ï¼Œå› ä¸ºç½‘ç»œçš„å‘æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æœ€åé€‰æ‹©æ‰‹åŠ¨åˆ·å…¥ l4tã€‚</p>

<h2 id="manual">Manual</h2>

<p>æ‰‹åŠ¨åˆ·æœºä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼Œåˆ·å…¥ l4t åï¼Œè¿›å…¥ç³»ç»Ÿå†å®‰è£… jetpackã€‚</p>

<p>åˆ· l4tï¼Œå®˜æ–¹æä¾›äº†æ¯”è¾ƒè¯¦ç»†çš„æ–‡æ¡£ï¼š</p>

<ul>
  <li><a href="https://docs.nvidia.com/jetson/l4t/index.html#page/Tegra%2520Linux%2520Driver%2520Package%2520Development%2520Guide%2Fquick_start.html%23">NVIDIA Jetson Linux Developer Guide : Quick Start Guide | NVIDIA Docs</a></li>
  <li><a href="https://docs.nvidia.com/jetson/archives/r35.2.1/DeveloperGuide/text/SD/FlashingSupport.html">Flashing Support</a></li>
</ul>

<h3 id="å®‰è£…ç¯å¢ƒ">å®‰è£…ç¯å¢ƒ</h3>

<h4 id="host">Host</h4>

<p>nvidia sdkmanager æœ‰å£°æ˜éœ€è¦ ubuntu 16 æˆ– 18ã€‚æ‰‹åŠ¨åˆ· l4t æ²¡æåŠå‘è¡Œç‰ˆçš„è¦æ±‚ã€‚æ ¹æ®è¿™äº›å¤©è¸©è¿‡ nvidia çš„å‘ï¼Œè¿˜æ˜¯ç¨³å¦¥ç‚¹ï¼Œä¹–ä¹– ubuntuã€‚æ‰‹åŠ¨åˆ·æœºæ›´ä¸éœ€è¦ gui äº†ï¼Œæ‰€ä»¥é€‰æ‹© server ç‰ˆæœ¬çš„ ubuntuï¼Œçœç‚¹èµ„æºï¼š<a href="https://releases.ubuntu.com/bionic/">Ubuntu 18.04.5 LTS (Bionic Beaver)</a></p>

<p>æˆ‘æ˜¯ macOS + VirtualBox ç¯å¢ƒï¼š</p>

<ul>
  <li>Mac mini</li>
  <li>macOS 11.1</li>
  <li>VirtualBox 6.1.16</li>
  <li>VirtualBox Extension Pack 6.1.16</li>
  <li>Ubuntu-18.04.5-live-server-amd64.iso</li>
</ul>

<p>Vbox éœ€è¦æ”¯æŒ USB2/USB3ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…æ‰©å±•åŒ…ï¼š<a href="https://www.virtualbox.org/wiki/Downloads">Downloads â€“ Oracle VM VirtualBox</a></p>

<h4 id="jetson">Jetson</h4>

<ul>
  <li>Jetson agx xavier 32GB(P2888-004)</li>
  <li><a href="https://developer.nvidia.com/embedded/jetson-linux-r341">L4T R34.1.1 archive | NVIDIA Developer</a></li>
</ul>

<h3 id="å®‰è£…-ubuntu">å®‰è£… Ubuntu</h3>

<p>åˆ›å»ºè™šæ‹Ÿæœºéœ€è¦æ³¨æ„:</p>

<ol>
  <li>é€‰æ‹© usb3 çš„æ”¯æŒ
    <ul>
      <li>è®¾ç½®</li>
      <li>Ports</li>
      <li>USB</li>
      <li>USB 3.0(xHCI) Controller</li>
    </ul>
  </li>
  <li>ç¡¬ç›˜é•œåƒé€‰æ‹© 30GBï¼ŒåŸºäº sdkmanager å®‰è£… jetson çš„æ–‡æ¡£æåŠå¯ç”¨ç©ºé—´éœ€è¦å¤§äº 25GBï¼Œæ‰€ä»¥ 30 GB è‚¯å®šæ˜¯å¤Ÿçš„ã€‚</li>
</ol>

<p>æ‰‹åŠ¨å®‰è£…åªå®‰è£… l4tï¼Œå®é™…è‚¯å®šä¸ç”¨ 30GBï¼Œä½† 10 GB è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œåˆ«é—®ä¸ºä»€ä¹ˆã€‚</p>

<p>æˆåŠŸåˆ·æœºåçš„ç©ºé—´æƒ…å†µï¼š</p>

<pre><code>$ df -h
Filesystem                         Size  Used Avail Use% Mounted on
udev                               462M     0  462M   0% /dev
tmpfs                               99M  736K   98M   1% /run
/dev/mapper/ubuntu--vg-ubuntu--lv   20G   19G   76M 100% /
tmpfs                              493M     0  493M   0% /dev/shm
tmpfs                              5.0M     0  5.0M   0% /run/lock
tmpfs                              493M     0  493M   0% /sys/fs/cgroup
/dev/sda2                          976M   78M  832M   9% /boot
tmpfs                               99M     0   99M   0% /run/user/1000
$ lsblk
lsblk
NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                         8:0    0   30G  0 disk
â”œâ”€sda1                      8:1    0    1M  0 part
â”œâ”€sda2                      8:2    0    1G  0 part /boot
â””â”€sda3                      8:3    0   29G  0 part
  â””â”€ubuntu--vg-ubuntu--lv 253:0    0   20G  0 lvm  /
sr0                        11:0    1 1024M  0 rom
</code></pre>

<p>æ·»åŠ å…‰é©±é•œåƒ  <code>ubuntu-18.04.5-live-server-amd64.iso</code> åï¼Œå¯åŠ¨è™šæ‹Ÿæœºä¾¿å¼€å§‹å®‰è£…æµç¨‹ã€‚ä¸»è¦æ³¨æ„æŠŠé•œåƒæ›¿æ¢ä¸º</p>

<pre><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu
</code></pre>

<p>è¿›å…¥ç³»ç»Ÿåï¼Œéœ€è¦å®‰è£…</p>

<pre><code>sudo apt-get install qemu-user-static
sudo apt-get install python # éœ€è¦ python å¯æ‰§è¡Œï¼Œä¸ç¡®å®šæ˜¯å¦è¦ python2
</code></pre>

<p>Host ä¾¿é…ç½®å®Œæˆã€‚</p>

<h3 id="ä¸‹è½½-l4t-archive">ä¸‹è½½ l4t archive</h3>

<p>ä¸‹è½½é¡µ</p>

<ul>
  <li><a href="https://developer.nvidia.com/embedded/linux-tegra">Jetson Linux | NVIDIA Developer</a></li>
</ul>

<p>ä¸‹è½½</p>

<ol>
  <li><a href="https://developer.nvidia.com/embedded/l4t/r34_release_v1.1/release/jetson_linux_r34.1.1_aarch64.tbz2">L4T Driver Package (BSP)</a></li>
  <li><a href="https://developer.nvidia.com/embedded/l4t/r34_release_v1.1/release/tegra_linux_sample-root-filesystem_r34.1.1_aarch64.tbz2">Sample Root Filesystem</a></li>
</ol>

<p>é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯é…å¯ä¸é…ï¼Œä¸»è¦æ˜¯æ–‡æ¡£æåŠçš„æ–‡ä»¶åå®¹æ˜“é€ æˆæ··æ·†ã€‚</p>

<pre><code>export L4T_RELEASE_PACKAGE=Tegra186_Linux_R32.4.4_aarch64.tbz2  # å°±æ˜¯ä¸‹è½½çš„ BSP æ–‡ä»¶
export SAMPLE_FS_PACKAGE=Tegra_Linux_Sample-Root-Filesystem_R32.4.4_aarch64.tbz2
export BOARD=jetson-agx-xavier-devkit
</code></pre>

<p>è§£å‹æ–‡ä»¶</p>

<pre><code>$ tar xf ${L4T_RELEASE_PACKAGE}
$ cd Linux_for_Tegra/rootfs/
$ sudo tar xpf ../../${SAMPLE_FS_PACKAGE}
$ cd ..
$ sudo ./apply_binaries.sh
</code></pre>

<p>ç„¶åå‡†å¤‡åˆ·æœºå‰ï¼Œéœ€è¦ç•™æ„ä¸€äº›é—®é¢˜ã€‚</p>

<ul>
  <li>æ£€æŸ¥æ˜¯å¦æˆåŠŸé“¾æ¥åˆ°è™šæ‹Ÿæœºå¹¶å¤„åœ¨ RCM
    <ul>
      <li>usb é“¾æ¥ mac mini</li>
      <li>vbox æ·»åŠ  usb åˆ°è™šæ‹Ÿæœºï¼Œå¯èƒ½éœ€è¦é‡å¯è™šæ‹Ÿæœºã€é‡æ–°æŠŠæ“¦æ‰èƒ½è®¤åˆ°ã€‚</li>
      <li><code>lsusb</code> ç¡®è®¤ usb å·²ç»é“¾æ¥åˆ°è™šæ‹Ÿæœºå¹¶å¤„åœ¨  RCM ï¼š<code>Bus &lt;bbb&gt; Device &lt;ddd&gt;: ID 0955: &lt;nnnn&gt; Nvidia Corp.</code></li>
      <li>usb éœ€è¦é‡å¯è™šæ‹Ÿæœºæ‰èƒ½è®¤åˆ°</li>
    </ul>
  </li>
  <li>æ–‡æ¡£æœªæåŠéœ€è¦ <code>python</code> å¯æ‰§è¡Œã€‚ubuntu åªæœ‰ python3ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€äº› python,æˆ–è€…é“¾æ¥ä¸€ä¸‹python3</li>
</ul>

<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å¼€å§‹åˆ·æœºäº†ï¼Œä¸è¿‡æ–‡æ¡£æœªæåŠéœ€è¦ <code>python</code> å¯æ‰§è¡Œã€‚ç¬¬ä¸€æ¬¡æ‰§è¡Œ flash.shï¼Œå› ä¸ºæœ¬åœ°æ‰¾ä¸åˆ° python å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚å®‰è£… python2 åé‡æ–°æ‰§è¡Œï¼Œæç¤º</p>

<pre><code>Error: probing the target board failed.
Flash Jetson TX2 : Make sure the target board is connected through
Flash Jetson TX2 : USB port and is in recovery mode.
</code></pre>

<p>çœ‹äº†ä¸‹ <code>flash.sh</code> çš„ä»£ç å‘ç°é—®é¢˜æ˜¯å› ä¸º <code>sudo ./bootloader/tegrarcm_v2 --uid</code> æŠ¥é”™ï¼š</p>

<pre><code>Failed to read UID
</code></pre>

<p>æ ¹æ®è¿™ä¸ªå›å¸–ï¼Œ<a href="https://forums.developer.nvidia.com/t/sdk-manager-could-not-detect-target-hardware/71797/24">SDK Manager - Could not detect target hardware - Jetson &amp; Embedded Systems / Jetson TX2 - NVIDIA Developer Forums</a> çŒœæµ‹æ˜¯ç¬¬ä¸€æ¬¡å› ä¸º python æŠ¥é”™å¯¼è‡´ï¼Œä½† RCM çš„ä¿¡æ¯è¢«è¯»å–ï¼Œä¸‹ä¸€æ¬¡ flash å°±ä¼šè¯»ä¸åˆ°ä¿¡æ¯æœ€åè¶…æ—¶æŠ¥é”™ã€‚
æ–­ç”µé‡æ–°è¿›å…¥ä¸€æ¬¡ Force Recovery Modeã€‚ä¾¿å¯ä»¥æ­£å¸¸åˆ·æœºã€‚å·®ç‚¹ä»¥ä¸ºæ˜¯ä¸æ”¯æŒ VMï¼š</p>

<p>ä¸è¿‡è²Œä¼¼ä¹Ÿæœ‰åŠæ³•æ”¯æŒå…¶ä»– linuxï¼šhttps://forums.developer.nvidia.com/t/using-jetpack-from-arch-linux/44979</p>

<p>ç¡®ä¿æ‰€æœ‰æ¡ä»¶æ²¡é—®é¢˜ï¼Œä¾¿å¯ä»¥å¼€å§‹åˆ·æœºã€‚</p>

<ol>
  <li>è¿›å…¥ <code>Force Recovery mode(RCM)</code>ï¼Œè®¾å¤‡å…³æœºï¼ŒæŒ‰ä½ Force Recovery é”®ï¼ˆä¸ç”µæºé”®ç›¸é‚»ï¼‰ï¼Œå†å¼€æœºã€‚</li>
  <li>é“¾æ¥ USB</li>
  <li><code>sudo ./flash.sh ${BOARD} mmcblk0p1</code></li>
</ol>

<p>åˆ·æœºæˆåŠŸï¼Œjetson ä¾¿ä¼šè‡ªåŠ¨é‡å¯ç›´æ¥è¿›å…¥ç³»ç»Ÿã€‚</p>

<h3 id="å®‰è£…åˆ°-nvme">å®‰è£…åˆ° nvme</h3>

<p>Jetson AGX Xavier éœ€è¦å…ˆåˆ·ä¸€é eMMCï¼Œæ‰èƒ½åˆ·åˆ° NVME:</p>

<blockquote>
  <p>Jetson AGX Xavier series devices use boot firmware that is stored only on internal eMMC memory, and the esp partition on internal eMMC memory is also required. As a result, this type of device can boot from a USB or an NVMe drive only if the driveâ€™s internal eMMC has been flashed.</p>
</blockquote>

<p>è¿™æ¡æŒ‡ä»¤å¯ä»¥è‡ªåŠ¨å¤„ç†æ•´ä¸ªæµç¨‹ï¼š</p>

<pre><code>sudo ./nvsdkmanager_flash.sh --storage nvme0n1p1
</code></pre>

<p>è¯¦ç»†å‚è€ƒï¼š https://docs.nvidia.com/jetson/archives/r35.2.1/DeveloperGuide/text/SD/FlashingSupport.html#flashing-to-an-nvme-drive</p>

<h1 id="control">Control</h1>

<p>åˆ·å¥½æœºåéœ€è¦ç™»é™†åˆ° jetson è¿›è¡Œé…ç½®ï¼Œæœ€ç›´æ¥çš„åšæ³•å°±æ˜¯ä¸º jetson æ¥ä¸Šæ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼Œè¿™ä¸ªå°±ä¸æäº†ã€‚å¦å¤–ä¹Ÿå¯ä»¥é€šè¿‡usb æ¨¡æ‹Ÿä¸²å£è¿›è¡Œé…ç½®ã€‚</p>

<h2 id="serial-console">Serial Console</h2>

<p>Jetsonï¼š Jetson agx xavier 32GB(P2888-004)</p>

<p>ç¬¬ä¸€æ­¥ï¼šæŒ‰ç…§ <a href="https://forums.developer.nvidia.com/t/jetson-agx-xavier-headless-setup-no-ttyacm-port-created-on-host/165331">Jetson AGX Xavier headless setup - no ttyACM port created on host - Jetson &amp; Embedded Systems / Jetson AGX Xavier - NVIDIA Developer Forums</a> çš„å®˜æ–¹å›å¤éœ€è¦ï¼Œ<strong>å°† jetson micro-usb å’Œ type-c åŒæ—¶è¿æ¥åˆ°ä¸»æœºå†å¼€å¯ jetson çš„ç”µæº</strong>ã€‚</p>

<p>ä½†æ˜¯æˆ‘åœ¨ macOS ä¸Šå‘ç°åªéœ€æ’ä¸Š typec å°±å¯ä»¥ã€‚</p>

<h3 id="macos">macOS</h3>

<p>TODO modem ä¸ serial çš„åŒºåˆ«</p>

<p>ä¸¤ä¸ªæ¥å£è¿ä¸Š  mbp åï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ioreg <span class="nt">-p</span> IOUSB  <span class="c">#å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªè®¾å¤‡</span>
...
    +-o Linux <span class="k">for </span>Tegra@14100000  &lt;class AppleUSBDevice, <span class="nb">id </span>0x1002b3edc, registered, matched, active, busy 0 <span class="o">(</span>2 ms<span class="o">)</span>, retain 24&gt;
    +-o Quad RS232-HS@14200000  &lt;class AppleUSBDevice, <span class="nb">id </span>0x1002b40d8, registered, matched, active, busy 0 <span class="o">(</span>2 ms<span class="o">)</span>, retain 18&gt;
...
<span class="nv">$ </span><span class="nb">ls</span> /dev/tty.usbmodem<span class="k">*</span> èƒ½æ‰¾åˆ°è®¾å¤‡
</code></pre></div></div>

<p>ç„¶åé€šè¿‡  <code>screen</code> è¿ä¸Šè¯¥è®¾å¤‡ä¾¿å¯ä»¥ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>screen /dev/tty.usbmodem14238200066403 <span class="nt">-8</span> <span class="nt">-b</span> 115200
</code></pre></div></div>

<p><code>C-a k</code> é€€å‡º screen</p>

<p>ç™»é™†ä¸Šå»åå¯èƒ½éœ€è¦è®¾ç½®ä¸€ä¸‹æ‰èƒ½è®©ç»ˆç«¯æœ‰é¢œè‰²ï¼š</p>

<pre><code>export TERM=xterm-256color
</code></pre>

<h3 id="ubuntu">Ubuntu</h3>

<p>FIXME</p>

<pre><code>minicon /dev/ttyUSB3 8 -b 115200 # agx xavier æ˜¯ usb3
# å¯ä»¥ä¸€ç›´ä¿æŒé“¾æ¥ï¼Œå…³æœºé‡å¯ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°
</code></pre>

<p>ubuntu å°±éœ€è¦åŒæ—¶è¿æ¥ typc-c å’Œ micro-usb æ‰èƒ½æ‰¾åˆ° <code>/dev/ttyACM*</code></p>

<h1 id="configuration">Configuration</h1>

<p>æœ‰ç”¨çš„ä¿¡æ¯ï¼š</p>

<ul>
  <li><code>/media/{user}/L4T-README</code>
    <ul>
      <li>README-usb-dev-mode.txt å¦‚ä½•é€šè¿‡ usb ä¸ä¸»æœºç›¸è¿ï¼ŒåŒ…æ‹¬è™šæ‹Ÿä¸²å£æ–¹é¢çš„ä¿¡æ¯</li>
      <li>README-vnc.txt å¿«é€Ÿé…ç½® vnc æœåŠ¡</li>
      <li>README-wifi.txt é€šè¿‡å‘½ä»¤è¡Œè¿æ¥ wifi</li>
    </ul>
  </li>
  <li><a href="https://developer.ridgerun.com/wiki/index.php?title=Xavier">NVIDIA Jetson Xavier | NVIDIA Xavier Guide | RidgeRun</a></li>
  <li><a href="https://elinux.org/Jetson_AGX_Xavier">Jetson AGX Xavier - eLinux.org</a></li>
  <li><a href="https://cloud-atlas.readthedocs.io/zh_CN/latest/machine_learning/jetson/jetson_nano.html">Jetson Nano â€” Cloud Atlas 0.1 æ–‡æ¡£</a></li>
</ul>

<h2 id="network">Network</h2>

<p>é»˜è®¤ dhcpï¼Œé…ç½®ä½¿ç”¨å‘½ä»¤ <code>nmcli</code></p>

<h2 id="apt">apt</h2>

<h3 id="æ¢æºå¯é€‰">æ¢æº(å¯é€‰)</h3>

<p>å¤‡ä»½</p>

<pre><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.origin
</code></pre>

<p>å†…å®¹æ›¿æ¢ä¸ºï¼š</p>

<pre><code>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic main multiverse restricted universe
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-security main multiverse restricted universe
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-updates main multiverse restricted universe
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-backports main multiverse restricted universe
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic main multiverse restricted universe
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-security main multiverse restricted universe
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-updates main multiverse restricted universe
deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-backports main multiverse restricted universe
</code></pre>

<h3 id="æ›´æ–°ç³»ç»Ÿ">æ›´æ–°ç³»ç»Ÿ</h3>

<pre><code>sudo apt-get update
sudo apt-get upgrade
</code></pre>

<p>è§ <a href="https://docs.nvidia.com/jetson/l4t/Tegra%20Linux%20Driver%20Package%20Development%20Guide/quick_start.html#wwpID0E0EB0HA">How to Install Debian Packages with OTA Update</a></p>

<p>display manager æ›´æ–°ä¸º lightdm(å¯é€‰ï¼ŒTODO è‡ªåŠ¨ç™»é™†æœ‰é—®é¢˜)</p>

<pre><code>sudo dpkg--reconfigure lightdm
</code></pre>

<h3 id="å…¶ä»–å¿…å¤‡">å…¶ä»–å¿…å¤‡</h3>

<ul>
  <li><a href="https://github.com/rbonghi/jetson_stats">rbonghi/jetson_stats: ğŸ“Š Simple package to monitoring and control your NVIDIA Jetson [Xavier NX, Nano, AGX Xavier, TX1, TX2]</a></li>
  <li>sudo apt install zsh</li>
  <li><a href="https://ohmyz.sh/#install">Oh My Zsh - a delightful &amp; open source framework for Zsh</a>
<code>omz theme set ys</code></li>
</ul>

<h2 id="headless-jetson">Headless Jetson</h2>

<h3 id="tigervnc">tigervnc</h3>

<p>tigervnc å„æ–¹é¢éƒ½ä¸é”™ï¼Œä½†æ˜¯ï¼Œ<a href="https://github.com/TigerVNC/tigervnc/issues/529#issuecomment-524866913">ä¸æ”¯æŒ ClientCutText</a>ï¼Œè€ƒè™‘ç”¨ <a href="https://www.realvnc.com/en/connect/download/vnc/linux/">vnc server</a>(ä¸æ”¯æŒ arm64) æ”¶è´¹è½¯ä»¶ä»£æ›¿ã€‚</p>

<h4 id="é€šè¿‡-ssh-æ“ä½œå‰ªåˆ‡æ¿">é€šè¿‡ ssh æ“ä½œå‰ªåˆ‡æ¿</h4>

<pre><code>apt-get install xclip
alias xclip="xclip -selection c" # set clip
alias xclipg="xclip -selection c -o" # get clip
export DISPLAY=:0
echo -n text | xclip
</code></pre>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>tigervnc-scraping-server
</code></pre></div></div>

<p>è®¾ç½®å¯†ç </p>

<pre><code>vncpasswd
</code></pre>
<h4 id="å…±äº«æœ¬åœ°æ¡Œé¢-x0vncserver">å…±äº«æœ¬åœ°æ¡Œé¢ x0vncserver</h4>

<p><code>x0vncserver/x0tigervncserver</code> æ”¯æŒå…±äº«æœ¬åœ°æ¡Œé¢</p>

<p>åˆ›å»º <code>~/.config/systemd/user/x0vncserver.service</code></p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[Unit]</span>
<span class="py">Description</span><span class="p">=</span><span class="s">Remote desktop service (VNC)</span>

<span class="nn">[Service]</span>
<span class="py">Type</span><span class="p">=</span><span class="s">simple</span>
<span class="c"># wait for Xorg started by lc
</span><span class="py">ExecStartPre</span><span class="p">=</span><span class="s">/bin/sh -c 'while ! pgrep -U "$USER" Xorg; do sleep 2; done'</span>
<span class="c"># 1.12.0
# ExecStart=/usr/bin/x0vncserver -localhost no -rfbauth %h/.vnc/passwd -rfbport 5900 -fg
# 1.7.0
</span><span class="py">ExecStart</span><span class="p">=</span><span class="s">/usr/bin/x0vncserver -rfbauth %h/.vnc/passwd -rfbport 5900</span>

<span class="nn">[Install]</span>
<span class="py">WantedBy</span><span class="p">=</span><span class="s">default.target</span>
</code></pre></div></div>

<p>å¯ç”¨æœåŠ¡ï¼š</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nt">--user</span> <span class="nb">enable</span> ~/.config/systemd/user/x0vncserver.service
systemctl <span class="nt">--user</span> start x0vncserver.service
</code></pre></div></div>
<p>åŒæ ·éœ€è¦ç™»é™†åæ‰èƒ½ç”Ÿæ•ˆ</p>

<p>ä¿®æ”¹ <code>/etc/gdm3/custom.conf</code> å¼€å¯è‡ªåŠ¨ç™»é™†</p>

<h4 id="ä¸€èˆ¬-vncserver-æ–¹æ¡ˆ">ä¸€èˆ¬ vncserver æ–¹æ¡ˆ</h4>

<p>é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ª vncserver å¯¹åº”ä¸€ä¸ª xsessionï¼Œä¸ä¸å½“å‰æ˜¾ç¤ºå™¨å…±äº« xsessionã€‚</p>

<p>å½“æ˜¯è¿™æ–¹æ¡ˆä¸æ”¯æŒ EGL</p>

<blockquote>
  <p>Unfortunately, if there is no monitor case, then VNC cannot work.
You could try to use RDP (remote desktop protocol) application and it should work. However, EGL seems not able to run with rdp backend. Thus, if you want to render something by using EGL, it would not work.</p>
</blockquote>

<h3 id="vino">Vino</h3>

<p>å‚è€ƒ <code>README-vnc</code>  æˆ– <a href="https://developer.nvidia.com/embedded/learn/tutorials/vnc-setup">Setting Up VNC | NVIDIA Developer</a></p>

<p>å®˜æ–¹ç”¨çš„æ˜¯ ubuntu è‡ªå¸¦çš„ vinoã€‚ä¸ x11vnc ä¸€æ ·æ˜¯å±å¹•å…±äº«ã€‚éœ€è¦ç­‰æœ¬åœ°ç™»é™†åæ‰èƒ½è¿ï¼Œä¹Ÿå¯é…ç½®è‡ªåŠ¨ç™»é™†:</p>

<p>ä¿®æ”¹ <code>/etc/gdm3/custom.conf</code> å¼€å¯è‡ªåŠ¨ç™»é™†</p>

<p>ä¸æ’æ˜¾ç¤ºå™¨ä¹Ÿæ”¯æŒï¼Œä¸è¿‡é»˜è®¤åˆ†è¾¨ç‡æœ‰ç‚¹å°:</p>

<p>é»˜è®¤åˆ†è¾¨ç‡å¤ªå°ï¼Œéœ€è¦ä¿®æ”¹ <code>/etc/X11/xorg.conf</code></p>

<pre><code>Section "Screen"
   Identifier    "Default Screen"
   Monitor        "Configured Monitor"
   Device        "Default Device"
   SubSection "Display"
       Depth    24
       Virtual 1440 900
   EndSubSection
EndSection
</code></pre>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ hdmi æ¬ºéª—å™¨ã€‚</p>

<p>é—®é¢˜ï¼š<strong>å¡</strong>ï¼Œæ²¡æœ‰ tigervnc æµç•…</p>

<p>åˆ‡æ¢åˆ° lightdm åæµç•…åº¦æ”¹å–„ä¸å°‘ã€‚</p>

<h3 id="x11vnc">x11vnc</h3>

<ol>
  <li>Dummy Monitor ä¸èƒ½ç”Ÿæ•ˆï¼Œä¸”ä¸èƒ½ä½¿ç”¨ nvidia é©±åŠ¨</li>
  <li>å°è¯• hdmi æ¬ºéª—å™¨ TODO</li>
</ol>

<h4 id="å¼€æœºè‡ªåŠ¨å¯ç”¨-x11vnc">å¼€æœºè‡ªåŠ¨å¯ç”¨ x11vnc</h4>

<ol>
  <li>
    <p>login manager è‡ªåŠ¨ç™»é™†</p>
  </li>
  <li>
    <p>å…ˆè¿åˆ° loginmanager çš„ xsession(Dispaly=:0)ï¼Œæ‰‹åŠ¨ç™»é™†åå†ï¼Œè¿åˆ°æ¡Œé¢ï¼ˆDisplay=:1ï¼‰:https://askubuntu.com/a/1036507
p</p>
    <h3 id="x11-forwarding">X11 Forwarding</h3>
  </li>
</ol>

<p>è½¬å‘è¿œç«¯çš„ xclient é“¾æ¥åˆ°æœ¬åœ°çš„ xserver</p>

<h4 id="macos-1">macos</h4>

<ul>
  <li>xquartz</li>
</ul>

<h1 id="development">Development</h1>

<ul>
  <li><a href="https://elinux.org/Jetson_Zoo">Jetson Zoo - eLinux.org</a></li>
  <li><a href="https://github.com/dusty-nv/jetson-inference">dusty-nv/jetson-inference: Hello AI World guide to deploying deep-learning inference networks and deep vision primitives with TensorRT and NVIDIA Jetson.</a></li>
</ul>

<h2 id="jetpack">jetpack</h2>

<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQRL973rup4vKwlFuY_gu0sXh336QACYg8kEAYs4XYggeh2ew1X0-TppZ5R8kHMoViCO-w-2jK3AqEC/pub?w=1078&amp;h=572" alt="Jetpack" /></p>

<h3 id="jetpack-5x">jetpack 5.x</h3>

<pre><code>sudo apt install nvidia-jetpack
</code></pre>

<ul>
  <li>éœ€è¦åœ¨æœ¬æœºè·‘ç¨‹åºï¼Œåˆ™å®‰è£… jetpack
nvidia-jetpack å®‰è£…ä¸¤ä¸ªåŒ…ï¼ˆ11.6GBï¼‰ï¼š
    <ul>
      <li>nvidia-jetpack-runtime</li>
      <li>nvidia-jetpack-dev (å¼€å‘å¯é€‰)</li>
    </ul>
  </li>
  <li>docker çš„è¯åˆ™åªéœ€å®‰è£… nvidia-containerï¼ˆ5.9GBï¼‰</li>
</ul>

<h3 id="jetpack-4x">jetpack 4.x</h3>

<pre><code>sudo apt install nvidia-jetpack
</code></pre>

<p>è§ <a href="https://docs.nvidia.com/jetson/jetpack/install-jetpack/index.html#package-management-tool">1.3.Â Package Management Tool</a></p>

<p>æœ€å 32 GB çš„ç©ºé—´å‰©ä¸‹ï¼š</p>

<pre><code>   /dev/mmcblk0p1   28G   12G   15G  46% /
</code></pre>

<h2 id="python">python</h2>

<p>ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦ python3 è®°å¾—å…ˆå‡çº§ä¸€ä¸‹ pip é¿å…å„ç§å¥‡è‘©é—®é¢˜ï¼š</p>

<pre><code>python3 -m pip install pip
</code></pre>

<h3 id="jupyter">jupyter</h3>

<pre><code>- python -m pip install jupyterlab ipywidgets
- [matplotlib/ipympl: Matplotlib Jupyter Integration](https://github.com/matplotlib/ipympl)
</code></pre>

<h2 id="docker">docker</h2>

<h3 id="jetpack-5x-1">Jetpack 5.x</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>nvidia-container
<span class="nb">sudo </span>systemctl restart docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>
newgrp docker
</code></pre></div></div>

<h3 id="jetpack-46">Jetpack: 4.6</h3>

<p>Docker: 20.10.7 ä¼šé‡åˆ°ï¼š</p>

<blockquote>
  <p>docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.</p>
</blockquote>

<p><a href="https://forums.developer.nvidia.com/t/docker-isnt-working-after-apt-upgrade/195213">Docker isnâ€™t working after apt upgrade - Jetson &amp; Embedded Systems / Jetson Nano - NVIDIA Developer Forums</a></p>

<p>é™çº§ docker è§£å†³ :</p>

<p>wget https://launchpad.net/ubuntu/+source/docker.io/20.10.2-0ubuntu1~18.04.2/+build/21335731/+files/docker.io_20.10.2-0ubuntu1~18.04.2_arm64.deb
sudo dpkg -i docker.io_20.10.2-0ubuntu1~18.04.2_arm64.deb
rm docker.io_20.10.2-0ubuntu1~18.04.2_arm64.deb
sudo apt install containerd=1.5.2-0ubuntu1~18.04.3</p>

<p>pin docker ç‰ˆæœ¬:</p>

<pre><code>sudo nano /etc/apt/preferences
</code></pre>

<pre><code class="language-text">Package: docker.io
Pin: version 20.10.2*
Pin-Priority: 1001

Package: containerd
Pin: version 1.5.2*
Pin-Priority: 1001
</code></pre>

<h2 id="pytorch">pytorch</h2>

<h3 id="docker-1">Docker</h3>

<p>ä¸æŠ˜è…¾é€‰æ‹© dockerï¼š</p>

<p><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-pytorch">NVIDIA L4T PyTorch | NVIDIA NGC</a></p>

<h3 id="æœ¬åœ°å®‰è£…">æœ¬åœ°å®‰è£…</h3>

<p><a href="https://forums.developer.nvidia.com/t/pytorch-for-jetson-version-1-10-now-available/72048">PyTorch for Jetson - version 1.10 now available - Jetson &amp; Embedded Systems / Jetson Nano - NVIDIA Developer Forums</a></p>

<p>cmake python3</p>

<p>https://github.com/pytorch/vision/issues/2565</p>

<h2 id="cmake">cmake</h2>

<p>ç³»ç»Ÿè‡ªå¸¦ç‰ˆæœ¬å¤ªæ—§ï¼Œç¼–è¯‘ torchvison ä¸æ”¯æŒ python3ã€‚åˆ é™¤ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œå†ä»æºç é‡æ–°ç¼–è¯‘ã€‚</p>

<pre><code>sudo apt remove cmake
</code></pre>

<p>ç¡®ä¿å®‰è£… openssl ä¾èµ–</p>

<pre><code>sudo apt install libssl-dev
</code></pre>

<p>ä¸‹è½½</p>

<h2 id="opencv">opencv</h2>

<p>è‡ªå¸¦çš„ opencv å¹¶ä¸æ”¯æŒ CUDAï¼Œ<code>cv2.getBuildInfomation()</code>ï¼š</p>

<pre><code>General configuration for OpenCV 4.1.1 =====================================
  Version control:               4.1.1-2-gd5a58aa75

  Platform:
    Timestamp:                   2019-12-13T17:25:11Z
    Host:                        Linux 4.9.140-tegra aarch64
    CMake:                       3.10.2
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  CPU/HW features:
    Baseline:                    NEON FP16
      required:                  NEON
      disabled:                  VFPV3

  ....

OpenCV modules:
    To be built:                 calib3d core dnn features2d flann gapi highgui imgcodecs imgproc ml objdetect photo python2 python3 stitching ts video videoio
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 java js
    Applications:                tests perf_tests examples apps
    Documentation:               NO
    Non-free algorithms:         NO
</code></pre>

<p>éœ€è¦è‡ªå·±é‡æ–°ç¼–è¯‘ï¼š<a href="https://qengineering.eu/install-opencv-4.5-on-jetson-nano.html">Install OpenCV 4.5 on Jetson Nano - Q-engineering</a></p>

<pre><code># reveal the CUDA location
sudo sh -c "echo '/usr/local/cuda/lib64' &gt;&gt; /etc/ld.so.conf.d/nvidia-tegra.conf"
sudo ldconfig
# third-party libraries
sudo apt-get install build-essential cmake git unzip pkg-config
sudo apt-get install libjpeg-dev libpng-dev libtiff-dev
sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev
sudo apt-get install libgtk2.0-dev libcanberra-gtk*
sudo apt-get install python3-dev python3-numpy python3-pip
sudo apt-get install libxvidcore-dev libx264-dev libgtk-3-dev
sudo apt-get install libtbb2 libtbb-dev libdc1394-22-dev
sudo apt-get install libv4l-dev v4l-utils
sudo apt-get install libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev
sudo apt-get install libavresample-dev libvorbis-dev libxine2-dev
sudo apt-get install libfaac-dev libmp3lame-dev libtheora-dev
sudo apt-get install libopencore-amrnb-dev libopencore-amrwb-dev
sudo apt-get install libopenblas-dev libatlas-base-dev libblas-dev
sudo apt-get install liblapack-dev libeigen3-dev gfortran
sudo apt-get install libhdf5-dev protobuf-compiler
sudo apt-get install libprotobuf-dev libgoogle-glog-dev libgflags-dev
# qt5
sudo apt-get install qt5-default
</code></pre>

<p>ä¸‹è½½æºç ï¼š</p>

<pre><code># download the latest version
$ cd ~
$ wget -O opencv.zip https://github.com/opencv/opencv/archive/4.5.0.zip
$ wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/4.5.0.zip
# unpack
$ unzip opencv.zip
$ unzip opencv_contrib.zip

$ mv opencv-4.5.0 opencv
$ mv opencv_contrib-4.5.0 opencv_contrib
# clean up the zip files
$ rm opencv.zip
$ rm opencv_contrib.zip

$ cd ~/opencv
$ mkdir build
$ cd build
</code></pre>

<p>ç¡®ä¿ <code>CUDA_ARCH_BIN</code> æ”¹æˆ agx xavier çš„ç‰ˆæœ¬
é»˜è®¤å®‰è£…ä½ç½®æ˜¯ <code>/usr/local</code>ï¼Œæ”¹æˆ<code>/usr</code>æ˜¯ä¸ºäº†å’Œæœ¬æœºç‰ˆæœ¬å…±å­˜ã€‚</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE \
        -D CMAKE_INSTALL_PREFIX=/usr \
        -D OPENCV_EXTRA_MODULES_PATH=~/Playground/opencv_contrib/modules \
        -D EIGEN_INCLUDE_PATH=/usr/include/eigen3 \
        -D WITH_CUDA=ON \
        -D CUDA_ARCH_BIN=7.2 \
        -D CUDA_ARCH_PTX="" \
        -D WITH_CUDNN=ON \
        -D WITH_CUBLAS=ON \
        -D ENABLE_FAST_MATH=ON \
        -D CUDA_FAST_MATH=ON \
        -D OPENCV_DNN_CUDA=ON \
        -D ENABLE_NEON=ON \
        -D WITH_QT=ON \
        -D WITH_OPENMP=ON \
        -D WITH_OPENGL=ON \
        -D BUILD_TIFF=ON \
        -D WITH_FFMPEG=ON \
        -D WITH_GSTREAMER=ON \
        -D WITH_TBB=ON \
        -D BUILD_TBB=ON \
        -D BUILD_TESTS=OFF \
        -D WITH_EIGEN=ON \
        -D WITH_V4L=ON \
        -D WITH_LIBV4L=ON \
        -D OPENCV_ENABLE_NONFREE=ON \
        -D INSTALL_C_EXAMPLES=OFF \
        -D INSTALL_PYTHON_EXAMPLES=OFF \
        -D BUILD_NEW_PYTHON_SUPPORT=ON \
        -D BUILD_opencv_python3=TRUE \
        -D OPENCV_GENERATE_PKGCONFIG=ON \
        -D BUILD_EXAMPLES=ON ..
</code></pre>

<p>ç¼–è¯‘</p>

<pre><code>make -j4


$ sudo rm -r /usr/include/opencv4/opencv2 # æ¸…ç† old packages
$ sudo make install
$ sudo ldconfig
# cleaning (frees 300 KB)
$ make clean
</code></pre>

<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>

<pre><code>General configuration for OpenCV 4.5.1 =====================================
  Version control:               unknown

  Extra modules:
    Location (extra):            /home/tx/Playground/opencv_contrib/modules
    Version control (extra):     unknown

  Platform:
    Timestamp:                   2020-12-29T03:01:07Z
    Host:                        Linux 4.9.140-tegra aarch64
    CMake:                       3.19.2
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               RELEASE

  CPU/HW features:
    Baseline:                    NEON FP16
      required:                  NEON

  ...

  OpenCV modules:
    To be built:                 alphamat aruco bgsegm bioinspired calib3d ccalib core cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev cvv datasets dnn dnn_objdetect dnn_superres dpm face features2d flann freetype fuzzy gapi hdf hfs highgui img_hash imgcodecs imgproc intensity_transform line_descriptor mcc ml objdetect optflow phase_unwrapping photo plot python3 quality rapid reg rgbd saliency sfm shape stereo stitching structured_light superres surface_matching text tracking ts video videoio videostab xfeatures2d ximgproc xobjdetect xphoto
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 cnn_3dobj java julia matlab ovis python2 viz
    Applications:                perf_tests examples apps
    Documentation:               NO
    Non-free algorithms:         YES




cv2.cuda.getCudaEnabledDeviceCount()
1
</code></pre>

<h2 id="gstreamer">gstreamer</h2>

<p>å®˜æ–¹ Manual:</p>
<ul>
  <li>https://developer.download.nvidia.com/embedded/L4T/r32_Release_v1.0/Docs/Accelerated_GStreamer_User_Guide.pdf?t=eyJscyI6ImdzZW8iLCJsc2QiOiJodHRwczovL3d3dy5nb29nbGUuY29tLyJ9</li>
  <li><a href="https://docs.nvidia.com/jetson/archives/r35.2.1/DeveloperGuide/text/SD/Multimedia/AcceleratedGstreamer.html">Accelerated GStreamer</a></li>
</ul>

<p>å®‰è£…:</p>

<pre><code>sudo add-apt-repository universe
sudo add-apt-repository multiverse
sudo apt-get update
sudo apt-get install gstreamer1.0-tools gstreamer1.0-alsa \
  gstreamer1.0-plugins-base gstreamer1.0-plugins-good \
  gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly \
  gstreamer1.0-libav
sudo apt-get install libgstreamer1.0-dev \
  libgstreamer-plugins-base1.0-dev \
  libgstreamer-plugins-good1.0-dev \
  libgstreamer-plugins-bad1.0-dev
</code></pre>

<p>opencv æ‰èƒ½æ”¯æŒ <code>CAP_GSTREAMER</code>ï¼Œ<a href="https://github.com/NVIDIA-AI-IOT/jetcam">jetcam</a> æ‰èƒ½æ­£å¸¸ä½¿ç”¨</p>

<p><code>cv2.getBuildInfomation()</code> è¾“å‡ºæœ‰ï¼š</p>

<pre><code>Video I/O:
    FFMPEG:                      YES
      avcodec:                   YES (57.107.100)
      avformat:                  YES (57.83.100)
      avutil:                    YES (55.78.100)
      swscale:                   YES (4.8.100)
      avresample:                NO
    GStreamer:                   YES (1.14.5)
    v4l/v4l2:                    YES (linux/videodev2.h)
</code></pre>

<ul>
  <li>videoparse</li>
  <li>videoconvert</li>
  <li>queue</li>
</ul>

<h2 id="ipython">ipython</h2>

<h3 id="ä¸-jedi-ä¸å…¼å®¹">ä¸ jedi ä¸å…¼å®¹</h3>

<p>python3.6 æ”¯æŒçš„ ipython 7.16.xï¼Œä¸ jedi 0.18 ä¸å…¼å®¹æŠ¥é”™ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> File <span class="s2">"../venv/lib/python3.8/site-packages/IPython/core/completer.py"</span>, line 2029, <span class="k">in </span>_complete
    completions <span class="o">=</span> self._jedi_matches<span class="o">(</span>
  File <span class="s2">"../venv/lib/python3.8/site-packages/IPython/core/completer.py"</span>, line 1373, <span class="k">in </span>_jedi_matches
    interpreter <span class="o">=</span> jedi.Interpreter<span class="o">(</span>
  File <span class="s2">"../venv/lib/python3.8/site-packages/jedi/api/__init__.py"</span>, line 725, <span class="k">in </span>__init__
    super<span class="o">()</span>.__init__<span class="o">(</span>code, <span class="nv">environment</span><span class="o">=</span>environment,
TypeError: __init__<span class="o">()</span> got an unexpected keyword argument <span class="s1">'column'</span>
</code></pre></div></div>

<p>éœ€è¦é™çº§ jediï¼Œemacs lsp-mode éœ€è¦çš„ jedi-language-server 0.22.0ï¼Œåˆå°† jedi pin åœ¨ 0.18ã€‚
éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 <span class="nb">install</span> <span class="s1">'jedi==0.17.2'</span>
pip3 <span class="nb">install</span> <span class="s1">'jedi_language_server==0.21.0'</span>
</code></pre></div></div>

<p><a href="https://github.com/ipython/ipython/issues/12740">Last jedi release (0.18.0) is incompatible with ipython (7.19 and 7.18 tested); reason - column arg was deprecated, and now removed Â· Issue #12740 Â· ipython/ipython</a></p>

<h3 id="jupyter-æ— æ³•æ˜¾ç¤ºå›¾ç‰‡">jupyter æ— æ³•æ˜¾ç¤ºå›¾ç‰‡</h3>

<p>https://stackoverflow.com/questions/61834868/ipython-display-display-not-showing-image-in-jupyter-notebook</p>

<pre><code>python3 -m pip install ipywidgets
jupyter nbextension enable --py widgetsnbextension
# éœ€è¦å®‰è£… jupyter-lab å’Œ nodejs &gt; 12
jupyter labextension install @jupyter-widgets/jupyterlab-manager
</code></pre>

<h2 id="zed">ZED</h2>

<p>ç¡®ä¿å®‰è£…äº†</p>

<p>Cython</p>

<p>è·ç¦»è¯†åˆ«æ¨¡å¼</p>

<ul>
  <li>STANDARDï¼Œæ•ˆç‡å¥½ï¼Œæ£€æµ‹è¾¹ç•Œï¼Œå­˜åœ¨é»‘æ´ï¼ˆæ— æ³•è·å–æ•°æ®çš„ç‚¹ï¼‰</li>
  <li>FILLï¼Œç”Ÿäº§ç¨ å¯†çš„è·ç¦»å›¾ï¼Œä¸æ”¯æŒ Point Cloudï¼Œ</li>
</ul>

<p>Dr=Z^2*alpha, where Dr is depth resolution, Z the distance and alpha a constant.</p>

<p>zed-gstreamer</p>

<pre><code>gir1.2-gst-rtsp-server-1.0 gstreamer1.0-doc gstreamer1.0-qt5 libglib2.0-doc libgstrtspserver-1.0-0 libgstrtspserver-1.0-dev
</code></pre>

</article>
<div class="tag-container" >
    
</div>


<div id="disqus_thread"></div>
<script>

 /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
 var jekyll_id = "/notes/Computer/jetson"
 var disqus_config = function () {
     this.page.title = "Jetson"
     this.page.identifier = "posts"+jekyll_id.substring(jekyll_id.lastIndexOf('/'))+".md"; // required: replace example with your forum shortname
     console.log(this.page.identifier);
     this.page.url = "http://dourok.info/notes/Computer/jetson/";
    };

 (function() { // DON'T EDIT BELOW THIS LINE
     var d = document, s = d.createElement('script');
     s.src = '//doousblog.disqus.com/embed.js';
     s.setAttribute('data-timestamp', +new Date());
     (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




<a class="btn-floating btn-large waves-effect waves-light scale-transition fab" id="fab"><i class="material-icons">keyboard_arrow_up</i></a>
</div>
    <div class="col hide-on-small-only m1 xl1 ">
        <a class="btn-floating teal" id='toc-toggle'><i id='toc-toogle-icon' class="material-icons">compare_arrows</i></a>
      </div>
    <div class="col hide-on-small-only m3 xl3 offset-xl1 toc-wrapper">
      <ul class="section table-of-contents">
      </ul>
    </div>
  </button>
</div>
</main>

<footer>
    <div class="container">
        <div class="row">
            <div class="col s12 m5 offset-m1">
                <h5>å‹æƒ…é“¾æ¥</h5>
                <ul class="mdl-mega-footer__link-list">
                    
                    <li><a href="https://magicalboy.com/">MAGICALBOY</a></li>
                    
                    <li><a href="http://www.cnlvzi.com/">é©´å­åšå®¢</a></li>
                    
                </ul>
            </div>
            <div class="col s12 m5">
                <div class="footer-nav">
                    
                    <a href="/">ä¸»é¡µ</a>
                    
                    <a href="/notes">ç¬”è®°</a>
                    
                    <a href="/categories#coder-ref">ç¼–ç </a>
                    
                    <a href="/categories#life-ref">ç”Ÿæ´»</a>
                    
                    <a href="/categories#otaku-ref">å…´è¶£</a>
                    
                    <a href="/tags">æ ‡ç­¾</a>
                    
                    <a href="/log">æ—¥å¿—</a>
                    
                    <a href="/help">å¸®åŠ©</a>
                    
                    <a href="/about">å…³äº</a>
                    
                </div>
        </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
                <div class="col offset-m1">
                    Â©2009-ä¸–ç•Œæœ«æ—¥ | åŸºæ–¼ <a href="https://jekyllrb.com">Jekyll</a> | ä¸»é¢˜ <a href="#">Moon</a> | <small class="license">
	                  <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width: 0px; vertical-align: middle; display: inline; " src="https://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" original="https://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
	                  </small>
                </div>
            </div>
        </div>
    </div>
</footer>



        

        

        
    </body>

</html>
