
<!DOCTYPE html>
<html lang="zh-Hant-CN" class="borderbox" >
   
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    2018年04月11日杂记 | DouO's Note</title>
  <meta name="description" content="有時樹會倒下，某片天頃刻明亮
">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon" />
  <!-- Windows 8 Tile Icons -->
  <meta name="application-name" content=" Blog">
  <meta name="msapplication-TileColor" content="#5d4d7a">
  <meta name="msapplication-square70x70logo" content="smalltile.png" />
  <meta name="msapplication-square150x150logo" content="mediumtile.png" />
  <meta name="msapplication-wide310x150logo" content="widetile.png" />
  <meta name="msapplication-square310x310logo" content="largetile.png" />
  <!-- Android Lolipop Theme Color -->
  <meta name="theme-color" content="#5d4d7a">
  <link rel="stylesheet" href="/assets/main.css">
  <script src="/assets/main.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

  <body>
    <header>
  <nav class="top-nav">
    <div class="container">
      <div class="nav-wrapper">
        <div class="row">
          <div class="col s12 m10 offset-m1">
            <h1 class="header">2018年04月11日杂记</h1>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <div class="container"><a href="#" data-target="nav-mobile" class="top-nav sidenav-trigger full hide-on-large-only"><i class="material-icons">menu</i></a></div>
  <ul id="nav-mobile" class="sidenav sidenav-fixed">
    <li class="logo"><a id="logo-container" href="/notes" class="brand-logo">
      <object id="front-page-logo" type="image/svg+xml">Your browser does not support SVG</object>
    </a>
    <div class="social">
      <ul>
        
        <li>
          <a href="/rss.xml" title="订阅">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-feed"></use>
            </svg>
          </a>
        </li>
        
        <li>
          <a href="https://github.com/douo" title="Github">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-github"></use>
            </svg>
          </a>
        </li>
        
        <li>
          <a href="https://stackoverflow.com/users/851344/douo" title="StackOverflow">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-stack-overflow"></use>
            </svg>
          </a>
        </li>
        
        <li>
          <a href="https://plus.google.com/102537448648560113422" title="Google Plus">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-google-plus"></use>
            </svg>
          </a>
        </li>
        
        <li>
          <a href="https://instagram.com/douo" title="Instagram">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-instagram"></use>
            </svg>
          </a>
        </li>
        
      </ul>
    </div>
    </li>
    <li class="search">
      <div class="search-wrapper">
        <input id="search" placeholder="Search"><i class="material-icons">search</i>
        <div class="search-results"></div>
      </div>
    </li>
    <li class="no-padding">
      <div id="blog-nav">
        <ul>
          
          <li><a href="/">主页</a></li>
          
          <li><a href="/notes">笔记</a></li>
          
          <li><a href="/categories#coder-ref">编码</a></li>
          
          <li><a href="/categories#life-ref">生活</a></li>
          
          <li><a href="/categories#otaku-ref">兴趣</a></li>
          
          <li><a href="/tags">标签</a></li>
          
          <li><a href="/log">日志</a></li>
          
          <li><a href="/help">帮助</a></li>
          
          <li><a href="/about">关于</a></li>
          
        </ul>
      </div>
      <div id="note-nav"></div>
    </li>
  </ul>
  <div id="nav-tab" class="hide-on-med-and-down">
    <div class="row">
      <ul class="tabs">
        <li class="tab col s6"><a href="#blog-nav">博客</a></li>
        <li class="tab col s6"><a href="#note-nav">笔记</a></li>
      </ul>
    </div>
  </div>
</header>
<!-- Page Layout here -->
<main><div class="container">
  <div class="row">

    <div class="content col s12 m8 offset-m1 xl7 offset-xl1"> <div class="post-meta">
<span class="post-date tooltipped" data-tooltip="最后更新 18-08-02">2018-04-11</span>
    
</div>

<article>
    <p><a href="https://www.youtube.com/watch?v=o_TH-Y78tt4">The Principles of Clean Architecture by Uncle Bob Martin - YouTube</a></p>

<ul>
  <li>Architecture is about intent</li>
  <li>MVC is not an architecture | 197x | smalltalk | controller get device input to model | model observer</li>
  <li>MVP ，业务代码与可复用代码的边界</li>
  <li>The reason for the DB to exist is disappearing. And we’re going to have access to indefinite amounts of persistent RAM that we can store data in. NoSql movement is borne out of the idea that we don’t need DB’s anymore.</li>
  <li>Good architectures allow major architectural decisions to be deferred.</li>
</ul>

<h1 id="clean-architecture">Clean Architecture</h1>
<h2 id="introduction">Introduction</h2>

<blockquote>
  <p>As with any metaphor, describing software through the lens of architecture can hide as much as it can reveal. It can both promise more than it can deliver and deliver more than it promise</p>
</blockquote>

<p>View is stupid</p>

<blockquote>
  <p>Architecture represents the significant design decisions that shape a system, where significant is measured by cost of change.</p>
</blockquote>

<h3 id="what-is-design-and-architecture">What is design and Architecture</h3>

<blockquote>
  <p>The goal of software architecture is to minimize the human resources required to build and maintain the required system.</p>
</blockquote>

<p>making messes is always slower than staying clean</p>

<h3 id="2-behavior-and-structure">2. Behavior and Structure</h3>

<ul>
  <li>If you give me a program that works perfectly but is impossible to change, then it won’t work when the requirements change, and I won’t be able to make it work. Therefore the program will become useless.</li>
  <li>If you give me a program that does not work but is easy to change, then I can make it work, and keep it working as requirements change. Therefore the program will remain continually useful.</li>
</ul>

<h2 id="paradigms">Paradigms</h2>

<ol>
  <li>Structured Programming，imposes discipline on direct transfer of control.</li>
  <li>Object-Oriented Programming，imposes discipline on indirect transfer of control</li>
  <li>Functional Programming， imposes discipline upon assignment</li>
</ol>

<p>three big concerns of architecture: function, separation of components, and data management.</p>

<h3 id="structured-programming">Structured Programming</h3>

<ul>
  <li>禁用 <code>goto</code></li>
  <li>函数分解（模块与组件）,分解为可被证伪（falsifiable）的单元</li>
</ul>

<h3 id="object-oriented-promgramming">Object-Oriented Promgramming</h3>

<ul>
  <li>combination data and funciton; modeling the real world</li>
  <li>encapsulation, inheritance, polymorphism</li>
</ul>

<h4 id="封装encapsulation">封装（encapsulation）</h4>

<p>隐藏细节，通过 api 暴露行为。封装最好的语言是 C，只暴露头文件中声明的方法，隐藏所有细节。但 C 不是 OO 语言。Java 和 C# 弱化了这种封装， it is impossible to separate the declaration and definition of a class</p>

<h4 id="继承inheritance">继承（inheritance）</h4>

<p>Inheritance is simply the redeclaration of a group of variables and functions within an enclosing scope.</p>

<h4 id="多态polymorphism">多态（polymorphism）</h4>

<p>polymorphism is an application of pointers to functions. OO languages may not have given us polymorphism, but they have made it much safer and much more convenient.</p>

<h4 id="依赖倒置dependence-inversion">依赖倒置（dependence inversion）</h4>

<p>高级函数依赖于低级函数的接口，而不是具体实现。把对具体实现的依赖分离出来。低级的实现，可以被独立部署更替。</p>

<p>OO is the ability, through the use of polymorphism, to gain absolute control over every source code dependency in the system.</p>

<h3 id="functional-programming">Functional Programming</h3>

<p>Variables in functional languages do not vary.</p>

<p>隔离拥有可变变量的组件和不可变组件（纯函数）</p>

<p>store the transactions not state</p>

<h2 id="solid">SOLID</h2>

<p>不断优化一个复杂的系统，并容错性和故障恢复率的帮助下进行优化，不要期望大而全面的设计或架构，因为它们的开发以迭代的方式发生。</p>

<ul>
  <li>SRP（单一职责）</li>
  <li>OCP（开闭）</li>
  <li>LSP（里氏替换）</li>
  <li>ISP（接口隔离）</li>
  <li>DIP（依赖倒置）</li>
</ul>

<h3 id="sinple-responsibility-principle">Sinple Responsibility Principle</h3>

<blockquote>
  <p>A module should have one, and only one, reason to change.
A module should be responsible to one, and only one, user or stakeholder.</p>
</blockquote>

<h3 id="open-closed-principle">Open-Closed Principle</h3>

<blockquote>
  <p>A software artifact should be open for extension but closed for modification.</p>
</blockquote>

<h3 id="liskov-substitution-principle">Liskov substitution principle</h3>

<p>打破 Liskov 的继承例子</p>

<pre><code>Rectangle r = ...
r.setW(5)
r.setH(2)
assert(r.area() == 10) // 对 square 不成立
</code></pre>

<p>The best way to understand the LSP from an architectural viewpoint is to look at what happens to the architecture of a system when the principle is violated.</p>

<h3 id="interface-segregation-principle">Interface Segregation Principle</h3>

<p>The lesson here is that depending on something that carries baggage that you don’t need can cause you troubles that you didn’t expect.</p>

<h3 id="dependency-inversion-principle">Dependency Inversion Principle</h3>

<p>flow of control 与 direction of the source code dependencies</p>

<h2 id="component-principles">Component Principles</h2>

<h3 id="component-cohesion">Component Cohesion</h3>

<ul>
  <li>REP：The Reuse/Release Equivalence Principle</li>
  <li>CCP: The Common Closure Principle</li>
  <li>CRP: The Common Reuse Principle</li>
</ul>

<h4 id="rep">REP</h4>

<p>Classes and modules that are grouped together into a component should be releasable together.</p>

<h4 id="ccp">CCP</h4>

<p>Gather into components those classes that change for the same reasons and at the same times. Separate into different components those classes that change at different times and for different reasons.</p>

<h4 id="crp">CRP</h4>

<p>Don’t depend on things you don’t need.</p>

<h3 id="component-coupling">Component Coupling</h3>

<p>软件工程的发展史</p>

<h2 id="architecture">Architecture</h2>

<h3 id="what-is-architecture">What is Architecture</h3>

<p>Architecture 用了一个词形状（Shape）</p>
<ul>
  <li>这个形状的形式（form）是指系统如何划分为组件，各个组件如何安排，组件之间如何沟通。</li>
  <li>这个形状的目的，是促进这个形式内的系统的开发，部署、运维和维护</li>
</ul>

<p>要区分系统结构与系统的功能，</p>

<ul>
  <li>开发</li>
  <li>部署</li>
  <li>运维（operation）</li>
  <li>维护（maintain）</li>
</ul>

<h3 id="independence">Independence</h3>

<ul>
  <li>
    <p>用例</p>
  </li>
  <li>horizontal layer: ui, application-specific bussiness rules, application-independent BR,db</li>
  <li>vertical layer: user case</li>
</ul>

<h3 id="boundaries">Boundaries</h3>

<p>delay decisions</p>

<h3 id="policy-and-level">Policy and Level</h3>

<ul>
  <li>Entities，An Entity is an object within our computer system that embodies a small set of critical business rules operating on Critical Business Data.</li>
  <li>Use Case, A use case is a description of the way that an automated system is used.</li>
</ul>

<p>Model 先行</p>

<h3 id="clean-architecture-1">Clean Architecture</h3>

<ul>
  <li>Entities</li>
  <li>User Case</li>
  <li>Interface Adapters</li>
  <li>Framework and Drivier</li>
</ul>

<h3 id="presenter">Presenter</h3>

<p>Humble Object pattern，分离易于测试和不易于测试的代码。</p>

<h3 id="partial-boundaries">Partial Boundaries</h3>

<ul>
  <li>One-Dimension阿里 Boundaries</li>
  <li>Facades</li>
</ul>

<h3 id="layers-and-boundaries">Layers and Boundaries</h3>

<p>that point, you weigh the costs of implementing those boundaries versus the cost of ignoring them—and you review that decision frequently.</p>

<h3 id="the-main-component">The Main Component</h3>

<ul>
  <li>The Main component is the ultimate detail—the lowest-level policy.</li>
  <li>entry point of the system</li>
</ul>

<h3 id="services">Services</h3>

<p>fallacies of service-based architecture</p>

<ol>
  <li>decouple</li>
  <li>indenpendent development and deployment</li>
</ol>

<h3 id="test-boundary">Test Boundary</h3>

<p>Structure decoupling</p>

</article>
<div class="tag-container" >
    
</div>

<div id="disqus_thread"></div>
<script>

 /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
 var jekyll_id = "/notes/Quick/2018/04/note-2018-04-11"
 var disqus_config = function () {
     this.page.title = "2018年04月11日杂记"
     this.page.identifier = "posts"+jekyll_id.substring(jekyll_id.lastIndexOf('/'))+".md"; // required: replace example with your forum shortname
     console.log(this.page.identifier);
     this.page.url = "http://dourok.info/notes/Quick/2018/04/note-2018-04-11/";
    };

 (function() { // DON'T EDIT BELOW THIS LINE
     var d = document, s = d.createElement('script');
     s.src = '//doousblog.disqus.com/embed.js';
     s.setAttribute('data-timestamp', +new Date());
     (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<a class="btn-floating btn-large waves-effect waves-light scale-transition fab" id="fab"><i class="material-icons">keyboard_arrow_up</i></a>
</div>
    <div class="col hide-on-small-only m1 xl1 ">
        <a class="btn-floating teal" id='toc-toggle'><i id='toc-toogle-icon' class="material-icons">compare_arrows</i></a>
      </div>
    <div class="col hide-on-small-only m3 xl3 offset-xl1 toc-wrapper">
      <ul class="section table-of-contents">
      </ul>
    </div>
  </button>
</div>
</main>

<footer>
    <div class="container">
        <div class="row">
            <div class="col s12 m5 offset-m1">
                <h5>友情链接</h5>
                <ul class="mdl-mega-footer__link-list">
                    
                    <li><a href="https://magicalboy.com/">MAGICALBOY</a></li>
                    
                    <li><a href="http://www.cnlvzi.com/">驴子博客</a></li>
                    
                </ul>
            </div>
            <div class="col s12 m5">
                <div class="footer-nav">
                    
                    <a href="/">主页</a>
                    
                    <a href="/notes">笔记</a>
                    
                    <a href="/categories#coder-ref">编码</a>
                    
                    <a href="/categories#life-ref">生活</a>
                    
                    <a href="/categories#otaku-ref">兴趣</a>
                    
                    <a href="/tags">标签</a>
                    
                    <a href="/log">日志</a>
                    
                    <a href="/help">帮助</a>
                    
                    <a href="/about">关于</a>
                    
                </div>
        </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
                <div class="col offset-m1">
                    ©2009-世界末日 | 基於 <a href="https://jekyllrb.com">Jekyll</a> | 主题 <a href="#">Moon</a> | <small class="license">
	                  <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="知识共享许可协议" style="border-width: 0px; vertical-align: middle; display: inline; " src="https://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" original="https://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
	                  </small>
                </div>
            </div>
        </div>
    </div>
</footer>



    

    
</body>

</html>

