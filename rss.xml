<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.1">Jekyll</generator><link href="http://dourok.info/rss.xml" rel="self" type="application/atom+xml" /><link href="http://dourok.info/" rel="alternate" type="text/html" /><updated>2021-10-24T01:29:45+00:00</updated><id>http://dourok.info/rss.xml</id><title type="html">DouOâ€™s Blog</title><subtitle>æœ‰æ™‚æ¨¹æœƒå€’ä¸‹ï¼ŒæŸç‰‡å¤©é ƒåˆ»æ˜äº®
</subtitle><entry><title type="html">è°ˆè°ˆæ¯”ä¾‹ä»£è¡¨åˆ¶</title><link href="http://dourok.info/2020/11/12/proportional-representation/" rel="alternate" type="text/html" title="è°ˆè°ˆæ¯”ä¾‹ä»£è¡¨åˆ¶" /><published>2020-11-12T00:00:00+00:00</published><updated>2021-04-25T09:01:19+00:00</updated><id>http://dourok.info/2020/11/12/proportional-representation</id><content type="html" xml:base="http://dourok.info/2020/11/12/proportional-representation/">&lt;h1 id=&quot;ç¼˜ç”±&quot;&gt;ç¼˜ç”±&lt;/h1&gt;

&lt;p&gt;æœ€è¿‘å°è¯•äº†ä¸‹ Golangï¼Œç»ƒæ‰‹ Goroutines å®ç°äº†ä¸ªå¤šè¿æ¥çš„ http ä¸‹è½½å·¥å…· &lt;a href=&quot;https://github.com/douo/gotit&quot;&gt;gotit&lt;/a&gt;ã€‚æ‰€è°“çš„å¤šè¿æ¥ä¸‹è½½ï¼Œå°±æ˜¯å¯¹æ”¯æŒ &lt;code&gt;http-range&lt;/code&gt; çš„èµ„æºçš„åŒæ—¶å‘èµ·å¤šä¸ª http è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚è´Ÿè´£èµ„æºçš„ä¸åŒéƒ¨åˆ†ï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªèµ„æºçš„ä¸‹è½½ã€‚æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œä¸‹è½½ä¸­æ–­åæœ¬åœ°æ–‡ä»¶ä¼šç•™ä¸‹å¤šä¸ªä¸è¿ç»­å¤§å°ä¸ä¸€çš„æœªå†™å…¥æ•°æ®çš„ç©ºå—ã€‚è‹¥é‡æ–°æ¢å¤ä¸‹è½½ï¼Œå¦‚ä½•ä¸ºè¿™äº›ç©ºå—åˆ†é…è¿æ¥å‘¢ï¼Ÿè€ƒè™‘åˆ°è¿æ¥æ•°æ˜¯å¯é…ç½®çš„ï¼Œä¸åº”å‡å®šè¿æ¥æ•°ä¸ç©ºå—æ•°å­˜åœ¨ç›¸å…³æ€§ã€‚ä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„ç­–ç•¥æ˜¯:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å½“è¿æ¥æ•°å°äºç­‰äºç©ºå—æ•°ï¼Œç©ºå—æŒ‰ä»»æ„é¡ºåºæ’æˆé˜Ÿåˆ—ï¼Œæ¯ä¸ªç©ºé—²é“¾æ¥å‘é˜Ÿåˆ—è¯·æ±‚ç©ºå—ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚&lt;/li&gt;
  &lt;li&gt;å½“è¿æ¥æ•°å¤§äºç©ºå—æ•°ï¼Œä¸ºäº†è®©æ¯ä¸ªé“¾æ¥éƒ½å¾—åˆ°åˆ†é…ï¼Œç›´è§‰çš„æƒ³æ³•æ˜¯è¾ƒå¤§çš„ç©ºå—å ç”¨å¤šä¸€äº›è¿æ¥ï¼Œè®©æ¯ä¸ªè¿æ¥è´Ÿè´£çš„å¤§å°æ¥è¿‘ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œå­˜åœ¨ä¸¤ä¸ªç©ºå—å¤§å°åˆ†åˆ«æ˜¯&lt;code&gt;10M&lt;/code&gt;ã€&lt;code&gt;5M&lt;/code&gt;ï¼Œå¯åˆ†é…è¿æ¥æ•°ä¸º&lt;code&gt;3&lt;/code&gt;ï¼Œè¿æ¥æ•°å¤§äºç©ºå—æ•°ï¼Œæ ¹æ®ç­–ç•¥äºŒï¼ŒåŸºäºç©ºå—çš„å¤§å°æŒ‰æ¯”ä¾‹åˆ†é…è¿æ¥ï¼Œå¯ç®—å‡º&lt;code&gt;10M&lt;/code&gt;å¾—åˆ°&lt;code&gt;2&lt;/code&gt;ä¸ªè¿æ¥ï¼Œ&lt;code&gt;5M&lt;/code&gt;å¾—åˆ°&lt;code&gt;1&lt;/code&gt;ä¸ªè¿æ¥ã€‚è¿™é‡Œä¸è®¨è®ºè¿™æ ·çš„ç­–ç•¥æ˜¯å¦æœ‰æ•ˆï¼Œè€Œæ˜¯å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾è¿æ¥æ•°å˜ä¸º&lt;code&gt;4&lt;/code&gt;ï¼Œç»§ç»­æŒ‰æ¯”ä¾‹åˆ†é…ï¼Œ&lt;code&gt;10M&lt;/code&gt;å¾—åˆ°&lt;code&gt;2.67&lt;/code&gt;ä¸ªè¿æ¥&lt;code&gt;5M&lt;/code&gt;å¾—åˆ°&lt;code&gt;1.33&lt;/code&gt;ä¸ªï¼Œè¿æ¥æ•°æ˜¯&lt;strong&gt;æ•´æ•°&lt;/strong&gt;ï¼Œä¸€ä¸ªè¿æ¥å¯ä¸èƒ½æ’•æˆ 2ä¸ªï¼Œè‚¯å®šä¸èƒ½è¿™æ ·åˆ†é…ã€‚é‚£ä¹ˆå¤šå‡ºæ¥ä¸€ä¸ªè¿æ¥è¯¥ç»™&lt;code&gt;10M&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;5M&lt;/code&gt;ï¼Ÿå¦‚ä½•åˆ†é…è¿™éƒ¨åˆ†ä½™æ•°çœ‹ä¼¼ç®€å•å…¶å®å¹¶ä¸å®¹æ˜“ï¼Œéš¾åº¦åœ¨äºå¦‚ä½•æ‰¾å‡ºæœ€ä¼˜è§£ï¼Œç”šè‡³æ˜¯å¦‚ä½•å®šä¹‰æœ€ä¼˜è§£ã€‚è¿™é—®é¢˜å›°æ‰°äº†æˆ‘ç›¸å½“é•¿çš„æ—¶é—´ï¼Œç›´åˆ°ä¸æ¯”ä¾‹ä»£è¡¨åˆ¶è”ç³»èµ·æ¥ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä»€ä¹ˆæ˜¯æ¯”ä¾‹ä»£è¡¨åˆ¶&quot;&gt;ä»€ä¹ˆæ˜¯æ¯”ä¾‹ä»£è¡¨åˆ¶&lt;/h1&gt;

&lt;p&gt;ä½œä¸ºä¸€ä¸ªæ´»åˆ°ç°åœ¨è¿˜æ²¡è§è¿‡é€‰ç¥¨çš„&lt;strong&gt;â€œå…¬æ°‘â€&lt;/strong&gt;è¦ä¸æ˜¯æœ€è¿‘é€‰ä¸¾çš„æ–°é—»æœ‰ç‚¹å¯†é›†è¿˜çœŸå¾ˆéš¾è®¤è¯†è¿™ä¸ªé—®é¢˜å°±æ˜¯æ¯”ä¾‹ä»£è¡¨åˆ¶ä¸­çš„æ•´æ•°åˆ†é…é—®é¢˜ï¼ˆApportionmentï¼‰ã€‚æ‰€è°“æ¯”ä¾‹ä»£è¡¨åˆ¶ï¼Œå°±æ˜¯&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BB%A3%E8%AD%B0%E6%B0%91%E4%B8%BB%E5%88%B6&quot;&gt;ä»£è®®åˆ¶æ°‘ä¸»&lt;/a&gt;ä¸­çš„ä¸¤ç§ä¸»è¦é€‰ä¸¾æ–¹å¼ä¹‹ä¸€ã€‚å¦å¤–ä¸€ç§æ˜¯å¤šæ•°åˆ¶ï¼Œä¹Ÿå°±æ˜¯èµ¢è€…é€šåƒï¼Œç¥¨é«˜è€…èµ¢ï¼Œå¯çœ‹ä¸‹å°æ¹¾é«˜ä¸­çš„è¯¾ä»¶&lt;a href=&quot;https://youtu.be/4dJAyy9Usew&quot;&gt;é¸èˆ‰åˆ¶åº¦çš„é¡å‹&lt;/a&gt;äº†è§£ä¸‹ã€‚æ¯”ä¾‹ä»£è¡¨åˆ¶å¸¸ç”¨äºè®®ä¼šé€‰ä¸¾ä¸­ï¼Œä¸¾ä¸€ä¸ªç²—ç•¥çš„ä¾‹å­ï¼Œæ¯”å¦‚è®®ä¼šæœ‰ \(S\) ä¸ªå¸­ä½ï¼Œå„å…šæ´¾æŒ‰ç…§è·å¾—çš„ç¥¨æ•°å æ€»ç¥¨æ•°çš„æ¯”ä¾‹åˆ†é…è®®ä¼šçš„å¸­ä½ã€‚æŠŠå¸­ä½å½“ä½œè¿æ¥æ•°ï¼Œå¾—ç¥¨æ•°å½“ä½œç©ºå—å¤§å°ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªé—®é¢˜å°±æ˜¯ç­‰ä»·çš„äº†ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æœ€å¤§ä½™é¢æ³•&quot;&gt;æœ€å¤§ä½™é¢æ³•&lt;/h1&gt;

&lt;h2 id=&quot;é»‘å°”hareæ•°é¢&quot;&gt;é»‘å°”ï¼ˆHareï¼‰æ•°é¢&lt;/h2&gt;

&lt;p&gt;19ä¸–çºªä¸­æœŸï¼Œä¸€ä½è‹±å›½çš„å¤§å¾‹å¸ˆ&lt;a href=&quot;https://en.wikipedia.org/wiki/Thomas_Hare_(political_scientist)&quot;&gt;é»‘å°”&lt;/a&gt;ï¼Œæå‡ºä¸€ç§æ–¹æ³•ã€‚å‡å®šæ€»æŠ•ç¥¨æ•°ä¸º \(P\)ï¼Œæ€»å¸­ä½ä¸º \(S\)ã€‚é‚£å¯ä»¥ç®€å•å¾—å‡ºè·å¾—ä¸€å¸­æ‰€éœ€è¦çš„ç¥¨æ•°ï¼Œåœ¨è¿™é‡Œç§°ä¸º&lt;strong&gt;æ•°é¢&lt;/strong&gt;ï¼ˆQuotaï¼‰\(Q\)ã€‚&lt;/p&gt;

\[Q=\frac{P}{S}\]

&lt;p&gt;è®¡ç¥¨åˆ†ä¸ºä¸¤è½®ï¼Œç¬¬ä¸€è½®æ˜¯å„ä¸ªå…šæ´¾æ ¹æ®&lt;strong&gt;æ•°é¢&lt;/strong&gt;å’Œå¾—ç¥¨æ•°å–å°½å¯èƒ½çš„å¸­ä½ï¼Œä¹Ÿå°±æ˜¯å¾—ç¥¨æ•°é™¤ä»¥&lt;strong&gt;æ•°é¢&lt;/strong&gt;åå–&lt;strong&gt;æ•´æ•°éƒ¨åˆ†&lt;/strong&gt;ï¼Œæ¯”å¦‚å…šæ´¾ \(i\) ç¬¬ä¸€è½®çš„å¾—ç¥¨æ•°ï¼š&lt;/p&gt;

\[n_i=\Bigl\lfloor{\frac{P_i}{Q}}\Bigr\rfloor\]

&lt;p&gt;å…šæ´¾ \(i\) å¾—ç¥¨æ•°çš„ä½™æ•°ä¹Ÿå¯ä»¥è¢«è®¡ç®—å‡ºæ¥ï¼š&lt;/p&gt;

\[R_i=P_i-{n_i}Q\]

&lt;p&gt;ç¬¬äºŒè½®å°±æ˜¯ï¼Œæ ¹æ®å„ä¸ªå…šæ´¾å¾—ç¥¨æ•°ä½™æ•°çš„å¤§å°ï¼ŒæŒ‰ä»å¤§åˆ°å°é¡ºåºåˆ†é…å‰©ä½™å¸­ä½ï¼Œç›´åˆ°æ‰€æœ‰å¸­ä½åˆ†é…å®Œæˆã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿå«æœ€å¤§ä½™é¢æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æœ€è¿‘è¢«å–æ¶ˆçš„é¦™æ¸¯ç«‹æ³•ä¼šé€‰ä¸¾å…¶ä¸­çš„åœ°åŒºç›´é€‰ï¼Œå°±æ˜¯ä»¥é»‘å°”æ•°é¢çš„æ¯”ä¾‹ä»£è¡¨åˆ¶ã€‚çœ‹ä¸€ä¸‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œä»¥&lt;a href=&quot;https://zh.wikipedia.org/wiki/2012%E5%B9%B4%E9%A6%99%E6%B8%AF%E7%AB%8B%E6%B3%95%E6%9C%83%E9%81%B8%E8%88%89%E7%B5%90%E6%9E%9C&quot;&gt;2012å¹´ç«‹æ³•ä¼šé€‰ä¸¾é¦™æ¸¯å²›é€‰åŒºçš„ç»“æœ&lt;/a&gt;ä¸ºä¾‹.&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot; id=&quot;table1&quot;&gt; è¡¨ 1&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¼–å·&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;æ”¿å…š&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¥¨æ•°&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬ä¸€è½®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ä½™é¢&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬äºŒè½®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;æ€»å¸­ä½&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ°‘ä¸»å…š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;40,558&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;40,558&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;äººæ°‘åŠ›é‡&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;18,667&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;18,667&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ°‘å»ºè”&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;33,901&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;33,901&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å·¥å…š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;31,523&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;31,523&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ–°æ°‘å…š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;30,289&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;26,037&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;9&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å·¥è”ä¼š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;27,336&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;27,336&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å…¬æ°‘å…š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;70,475&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;23,222&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;12&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ°‘å»ºè”&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;36,517&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;36,517&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;13&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;è‡ªç”±å…š&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;17,686&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;17,686&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;2012å¹´é¦™æ¸¯å²›é€‰åŒºæ€»å¸­ä½ \(S = 7\)ï¼Œæ€»æœ‰æ•ˆé€‰ç¥¨\(P = 330766\)ï¼Œæ ¹æ®é»‘å°”é…é¢å…¬å¼å¯å¾— \(Q = P/S = 47252.3\) ï¼Œç¯‡å¹…æ‰€é™ï¼Œè¡¨ä¸Šçœç•¥äº†å¾—ç¥¨è¾ƒä½çš„åå•ã€‚è¡¨ä¸Šå¾—ç¥¨æ•°å¤§äº Q çš„åªæœ‰å…¬æ°‘å…šï¼Œæ‰€æœ‰ç¬¬ä¸€è½®å¾—ç¥¨çš„æ”¿å…šåªæœ‰å…¬æ°‘å…š(Civic)ï¼š&lt;/p&gt;

&lt;p&gt;\(S_{Civic} =\Bigl\lfloor{P_{Civic}/Q}\Bigr\rfloor = 1\)&lt;br /&gt;
\(R_{Civic} = P_{Civic} - S_{Civic}*Q = 23165.7\)&lt;/p&gt;

&lt;p&gt;è®¡ç®—ä½™æ•°åç»§ç»­ç¬¬äºŒè½®åˆ†é…ã€‚ç¬¬äºŒè½®å¸­ä½ä½™ä¸‹ 6 å¸­ï¼Œæ‰€ä»¥å†é€‰ä½™é¢æ•°æœ€å¤§çš„å…­ä¸ªæ”¿å…šï¼Œåˆ†åˆ«æ˜¯æ°‘ä¸»å…šã€æ°‘å»ºè”ã€å·¥å…šã€æ–°æ°‘å…šã€å·¥è”ä¼šã€æ°‘å»ºè”ã€‚è‡³æ­¤ 7 ä¸ªå¸­ä½åˆ†é…å®Œæ¯•ã€‚å…¨éƒ¨è®¡ç®—ç»“æœå¯è§&lt;a href=&quot;pr-tool.html?seats=7&amp;amp;votes=2980,40558,16900,18667,70418,422,31523,30289,27336,70475,343,17686,3169&amp;amp;method=hare&amp;amp;calc&quot;&gt;æ­¤&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯è§è¿™ç§æ–¹æ³•æ˜¯ç®€å•ç›´è§‚ä¸”å®¹æ˜“ç†è§£ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºè¿™ç§æ–¹æ³•æ˜¯ç¾å›½å»ºå›½ä¹‹çˆ¶&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%BA%9A%E5%8E%86%E5%B1%B1%E5%A4%A7%C2%B7%E6%B1%89%E5%AF%86%E5%B0%94%E9%A1%BF&quot;&gt;æ±‰å¯†å°”é¡¿&lt;/a&gt;é¦–å…ˆæå‡ºçš„ï¼Œæ‰€ä»¥åœ¨ç¾å›½ä¹Ÿæœ‰å«æ±‰å¯†å°”é¡¿æ³•ï¼ˆHamiltonâ€™s Method of Apportionmentï¼‰ã€‚ç„¶è€Œè¿™ç§çœ‹ä¼¼ç®€å•ç›´è§‚ä¼¼ä¹åˆå…¬å¹³çš„åˆ†é…æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´è§‰è®¤ä¸ºçš„é‚£ä¹ˆå…¬å¹³ï¼Œè¿™ä¸ªåé¢å†è¯´ã€‚&lt;/p&gt;

&lt;p&gt;é»‘å°”æ•°é¢å¹¶ä¸æ˜¯æœ€å¤§ä½™é¢æ³•çš„å”¯ä¸€æ–¹æ³•ï¼Œä¸è¿‡è¿™äº›æ–¹æ³•çš„åŒºåˆ«æ˜¯åœ¨&lt;strong&gt;æ•°é¢&lt;/strong&gt;çš„è®¡ç®—ï¼Œè€Œç¬¬äºŒè½®ä½™æ•°åˆ†é…çš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ï¼Œæ‰€æœ‰è¿™ä¸€ç±»çš„åˆ†é…æ–¹æ³•éƒ½ç»Ÿç§°ä¸ºæœ€å¤§ä½™é¢æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç‰¹ç½—æ™®droopæ•°é¢&quot;&gt;ç‰¹ç½—æ™®ï¼ˆDroopï¼‰æ•°é¢&lt;/h2&gt;

&lt;p&gt;åŒæ ·æ˜¯19ä¸–çºªä¸­æœŸï¼ŒåŒæ ·æ˜¯è‹±å›½å¤§å¾‹å¸ˆ&lt;a href=&quot;https://en.wikipedia.org/wiki/Henry_Richmond_Droop&quot;&gt;ç‰¹ç½—æ™®&lt;/a&gt;ï¼Œè®¤ä¸ºè·å–ä¸€ä¸ªå¸­ä½çš„ç¥¨æ•°ä¹Ÿå°±æ˜¯æ•°é¢ï¼Œå¹¶ä¸æ˜¯å¦‚é»‘å°”æ‰€è¯´çš„ï¼Œè€Œæ˜¯ï¼š&lt;/p&gt;

\[Q=\frac{P}{S+1}\]

&lt;p&gt;ä»–æ˜¯çš„ç†ç”±å¦‚ä¸‹ï¼Œç«äº‰ä¸¤ä¸ªå¸­ä½çš„æƒ…å†µï¼Œå¾—ç¥¨æ•°è¶…è¿‡ \(1/3\) çš„å¿…å°†èµ¢å¾—ä¸€å¸­ï¼Œå¦‚æœæ˜¯ä¸‰ä¸ªå¸­ä½ï¼Œé‚£ä¹ˆå¾—ç¥¨æ•°è¶…è¿‡ \(1/4\) å°†èµ¢å¾—ä¸€å¸­ã€‚é€šè¿‡å½’çº³æ³•å¯å¾—å‡ºï¼Œäº‰å¤º \(S\) ä¸ªå¸­ä½çš„é€‰ä¸¾ä¸­ï¼Œå¾—ç¥¨æ•°è¶…è¿‡ \(P/(S+1)\)çš„å…šæ´¾éƒ½å°†èµ¢å¾—ä¸€å¸­ã€‚æ‰€ä»¥ç‰¹ç½—æ™®å¯¹æ•°é¢ \(Q\)çš„å®šä½å°±æ˜¯ï¼Œè·å¾—ä¸€å¸­æ‰€éœ€è¦çš„æœ€ä½ç¥¨æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œç›¸æ¯”é»‘å°”æ•°é¢ï¼Œç‰¹ç½—æ™®æ•°é¢çš„åˆ†æ¯å˜å¤§äº†ï¼Œæ•°é¢å°±å˜å°äº†ï¼Œä¹Ÿå°±æ˜¯è¯´è·å–ä¸€ä¸ªå¸­ä½çš„ä»£ä»·å˜ä½äº†ã€‚ä¼¼ä¹å¯¹å°å…šæ´¾æ›´æœ‰åˆ©äº†ã€‚ç»“åˆå¦å¤–ä¸€ç§æ•°é¢æ›´ä½çš„ï¼Œè®¾è®¡æœ¬æ„æ˜¯ä¸ºäº†åè¢’å°å…šæ´¾çš„&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%9B%A0%E4%BD%A9%E9%87%8C%E4%BA%9E%E5%88%A9%E6%95%B8%E9%A1%8D&quot;&gt;å› ä½©é‡Œäºšåˆ©(Imperiali)æ•°é¢&lt;/a&gt;&lt;/p&gt;

\[Q=\frac{P}{S+2}\]

&lt;p&gt;æ¥çœ‹çœ‹æ˜¯å¦å¦‚æ­¤ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;æ”¿å…š&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¾—ç¥¨æ•°&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;é»‘å°”&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç‰¹ç½—æ™®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å› ä½©é‡Œäºšåˆ©&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;30&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;64&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;64&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;65&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;B&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;12&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;25&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;26&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;25&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;11&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è®¡ç®—å¯çœ‹&lt;a href=&quot;pr-tool.html?main=0&amp;amp;seats=100&amp;amp;votes=30,12,5&amp;amp;method=hare&amp;amp;calc&quot;&gt;æ­¤&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é‡‡ç”¨ç‰¹ç½—æ™®æ³•æˆ–å› ä½©é‡Œäºšåˆ©æ³•å,å¾—ç¥¨æœ€å°‘çš„ C ä¸€å¸­åè€Œåˆ†åˆ«è¢« B å’Œ A æŠ¢å»ã€‚å®è·µä¸­ä¹Ÿå‘ç°æ›´å°çš„æ•°é¢åè€Œæ›´æœ‰åˆ©äºå¾—ç¥¨å¤šçš„å¤§å…šæ´¾ï¼Œè¿™æ˜¯å› ä¸ºæ›´å°çš„æ•°é¢ï¼Œå¯¼è‡´ç¬¬äºŒè½®å‰©ä¸‹çš„å¸­ä½å˜å°‘äº†ï¼Œå°å…šæ´¾ä¸»è¦é ç¬¬äºŒè½®æ¥å–å¾—å¸­ä½ï¼Œå¸­ä½å˜å°‘ç›¸åº”çš„è·å¾—å¸­ä½çš„æ¦‚ç‡ä¹Ÿå°±é™ä½ã€‚&lt;/p&gt;

&lt;h1 id=&quot;é—®é¢˜&quot;&gt;é—®é¢˜&lt;/h1&gt;

&lt;p&gt;ä¸Šé¢æåˆ°æœ€å¤§ä½™é¢æ³•å¹¶æ²¡æœ‰ç›´è§‰ä¸Šå…¬å¹³ï¼Œå…¶ä¸€ä¾¿æ˜¯ä¸åŒæ•°é¢çš„å¯ä»¥å¾®è°ƒå¸­ä½çš„åˆ†é…ã€‚å…¶äºŒå°±æ˜¯ä¼šå‡ºç°éå¸¸åç›´è§‰çš„ä¸å…¬å¹³ç»“æœã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ‚–è®º&quot;&gt;æ‚–è®º&lt;/h2&gt;

&lt;p&gt;ç¾å›½ä¸ºå„å·åˆ†é…ä¼—è®®é™¢å¸­ä½çš„æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨æ¯”ä¾‹ä»£è¡¨åˆ¶åˆ†é…ã€‚å·ç›¸å½“äºå€™é€‰åå•ï¼Œå·çš„äººå£å°±ç›¸å½“äºé€‰ç¥¨ã€‚è™½ç„¶ç°è¡Œçš„å®ªæ³•è§„å®šä¼—è®®é™¢çš„å¸­ä½å›ºå®šä¸º 435 å¸­ï¼Œä½† 20 ä¸–çºªå‰ä¼—è®®é™¢çš„å¸­ä½å¹¶ä¸æ˜¯å›ºå®š 435 å¸­è€Œæ˜¯éšäººå£çš„å¢é•¿è€Œå¢åŠ ã€‚1880 çš„äººå£æ™®æŸ¥å‘ç°ï¼Œæ€»äººå£ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¼—è®®é™¢æœ‰ 299 å¸­ä½æ—¶ï¼Œé˜¿æ‹‰å·´é©¬å·è·å¾— 8 ä¸ªå¸­ä½ï¼Œå½“æ€»å¸­ä½å¢åŠ åˆ° 300 æ—¶ï¼Œé˜¿æ‹‰å·´é©¬å·åè€Œå¤±å»ä¸€å¸­å‰©ä¸‹ 7 å¸­ã€‚åˆ¶é€ ä¸€ä¸ªä¾‹å­å¾ˆç®€å•ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;æ”¿å…š&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¾—ç¥¨æ•°&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;4 å¸­&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;5 å¸­&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;B&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;æŠŠåœºæ™¯æ¢æˆè®®ä¼šçš„ä¸å…¬å¹³å°±éå¸¸æ˜¾è€Œæ˜“è§äº†ï¼Œ&lt;strong&gt;è®®ä¼šæ€»å¸­ä½å¢åŠ ä¸€å¸­ï¼ŒæŠ•ç¥¨ä¿æŒä¸å˜çš„æƒ…å†µä¸‹æŸä¸ªæ”¿å…šå´ä¼šå› æ­¤å¤±å»ä¸€å¸­ã€‚&lt;/strong&gt;è¿™ç§ç°è±¡ä¾¿ç§°ä¸º&lt;strong&gt;é˜¿æ‹‰å·´é©¬æ‚–è®ºï¼ˆAlabama Paradoxï¼‰&lt;/strong&gt;ã€‚è¿™å°±æ˜¯æœ€å¤§ä½™é¢æ³•ä¸å¯é¿å…çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;é˜¿æ‹‰å·´é©¬æ‚–è®ºï¼Œåªå­˜åœ¨ç†è®ºè®¡ç®—ä¸­ï¼Œç°å®ä¸­å¹¶æœªæœªå‘ç”Ÿï¼Œå¹¶ä¸æ˜¯é˜¿æ‹‰å·´é©¬æ‚–è®ºä¸æ˜“å‘ç”Ÿï¼Œå®é™…ä¸Šé¢„æœŸæ¯ 8 æ¬¡åˆ†é…å°±ä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œè€Œç°å®æ²¡å‘ç”ŸåŸå› æ˜¯ä¼—è®®é™¢ä¸å†é‡‡ç”¨æœ€å¤§ä½™é¢æ³•åˆ†é…å¸­ä½ï¼Œå®é™…ä¸Šè¿˜æœ‰ä¸ªå‰æå°±æ˜¯è¦ç°å®ä¸­ä¸¤æ¬¡æŠ•ç¥¨çš„æ¯”ä¾‹ä¿æŒä¸å˜è¿™æ¦‚ç‡ä¹Ÿæ˜¯å‡ ä¹ä¸å¯èƒ½ğŸ˜œã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªæ‚–è®ºå°±æ›¾åœ¨ç°å®å‡ºç°ï¼Œ1900 å¹´å¼—å‰å°¼äºšå¾—åˆ° 10 å¸­ç¼…å› å·å¾—åˆ° 3 å¸­ã€‚è€Œ 1901 å¹´ï¼Œè¿™ä¸€å¹´å°½ç®¡å½“å¹´å¼—å‰å°¼äºšçš„äººå£å¢åŠ é€Ÿåº¦å¤§äºç¼…å› å·ï¼Œåè€Œè¢«ç¼…å› å·æŠ¢å»ä¸€å¸­ã€‚å¼—å‰å°¼äºš 9 å¸­ç¼…å› å· 4 å¸­ï¼Œè§ï¼š&lt;a href=&quot;https://en.wikipedia.org/wiki/1901_United_States_House_of_Representatives_elections&quot;&gt;1901å¹´ç¾å›½ä¼—è®®é™¢é€‰ä¸¾-ç»´åŸºç™¾ç§‘&lt;/a&gt;ã€‚è¿™å°±æ˜¯æ‰€è°“çš„&lt;strong&gt;äººå£æ‚–è®ºï¼ˆPopulation paradoxï¼‰&lt;/strong&gt;ï¼Œä¸¤ä¸ªå·çš„äººå£å‘ç”Ÿå¢é•¿ï¼Œå¢é•¿ç‡å¿«å·åè€Œè¾“ç»™å¢é•¿ç‡æ…¢çš„å·ä¸€å¸­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é…ç¥¨&quot;&gt;é…ç¥¨&lt;/h2&gt;

&lt;p&gt;å›å¤´é‡æ–°çœ‹ä¸‹2012å¹´ç«‹æ³•ä¼šåŒºåŸŸç›´é€‰é¦™æ¸¯å²›åŒºçš„ç»“æœï¼ˆè§&lt;a href=&quot;#table1&quot;&gt;è¡¨ 1&lt;/a&gt;ï¼‰ï¼Œå¯ä»¥å‘ç°æ°‘å»ºè”ï¼ˆDBAï¼‰å‡ºç°äº†ä¸¤æ¬¡ã€‚ä¸ºä»€ä¹ˆè¦åˆ†ä¸¤ä¸ªåå•å‚é€‰å‘¢ï¼Œå‡è®¾ä¸€ä¸‹å¦‚æœåˆå¹¶ä¸ºä¸€ä¸ªåå•ä¼šæ€ä¹ˆæ ·ï¼Ÿæ¼”ç®—&lt;a href=&quot;pr-tool.html?seats=7&amp;amp;votes=2980,40558,16900,18667,70418,422,31523,30289,27336,70475,343,17686,3169&amp;amp;method=hare&amp;amp;calc&quot;&gt;ä¸€ä¸‹&lt;/a&gt;ä¾¿å¯ä»¥å‘ç°ï¼Œæœ€ç»ˆæ°‘å»ºè”åªèƒ½å¾— 1 ä¸ªå¸­ä½ï¼Œè€Œæ°‘ä¸»æ´¾çš„å…¬æ°‘å…šåèƒ½è·å¾— 2 ç¥¨ã€‚&lt;/p&gt;

&lt;p&gt;è€Œæ°‘å»ºè”æœ€ç»ˆé€‰æ‹©äº†åˆ†æ‹†åå•ï¼Œé¿å…äº†è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œè¿™ç§è¡Œä¸ºå°±æ˜¯&lt;strong&gt;é…ç¥¨&lt;/strong&gt;ï¼Œè€Œä¸”æ˜¯ç›¸å½“æˆåŠŸçš„é…ç¥¨ä¾‹å­ã€‚ä½†é…ç¥¨ä¹Ÿéœ€è¦å¯¹é€‰ç¥¨åˆ†é…çš„é¢„æµ‹ç›¸å½“æœ‰ä¿¡å¿ƒæ‰èƒ½æ‰§è¡Œï¼Œåˆ‡å¿Œä¸è‡ªé‡åŠ›ï¼Œå†å²ä¸Šé¦™æ¸¯ç«‹æ³•ä¼šã€å°æ¹¾ç«‹æ³•å§”é…ç¥¨å¤±è´¥çš„ä¾‹å­ä¹Ÿä¸å°‘è§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä½™æ•°ç›¸ç­‰&quot;&gt;ä½™æ•°ç›¸ç­‰&lt;/h2&gt;

&lt;p&gt;æœ€å¤§ä½™é¢æ³•ï¼Œå‡ºç°ä½™æ•°ç›¸ç­‰çš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿæ„é€ è¿™ä¸ªæƒ…å†µå¹¶ä¸éš¾ï¼Œå‡è®¾æœ‰ n ä¸ªå€™é€‰äººç«é€‰ S ä¸ªå¸­ä½ï¼Œ\(V_i\) ä¸ºå€™é€‰äºº i çš„ç¥¨æ•°ï¼Œ\(V_i=a_i*Q+C\) ï¼ŒQ ä¸ºé»‘å°”æ•°é¢ï¼Œå¯å¾—å‡º \(S=\frac{nC}{Q}+\sum\limits_{i=1}^{n}a_i\)ï¼Œæ„é€ ä»»æ„ aã€nã€Cã€Q æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¾¿å¯ï¼š&lt;/p&gt;

\[\begin{align*}
  &amp;amp; C &amp;lt; Q \\
  &amp;amp; \frac{nC}{Q}\in{\mathbb{Z}} \\
  &amp;amp; a_i\in{\mathbb{Z}}  \\
\end{align*}\]

&lt;p&gt;è§æ­¤&lt;a href=&quot;pr-tool.html?seats=34&amp;amp;votes=18,33,48,63,93&amp;amp;method=hare&amp;amp;calc&quot;&gt;ä¾‹å­&lt;/a&gt;ï¼Œå‡ºç°è¿™ç§æƒ…å†µåªèƒ½æ›´æ¢æ•°é¢ç®—æ³•ï¼Œæˆ–ä¸ç”¨æœ€å¤§ä½™é¢æ³•äº†ã€‚å½“ç„¶ç°å®ä¸­æ˜¯å‡ ä¹ä¸å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µçš„ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æœ€é«˜å‡æ•°æ³•&quot;&gt;æœ€é«˜å‡æ•°æ³•&lt;/h1&gt;

&lt;p&gt;å¦å¤–ä¸€ç§ä¸æœ€å¤§ä½™é¢æ³•ç›¸å¯¹äºçš„å°±æ˜¯æœ€é«˜å‡æ•°æ³•ï¼Œè€Œä¸”æœ€é«˜å‡æ•°æ³•å·²è¢«è¯æ˜èƒ½é¿å…æœ€å¤§ä½™é¢æ³•é‡åˆ°çš„æ‚–è®ºã€‚æœ€é«˜å‡æ•°æ³•å–å¾—å¸­ä½çš„æ–¹å¼ç›¸å½“äºä¾æ¬¡å¯¹æ¯ä¸ªå¸­ä½è¿›è¡Œç«æ ‡ï¼Œåªæ˜¯ä»·æ ¼ä¸æ˜¯ç»å¯¹è€Œæ˜¯ç›¸å¯¹ï¼Œè€Œä¸”ä»·æ ¼ä¾å–å¾—çš„å¸­ä½æ•°å¢åŠ è€Œé€’å‡ã€‚ä»¥ä¸‹è¡¨ä¸ºä¾‹ï¼Œä¸‰ä¸ªæ”¿å…šç«é€‰ 4 ä¸ªå¸­ä½ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;æ”¿å…š&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¾—ç¥¨æ•°&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬ä¸€è½®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬äºŒè½®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬ä¸‰è½®&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç¬¬å››è½®&lt;/th&gt;
      &lt;th&gt;æ€»å¸­ä½&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;80&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;80&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;40&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;26.67&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;26.67&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;B&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;32&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;32&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;32&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;strong&gt;32&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;16&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;14&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç¬¬ä¸€è½® A ç¥¨æ•°æœ€é«˜ï¼ŒA å¾— 1 å¸­ï¼ŒA çš„ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_A}{2}\)ï¼Œç¬¬äºŒè½®è¿˜æ˜¯ A æœ€é«˜ï¼ŒA è·å¾—ç¬¬äºŒå¸­ï¼Œæ‰€ä»¥ A ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_A}{3}\)ï¼Œç¬¬ä¸‰è½® B ç¥¨æ•°æœ€é«˜ï¼ŒB è·å¾—ç¬¬ä¸€å¸­ï¼ŒB ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_B}{2}\)ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å¸­ä½åˆ†é…å®Œæˆã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œè·å¾—ç¬¬ n å¸­çš„å‰©ä½™ç¥¨æ•°ä¸º \(\frac{V}{n+1}\)ã€‚æ¢ä¸€å¥è¯è¯´ä¹Ÿå°±æ˜¯ï¼ŒA èƒ½è·å¾— n ä¸ªå¸­ä½ï¼Œæ˜¯å› ä¸ºå…¶ç¥¨æ•°å¹³å‡ n åˆ†çš„å‡æ•°æœ€å¤§ï¼Œæ‰€ä»¥å«æœ€é«˜å‡æ•°æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ¥è¿‘å®é™…çš„&lt;a href=&quot;pr-tool.html?main=1&amp;amp;seats=541&amp;amp;votes=136770988,134058815,29446445,19760114,67416861&amp;amp;method=dHondt&amp;amp;calc&quot;&gt;ä¾‹å­&lt;/a&gt;ï¼Œæ•°æ®æ¥è‡ª 2004 å¹´çš„å°åº¦å¤§é€‰ã€‚&lt;/p&gt;

&lt;p&gt;æœ€é«˜å‡æ•°æ³•ä¹Ÿå«é™¤æ•°æ³•ï¼Œæ”¿å…šè·å¾—ç¬¬ n å¸­çš„å‰©ä½™ç¥¨æ•°ç­‰äºå¾—ç¥¨æ•°é™¤ä»¥ä¸€ä¸ªé™¤æ•°åºåˆ—çš„ç¬¬ n é¡¹ï¼Œè¿™ä¸ªåºåˆ—å¯ä»¥ä¸€èˆ¬åŒ–ä¸º \(f(n)\)ï¼Œ\(f(n)=n+1\) æ—¶ï¼Œç§°ä¸ºæ´ªå¾·æ³•(dâ€™Hondt)ã€‚å…¶ä»–ä¸åŒçš„æœ€é«˜å‡æ•°æ³•ï¼Œä¹Ÿå°±æ˜¯ \(f(n)\) çš„å–å€¼ä¸åŒè€Œå·²ã€‚&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dHondt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// æ´ªå¾·æ³•&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sLague&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è–æ‹‰å¤æ³•ï¼ˆSainte-LaguÃ«ï¼‰&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imperiali&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å› ä½©é‡Œäºšåˆ©ï¼ˆImperialiï¼‰&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;modSLague&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ”¹è‰¯åœ£æ‹‰å¤æ³•&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸åŒçš„æ–¹æ³•ï¼Œæœ€å¤§çš„å½±å“æ˜¯\(f(n)\)çš„å¢é•¿ç‡ï¼Œå¢é•¿ç‡è¶Šå¿«è¶Šæœ‰åˆ©äºå°å…šæ´¾ï¼Œç›¸ååˆ™çš„æœ‰åˆ©å¤§å…šæ´¾ã€‚å¤§å¤šæ–¹æ³•éƒ½æ˜¯ä¸€æ¬¡å‡½æ•°ï¼Œæ‰€ä»¥ç³»æ•°è¶Šå¤§å°±è¶Šæœ‰åˆ©äºå°å…šæ´¾ã€‚é™¤äº†&lt;a href=&quot;https://en.wikipedia.org/wiki/Huntington%E2%80%93Hill_method&quot;&gt;äº¨å»·é¡¿-å¸Œå°”æ³•ï¼ˆHuntingtonâ€“Hill methodï¼‰&lt;/a&gt;ï¼š&lt;/p&gt;

\[f(n)=\sqrt{n(n+1)}\]

&lt;p&gt;Huntingtonâ€“Hill çš„å¢é•¿ç‡å…¶å®æ˜¯éå¸¸æ¥è¿‘äº dâ€™Hondt çš„ã€‚å®ƒä¹Ÿæ˜¯ç¾å›½ç°è¡Œä¸ºå„å·åˆ†é…ä¼—è®®é™¢å¸­ä½æ‰€ç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ•°é¢æ³•åˆ™&quot;&gt;æ•°é¢æ³•åˆ™&lt;/h1&gt;

&lt;p&gt;æœ€é«˜å‡æ•°æ³•å¯ä»¥é¿å…é˜¿æ‹‰å·´é©¬æ‚–è®ºå’Œäººå£æ‚–è®ºï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯ç°è¡Œæ¯”ä¾‹ä»£è¡¨åˆ¶é€‰ä¸¾ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œä½†å®ƒä¹Ÿä¸æ˜¯å®Œç¾çš„ã€‚é‡æ–°å›è¿‡å¤´æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œæ€»æŠ•ç¥¨æ•°ä¸º \(P\)ï¼Œæ€»å¸­ä½ä¸º \(S\)ã€‚æ”¿å…š i çš„å¾—ç¥¨ä¸º \(V_i\)ã€‚åœ¨ä¸€ä¸ªç†æƒ³çš„ä¸–ç•Œé‡Œæ”¿å…š i çš„å¸­ä½ä¸ºï¼š&lt;/p&gt;

\[A_i=S\frac{V_i}{P}\]

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ç»å¤§å¤šæ•°æƒ…å†µä¸‹ \(A_i\) æ˜¯ä¸ªå°æ•°ï¼Œè¿™ä¸ªæ•°ç§°ä¸º i çš„&lt;strong&gt;è‡ªç„¶æ•°é¢ï¼ˆnature quotaï¼‰&lt;/strong&gt;ã€‚åº”ç”¨åˆ†é…æ–¹æ³•çš„ç›®çš„å°±æ˜¯å¯¹è‡ªç„¶æ•°é¢è¿›è¡Œå–æ•´ï¼Œè€Œå–æ•´æ— å¤–ä¹æ˜¯å‘ä¸‹å–æ•´æˆ–å‘ä¸Šå–æ•´ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå°±æ˜¯æ•°é¢æ³•åˆ™çš„å®šä¹‰ï¼Œ&lt;strong&gt;åˆ†é…ç»™ä¸€æ–¹çš„å¸­ä½æ•°é‡åº”è¯¥ä¸ºå…¶è‡ªç„¶æ•°é¢çš„å‘ä¸Šå–æ•´æ•´æ•°æˆ–å‘ä¸‹å–æ•´æ•´æ•°ã€‚&lt;/strong&gt;èƒ½ç§°ä¸ºæ³•åˆ™æƒ³å¿…æ˜¯ååˆ†é‡è¦ï¼Œä½†çœ‹ä¼¼å®Œç¾çš„æœ€é«˜å‡æ•°æ³•å°±è¿åäº†è¿™ä¸ªæ³•åˆ™ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ç»“è¯­&quot;&gt;ç»“è¯­&lt;/h1&gt;

&lt;p&gt;å®é™…ä¸Š Balinski &amp;amp; Young å·²ç»è¯æ˜äº†ä¸è¿åæ•°é¢æ³•åˆ™åŒæ—¶åˆèƒ½é¿å…æ‚–è®ºçš„åˆ†é…æ–¹æ³•æ˜¯ä¸å¯èƒ½çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ•´æ•°åˆ†æ‘Šå®é™…ä¸Šæ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å…¬å¹³è§£æ³•ã€‚é‚£ä¹ˆå›æœ€å¼€å§‹é‡åˆ°çš„é—®é¢˜ï¼Œå¯»æ‰¾åˆ†é…è¿æ¥çš„æœ€ä¼˜è§£ï¼Œå¦‚æ­¤ç»å°½è„‘æ±ä¹Ÿå°±æƒ…æœ‰å¯åŸäº†ã€‚ä¸è¿‡å…¬å¹³ä¸å¯èƒ½ï¼Œæœ€ä¼˜è§£å´æ˜¯å¯èƒ½çš„ã€‚åªéœ€å®šä¹‰ä»€ä¹ˆæ˜¯æœ€ä¼˜ï¼Œæ¯”å¦‚è¯´å®é™…å¸­æ•°ä¸è‡ªç„¶æ•°é¢ä¹‹é—´çš„è·ç¦»æœ€å°ä¾¿æ˜¯æœ€ä¼˜ï¼ˆå¯è§å‚è€ƒèµ„æ–™1ã€2ï¼‰ï¼Œå› ä¸ºå¸­ä½æ˜¯æ•´æ•°æœç´¢ç©ºé—´æœ‰é™ï¼Œåªéœ€éå†æ‰€æœ‰å¯èƒ½ä¾¿å¯ä»¥æ‰¾åˆ°æœ€ä¼˜ï¼Œå¦‚æœæ»¡è¶³æ•°é¢æ³•åˆ™é‚£ä¹ˆæœç´¢çš„ç©ºé—´ä¾¿æ›´å°äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ­£å› ä¸ºç»å¯¹å…¬å¹³çš„ä¸å¯èƒ½ï¼Œå›½å®¶æ”¿ç­–çš„åˆ¶å®šè€…å°±å¯ä»¥é€šè¿‡è°ƒæ•´è¿™äº›æ–¹æ³•è®©æ”¿ç­–åå‘å¤§å¤šæ•°æˆ–è€…å°‘æ•°ï¼Œæ¯”å¦‚è¯´åŠ å¤§æœ€å¤§ä½™é¢æ³•çš„æ•°é¢ï¼Œæˆ–è€…æœ€é«˜å‡æ•°æ³•é€‰æ‹©å¢é•¿ç‡è¾ƒå¿«çš„é™¤æ•°åºåˆ—ï¼Œæ¥è®©å°‘æ•°æ´¾çš„å¾—åˆ°å‘å£°æœºä¼šã€‚å½“ç„¶é€‰æ‹©ç›¸åçš„ç­–ç•¥ï¼Œä¹Ÿèƒ½è¯´æˆæ˜¯é˜»æ­¢æç«¯ä¸»ä¹‰çš„å‘å±•ã€‚å¥½åƒæ”¿åºœæ€ä¹ˆåšéƒ½æ˜¯å¯¹çš„ï¼Œä¸è¿‡é˜»æ­¢æç«¯ä¸»ä¹‰è¿™æ–¹é¢è¿˜çœŸæœ‰åä¾‹ï¼Œé­ç›å…±å’Œå›½çš„å¸å›½è®®ä¼šè®©çº³ç²¹å´›èµ·å°±æ˜¯ä¸€ä¸ªé²œæ˜çš„&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E9%AD%8F%E7%91%AA%E5%85%B1%E5%92%8C%E5%9C%8B#%E5%88%B6%E5%BA%A6%E6%BC%8F%E6%B4%9E&quot;&gt;åä¾‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¾‹å­ä¸­æ‰€ç”¨çš„æœ€å¤§ä½™é¢æ³•å®ç°è§ï¼š&lt;a href=&quot;./largest_remainder.js&quot;&gt;largest_remainder.js&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;ä¾‹å­ä¸­æ‰€ç”¨çš„æœ€é«˜å‡æ•°æ³•å®ç°è§ï¼š&lt;a href=&quot;./highest_average.js&quot;&gt;highest_average.js&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.math.arizona.edu/~system/archives/voting-theory/&quot;&gt;A Mathematical Exploration of Apportionment Procedures Around the World&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rangevoting.org/Apportion.html&quot;&gt;RangeVoting.org - Apportionment and rounding schemes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://web.archive.org/web/20051222015727/http://db.math.ust.hk/articles/prop_rep/c_prop_rep.htm&quot;&gt;æ¯”ä¾‹ä»£è¡¨åˆ¶æ˜¯ç”šéº¼ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Apportionment_paradox&quot;&gt;Apportionment paradox - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="otaku" /><summary type="html">ç¼˜ç”± æœ€è¿‘å°è¯•äº†ä¸‹ Golangï¼Œç»ƒæ‰‹ Goroutines å®ç°äº†ä¸ªå¤šè¿æ¥çš„ http ä¸‹è½½å·¥å…· gotitã€‚æ‰€è°“çš„å¤šè¿æ¥ä¸‹è½½ï¼Œå°±æ˜¯å¯¹æ”¯æŒ http-range çš„èµ„æºçš„åŒæ—¶å‘èµ·å¤šä¸ª http è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚è´Ÿè´£èµ„æºçš„ä¸åŒéƒ¨åˆ†ï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªèµ„æºçš„ä¸‹è½½ã€‚æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œä¸‹è½½ä¸­æ–­åæœ¬åœ°æ–‡ä»¶ä¼šç•™ä¸‹å¤šä¸ªä¸è¿ç»­å¤§å°ä¸ä¸€çš„æœªå†™å…¥æ•°æ®çš„ç©ºå—ã€‚è‹¥é‡æ–°æ¢å¤ä¸‹è½½ï¼Œå¦‚ä½•ä¸ºè¿™äº›ç©ºå—åˆ†é…è¿æ¥å‘¢ï¼Ÿè€ƒè™‘åˆ°è¿æ¥æ•°æ˜¯å¯é…ç½®çš„ï¼Œä¸åº”å‡å®šè¿æ¥æ•°ä¸ç©ºå—æ•°å­˜åœ¨ç›¸å…³æ€§ã€‚ä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„ç­–ç•¥æ˜¯: å½“è¿æ¥æ•°å°äºç­‰äºç©ºå—æ•°ï¼Œç©ºå—æŒ‰ä»»æ„é¡ºåºæ’æˆé˜Ÿåˆ—ï¼Œæ¯ä¸ªç©ºé—²é“¾æ¥å‘é˜Ÿåˆ—è¯·æ±‚ç©ºå—ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚ å½“è¿æ¥æ•°å¤§äºç©ºå—æ•°ï¼Œä¸ºäº†è®©æ¯ä¸ªé“¾æ¥éƒ½å¾—åˆ°åˆ†é…ï¼Œç›´è§‰çš„æƒ³æ³•æ˜¯è¾ƒå¤§çš„ç©ºå—å ç”¨å¤šä¸€äº›è¿æ¥ï¼Œè®©æ¯ä¸ªè¿æ¥è´Ÿè´£çš„å¤§å°æ¥è¿‘ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå­˜åœ¨ä¸¤ä¸ªç©ºå—å¤§å°åˆ†åˆ«æ˜¯10Mã€5Mï¼Œå¯åˆ†é…è¿æ¥æ•°ä¸º3ï¼Œè¿æ¥æ•°å¤§äºç©ºå—æ•°ï¼Œæ ¹æ®ç­–ç•¥äºŒï¼ŒåŸºäºç©ºå—çš„å¤§å°æŒ‰æ¯”ä¾‹åˆ†é…è¿æ¥ï¼Œå¯ç®—å‡º10Må¾—åˆ°2ä¸ªè¿æ¥ï¼Œ5Må¾—åˆ°1ä¸ªè¿æ¥ã€‚è¿™é‡Œä¸è®¨è®ºè¿™æ ·çš„ç­–ç•¥æ˜¯å¦æœ‰æ•ˆï¼Œè€Œæ˜¯å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾è¿æ¥æ•°å˜ä¸º4ï¼Œç»§ç»­æŒ‰æ¯”ä¾‹åˆ†é…ï¼Œ10Må¾—åˆ°2.67ä¸ªè¿æ¥5Må¾—åˆ°1.33ä¸ªï¼Œè¿æ¥æ•°æ˜¯æ•´æ•°ï¼Œä¸€ä¸ªè¿æ¥å¯ä¸èƒ½æ’•æˆ 2ä¸ªï¼Œè‚¯å®šä¸èƒ½è¿™æ ·åˆ†é…ã€‚é‚£ä¹ˆå¤šå‡ºæ¥ä¸€ä¸ªè¿æ¥è¯¥ç»™10Mè¿˜æ˜¯5Mï¼Ÿå¦‚ä½•åˆ†é…è¿™éƒ¨åˆ†ä½™æ•°çœ‹ä¼¼ç®€å•å…¶å®å¹¶ä¸å®¹æ˜“ï¼Œéš¾åº¦åœ¨äºå¦‚ä½•æ‰¾å‡ºæœ€ä¼˜è§£ï¼Œç”šè‡³æ˜¯å¦‚ä½•å®šä¹‰æœ€ä¼˜è§£ã€‚è¿™é—®é¢˜å›°æ‰°äº†æˆ‘ç›¸å½“é•¿çš„æ—¶é—´ï¼Œç›´åˆ°ä¸æ¯”ä¾‹ä»£è¡¨åˆ¶è”ç³»èµ·æ¥ã€‚ ä»€ä¹ˆæ˜¯æ¯”ä¾‹ä»£è¡¨åˆ¶ ä½œä¸ºä¸€ä¸ªæ´»åˆ°ç°åœ¨è¿˜æ²¡è§è¿‡é€‰ç¥¨çš„â€œå…¬æ°‘â€è¦ä¸æ˜¯æœ€è¿‘é€‰ä¸¾çš„æ–°é—»æœ‰ç‚¹å¯†é›†è¿˜çœŸå¾ˆéš¾è®¤è¯†è¿™ä¸ªé—®é¢˜å°±æ˜¯æ¯”ä¾‹ä»£è¡¨åˆ¶ä¸­çš„æ•´æ•°åˆ†é…é—®é¢˜ï¼ˆApportionmentï¼‰ã€‚æ‰€è°“æ¯”ä¾‹ä»£è¡¨åˆ¶ï¼Œå°±æ˜¯ä»£è®®åˆ¶æ°‘ä¸»ä¸­çš„ä¸¤ç§ä¸»è¦é€‰ä¸¾æ–¹å¼ä¹‹ä¸€ã€‚å¦å¤–ä¸€ç§æ˜¯å¤šæ•°åˆ¶ï¼Œä¹Ÿå°±æ˜¯èµ¢è€…é€šåƒï¼Œç¥¨é«˜è€…èµ¢ï¼Œå¯çœ‹ä¸‹å°æ¹¾é«˜ä¸­çš„è¯¾ä»¶é¸èˆ‰åˆ¶åº¦çš„é¡å‹äº†è§£ä¸‹ã€‚æ¯”ä¾‹ä»£è¡¨åˆ¶å¸¸ç”¨äºè®®ä¼šé€‰ä¸¾ä¸­ï¼Œä¸¾ä¸€ä¸ªç²—ç•¥çš„ä¾‹å­ï¼Œæ¯”å¦‚è®®ä¼šæœ‰ \(S\) ä¸ªå¸­ä½ï¼Œå„å…šæ´¾æŒ‰ç…§è·å¾—çš„ç¥¨æ•°å æ€»ç¥¨æ•°çš„æ¯”ä¾‹åˆ†é…è®®ä¼šçš„å¸­ä½ã€‚æŠŠå¸­ä½å½“ä½œè¿æ¥æ•°ï¼Œå¾—ç¥¨æ•°å½“ä½œç©ºå—å¤§å°ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªé—®é¢˜å°±æ˜¯ç­‰ä»·çš„äº†ã€‚ æœ€å¤§ä½™é¢æ³• é»‘å°”ï¼ˆHareï¼‰æ•°é¢ 19ä¸–çºªä¸­æœŸï¼Œä¸€ä½è‹±å›½çš„å¤§å¾‹å¸ˆé»‘å°”ï¼Œæå‡ºä¸€ç§æ–¹æ³•ã€‚å‡å®šæ€»æŠ•ç¥¨æ•°ä¸º \(P\)ï¼Œæ€»å¸­ä½ä¸º \(S\)ã€‚é‚£å¯ä»¥ç®€å•å¾—å‡ºè·å¾—ä¸€å¸­æ‰€éœ€è¦çš„ç¥¨æ•°ï¼Œåœ¨è¿™é‡Œç§°ä¸ºæ•°é¢ï¼ˆQuotaï¼‰\(Q\)ã€‚ \[Q=\frac{P}{S}\] è®¡ç¥¨åˆ†ä¸ºä¸¤è½®ï¼Œç¬¬ä¸€è½®æ˜¯å„ä¸ªå…šæ´¾æ ¹æ®æ•°é¢å’Œå¾—ç¥¨æ•°å–å°½å¯èƒ½çš„å¸­ä½ï¼Œä¹Ÿå°±æ˜¯å¾—ç¥¨æ•°é™¤ä»¥æ•°é¢åå–æ•´æ•°éƒ¨åˆ†ï¼Œæ¯”å¦‚å…šæ´¾ \(i\) ç¬¬ä¸€è½®çš„å¾—ç¥¨æ•°ï¼š \[n_i=\Bigl\lfloor{\frac{P_i}{Q}}\Bigr\rfloor\] å…šæ´¾ \(i\) å¾—ç¥¨æ•°çš„ä½™æ•°ä¹Ÿå¯ä»¥è¢«è®¡ç®—å‡ºæ¥ï¼š \[R_i=P_i-{n_i}Q\] ç¬¬äºŒè½®å°±æ˜¯ï¼Œæ ¹æ®å„ä¸ªå…šæ´¾å¾—ç¥¨æ•°ä½™æ•°çš„å¤§å°ï¼ŒæŒ‰ä»å¤§åˆ°å°é¡ºåºåˆ†é…å‰©ä½™å¸­ä½ï¼Œç›´åˆ°æ‰€æœ‰å¸­ä½åˆ†é…å®Œæˆã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿå«æœ€å¤§ä½™é¢æ³•ã€‚ æœ€è¿‘è¢«å–æ¶ˆçš„é¦™æ¸¯ç«‹æ³•ä¼šé€‰ä¸¾å…¶ä¸­çš„åœ°åŒºç›´é€‰ï¼Œå°±æ˜¯ä»¥é»‘å°”æ•°é¢çš„æ¯”ä¾‹ä»£è¡¨åˆ¶ã€‚çœ‹ä¸€ä¸‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œä»¥2012å¹´ç«‹æ³•ä¼šé€‰ä¸¾é¦™æ¸¯å²›é€‰åŒºçš„ç»“æœä¸ºä¾‹. è¡¨ 1 ç¼–å· æ”¿å…š ç¥¨æ•° ç¬¬ä¸€è½® ä½™é¢ ç¬¬äºŒè½® æ€»å¸­ä½ 2 æ°‘ä¸»å…š 40,558 0 40,558 1 1 4 äººæ°‘åŠ›é‡ 18,667 0 18,667 0 0 5 æ°‘å»ºè” 33,901 0 33,901 1 1 7 å·¥å…š 31,523 0 31,523 1 1 8 æ–°æ°‘å…š 30,289 0 26,037 1 1 9 å·¥è”ä¼š 27,336 0 27,336 1 1 10 å…¬æ°‘å…š 70,475 1 23,222 0 1 12 æ°‘å»ºè” 36,517 0 36,517 1 1 13 è‡ªç”±å…š 17,686 0 17,686 0 0 2012å¹´é¦™æ¸¯å²›é€‰åŒºæ€»å¸­ä½ \(S = 7\)ï¼Œæ€»æœ‰æ•ˆé€‰ç¥¨\(P = 330766\)ï¼Œæ ¹æ®é»‘å°”é…é¢å…¬å¼å¯å¾— \(Q = P/S = 47252.3\) ï¼Œç¯‡å¹…æ‰€é™ï¼Œè¡¨ä¸Šçœç•¥äº†å¾—ç¥¨è¾ƒä½çš„åå•ã€‚è¡¨ä¸Šå¾—ç¥¨æ•°å¤§äº Q çš„åªæœ‰å…¬æ°‘å…šï¼Œæ‰€æœ‰ç¬¬ä¸€è½®å¾—ç¥¨çš„æ”¿å…šåªæœ‰å…¬æ°‘å…š(Civic)ï¼š \(S_{Civic} =\Bigl\lfloor{P_{Civic}/Q}\Bigr\rfloor = 1\) \(R_{Civic} = P_{Civic} - S_{Civic}*Q = 23165.7\) è®¡ç®—ä½™æ•°åç»§ç»­ç¬¬äºŒè½®åˆ†é…ã€‚ç¬¬äºŒè½®å¸­ä½ä½™ä¸‹ 6 å¸­ï¼Œæ‰€ä»¥å†é€‰ä½™é¢æ•°æœ€å¤§çš„å…­ä¸ªæ”¿å…šï¼Œåˆ†åˆ«æ˜¯æ°‘ä¸»å…šã€æ°‘å»ºè”ã€å·¥å…šã€æ–°æ°‘å…šã€å·¥è”ä¼šã€æ°‘å»ºè”ã€‚è‡³æ­¤ 7 ä¸ªå¸­ä½åˆ†é…å®Œæ¯•ã€‚å…¨éƒ¨è®¡ç®—ç»“æœå¯è§æ­¤ã€‚ å¯è§è¿™ç§æ–¹æ³•æ˜¯ç®€å•ç›´è§‚ä¸”å®¹æ˜“ç†è§£ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºè¿™ç§æ–¹æ³•æ˜¯ç¾å›½å»ºå›½ä¹‹çˆ¶æ±‰å¯†å°”é¡¿é¦–å…ˆæå‡ºçš„ï¼Œæ‰€ä»¥åœ¨ç¾å›½ä¹Ÿæœ‰å«æ±‰å¯†å°”é¡¿æ³•ï¼ˆHamiltonâ€™s Method of Apportionmentï¼‰ã€‚ç„¶è€Œè¿™ç§çœ‹ä¼¼ç®€å•ç›´è§‚ä¼¼ä¹åˆå…¬å¹³çš„åˆ†é…æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´è§‰è®¤ä¸ºçš„é‚£ä¹ˆå…¬å¹³ï¼Œè¿™ä¸ªåé¢å†è¯´ã€‚ é»‘å°”æ•°é¢å¹¶ä¸æ˜¯æœ€å¤§ä½™é¢æ³•çš„å”¯ä¸€æ–¹æ³•ï¼Œä¸è¿‡è¿™äº›æ–¹æ³•çš„åŒºåˆ«æ˜¯åœ¨æ•°é¢çš„è®¡ç®—ï¼Œè€Œç¬¬äºŒè½®ä½™æ•°åˆ†é…çš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ï¼Œæ‰€æœ‰è¿™ä¸€ç±»çš„åˆ†é…æ–¹æ³•éƒ½ç»Ÿç§°ä¸ºæœ€å¤§ä½™é¢æ³•ã€‚ ç‰¹ç½—æ™®ï¼ˆDroopï¼‰æ•°é¢ åŒæ ·æ˜¯19ä¸–çºªä¸­æœŸï¼ŒåŒæ ·æ˜¯è‹±å›½å¤§å¾‹å¸ˆç‰¹ç½—æ™®ï¼Œè®¤ä¸ºè·å–ä¸€ä¸ªå¸­ä½çš„ç¥¨æ•°ä¹Ÿå°±æ˜¯æ•°é¢ï¼Œå¹¶ä¸æ˜¯å¦‚é»‘å°”æ‰€è¯´çš„ï¼Œè€Œæ˜¯ï¼š \[Q=\frac{P}{S+1}\] ä»–æ˜¯çš„ç†ç”±å¦‚ä¸‹ï¼Œç«äº‰ä¸¤ä¸ªå¸­ä½çš„æƒ…å†µï¼Œå¾—ç¥¨æ•°è¶…è¿‡ \(1/3\) çš„å¿…å°†èµ¢å¾—ä¸€å¸­ï¼Œå¦‚æœæ˜¯ä¸‰ä¸ªå¸­ä½ï¼Œé‚£ä¹ˆå¾—ç¥¨æ•°è¶…è¿‡ \(1/4\) å°†èµ¢å¾—ä¸€å¸­ã€‚é€šè¿‡å½’çº³æ³•å¯å¾—å‡ºï¼Œäº‰å¤º \(S\) ä¸ªå¸­ä½çš„é€‰ä¸¾ä¸­ï¼Œå¾—ç¥¨æ•°è¶…è¿‡ \(P/(S+1)\)çš„å…šæ´¾éƒ½å°†èµ¢å¾—ä¸€å¸­ã€‚æ‰€ä»¥ç‰¹ç½—æ™®å¯¹æ•°é¢ \(Q\)çš„å®šä½å°±æ˜¯ï¼Œè·å¾—ä¸€å¸­æ‰€éœ€è¦çš„æœ€ä½ç¥¨æ•°ã€‚ å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œç›¸æ¯”é»‘å°”æ•°é¢ï¼Œç‰¹ç½—æ™®æ•°é¢çš„åˆ†æ¯å˜å¤§äº†ï¼Œæ•°é¢å°±å˜å°äº†ï¼Œä¹Ÿå°±æ˜¯è¯´è·å–ä¸€ä¸ªå¸­ä½çš„ä»£ä»·å˜ä½äº†ã€‚ä¼¼ä¹å¯¹å°å…šæ´¾æ›´æœ‰åˆ©äº†ã€‚ç»“åˆå¦å¤–ä¸€ç§æ•°é¢æ›´ä½çš„ï¼Œè®¾è®¡æœ¬æ„æ˜¯ä¸ºäº†åè¢’å°å…šæ´¾çš„å› ä½©é‡Œäºšåˆ©(Imperiali)æ•°é¢ \[Q=\frac{P}{S+2}\] æ¥çœ‹çœ‹æ˜¯å¦å¦‚æ­¤ï¼š æ”¿å…š å¾—ç¥¨æ•° é»‘å°” ç‰¹ç½—æ™® å› ä½©é‡Œäºšåˆ© A 30 64 64 65 B 12 25 26 25 C 5 11 10 10 è®¡ç®—å¯çœ‹æ­¤ã€‚ åœ¨é‡‡ç”¨ç‰¹ç½—æ™®æ³•æˆ–å› ä½©é‡Œäºšåˆ©æ³•å,å¾—ç¥¨æœ€å°‘çš„ C ä¸€å¸­åè€Œåˆ†åˆ«è¢« B å’Œ A æŠ¢å»ã€‚å®è·µä¸­ä¹Ÿå‘ç°æ›´å°çš„æ•°é¢åè€Œæ›´æœ‰åˆ©äºå¾—ç¥¨å¤šçš„å¤§å…šæ´¾ï¼Œè¿™æ˜¯å› ä¸ºæ›´å°çš„æ•°é¢ï¼Œå¯¼è‡´ç¬¬äºŒè½®å‰©ä¸‹çš„å¸­ä½å˜å°‘äº†ï¼Œå°å…šæ´¾ä¸»è¦é ç¬¬äºŒè½®æ¥å–å¾—å¸­ä½ï¼Œå¸­ä½å˜å°‘ç›¸åº”çš„è·å¾—å¸­ä½çš„æ¦‚ç‡ä¹Ÿå°±é™ä½ã€‚ é—®é¢˜ ä¸Šé¢æåˆ°æœ€å¤§ä½™é¢æ³•å¹¶æ²¡æœ‰ç›´è§‰ä¸Šå…¬å¹³ï¼Œå…¶ä¸€ä¾¿æ˜¯ä¸åŒæ•°é¢çš„å¯ä»¥å¾®è°ƒå¸­ä½çš„åˆ†é…ã€‚å…¶äºŒå°±æ˜¯ä¼šå‡ºç°éå¸¸åç›´è§‰çš„ä¸å…¬å¹³ç»“æœã€‚ æ‚–è®º ç¾å›½ä¸ºå„å·åˆ†é…ä¼—è®®é™¢å¸­ä½çš„æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨æ¯”ä¾‹ä»£è¡¨åˆ¶åˆ†é…ã€‚å·ç›¸å½“äºå€™é€‰åå•ï¼Œå·çš„äººå£å°±ç›¸å½“äºé€‰ç¥¨ã€‚è™½ç„¶ç°è¡Œçš„å®ªæ³•è§„å®šä¼—è®®é™¢çš„å¸­ä½å›ºå®šä¸º 435 å¸­ï¼Œä½† 20 ä¸–çºªå‰ä¼—è®®é™¢çš„å¸­ä½å¹¶ä¸æ˜¯å›ºå®š 435 å¸­è€Œæ˜¯éšäººå£çš„å¢é•¿è€Œå¢åŠ ã€‚1880 çš„äººå£æ™®æŸ¥å‘ç°ï¼Œæ€»äººå£ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¼—è®®é™¢æœ‰ 299 å¸­ä½æ—¶ï¼Œé˜¿æ‹‰å·´é©¬å·è·å¾— 8 ä¸ªå¸­ä½ï¼Œå½“æ€»å¸­ä½å¢åŠ åˆ° 300 æ—¶ï¼Œé˜¿æ‹‰å·´é©¬å·åè€Œå¤±å»ä¸€å¸­å‰©ä¸‹ 7 å¸­ã€‚åˆ¶é€ ä¸€ä¸ªä¾‹å­å¾ˆç®€å•ï¼š æ”¿å…š å¾—ç¥¨æ•° 4 å¸­ 5 å¸­ A 5 2 3 B 3 1 2 C 1 1 0 æŠŠåœºæ™¯æ¢æˆè®®ä¼šçš„ä¸å…¬å¹³å°±éå¸¸æ˜¾è€Œæ˜“è§äº†ï¼Œè®®ä¼šæ€»å¸­ä½å¢åŠ ä¸€å¸­ï¼ŒæŠ•ç¥¨ä¿æŒä¸å˜çš„æƒ…å†µä¸‹æŸä¸ªæ”¿å…šå´ä¼šå› æ­¤å¤±å»ä¸€å¸­ã€‚è¿™ç§ç°è±¡ä¾¿ç§°ä¸ºé˜¿æ‹‰å·´é©¬æ‚–è®ºï¼ˆAlabama Paradoxï¼‰ã€‚è¿™å°±æ˜¯æœ€å¤§ä½™é¢æ³•ä¸å¯é¿å…çš„é—®é¢˜ã€‚ é˜¿æ‹‰å·´é©¬æ‚–è®ºï¼Œåªå­˜åœ¨ç†è®ºè®¡ç®—ä¸­ï¼Œç°å®ä¸­å¹¶æœªæœªå‘ç”Ÿï¼Œå¹¶ä¸æ˜¯é˜¿æ‹‰å·´é©¬æ‚–è®ºä¸æ˜“å‘ç”Ÿï¼Œå®é™…ä¸Šé¢„æœŸæ¯ 8 æ¬¡åˆ†é…å°±ä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œè€Œç°å®æ²¡å‘ç”ŸåŸå› æ˜¯ä¼—è®®é™¢ä¸å†é‡‡ç”¨æœ€å¤§ä½™é¢æ³•åˆ†é…å¸­ä½ï¼Œå®é™…ä¸Šè¿˜æœ‰ä¸ªå‰æå°±æ˜¯è¦ç°å®ä¸­ä¸¤æ¬¡æŠ•ç¥¨çš„æ¯”ä¾‹ä¿æŒä¸å˜è¿™æ¦‚ç‡ä¹Ÿæ˜¯å‡ ä¹ä¸å¯èƒ½ğŸ˜œã€‚ å¦å¤–ä¸€ä¸ªæ‚–è®ºå°±æ›¾åœ¨ç°å®å‡ºç°ï¼Œ1900 å¹´å¼—å‰å°¼äºšå¾—åˆ° 10 å¸­ç¼…å› å·å¾—åˆ° 3 å¸­ã€‚è€Œ 1901 å¹´ï¼Œè¿™ä¸€å¹´å°½ç®¡å½“å¹´å¼—å‰å°¼äºšçš„äººå£å¢åŠ é€Ÿåº¦å¤§äºç¼…å› å·ï¼Œåè€Œè¢«ç¼…å› å·æŠ¢å»ä¸€å¸­ã€‚å¼—å‰å°¼äºš 9 å¸­ç¼…å› å· 4 å¸­ï¼Œè§ï¼š1901å¹´ç¾å›½ä¼—è®®é™¢é€‰ä¸¾-ç»´åŸºç™¾ç§‘ã€‚è¿™å°±æ˜¯æ‰€è°“çš„äººå£æ‚–è®ºï¼ˆPopulation paradoxï¼‰ï¼Œä¸¤ä¸ªå·çš„äººå£å‘ç”Ÿå¢é•¿ï¼Œå¢é•¿ç‡å¿«å·åè€Œè¾“ç»™å¢é•¿ç‡æ…¢çš„å·ä¸€å¸­ã€‚ é…ç¥¨ å›å¤´é‡æ–°çœ‹ä¸‹2012å¹´ç«‹æ³•ä¼šåŒºåŸŸç›´é€‰é¦™æ¸¯å²›åŒºçš„ç»“æœï¼ˆè§è¡¨ 1ï¼‰ï¼Œå¯ä»¥å‘ç°æ°‘å»ºè”ï¼ˆDBAï¼‰å‡ºç°äº†ä¸¤æ¬¡ã€‚ä¸ºä»€ä¹ˆè¦åˆ†ä¸¤ä¸ªåå•å‚é€‰å‘¢ï¼Œå‡è®¾ä¸€ä¸‹å¦‚æœåˆå¹¶ä¸ºä¸€ä¸ªåå•ä¼šæ€ä¹ˆæ ·ï¼Ÿæ¼”ç®—ä¸€ä¸‹ä¾¿å¯ä»¥å‘ç°ï¼Œæœ€ç»ˆæ°‘å»ºè”åªèƒ½å¾— 1 ä¸ªå¸­ä½ï¼Œè€Œæ°‘ä¸»æ´¾çš„å…¬æ°‘å…šåèƒ½è·å¾— 2 ç¥¨ã€‚ è€Œæ°‘å»ºè”æœ€ç»ˆé€‰æ‹©äº†åˆ†æ‹†åå•ï¼Œé¿å…äº†è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œè¿™ç§è¡Œä¸ºå°±æ˜¯é…ç¥¨ï¼Œè€Œä¸”æ˜¯ç›¸å½“æˆåŠŸçš„é…ç¥¨ä¾‹å­ã€‚ä½†é…ç¥¨ä¹Ÿéœ€è¦å¯¹é€‰ç¥¨åˆ†é…çš„é¢„æµ‹ç›¸å½“æœ‰ä¿¡å¿ƒæ‰èƒ½æ‰§è¡Œï¼Œåˆ‡å¿Œä¸è‡ªé‡åŠ›ï¼Œå†å²ä¸Šé¦™æ¸¯ç«‹æ³•ä¼šã€å°æ¹¾ç«‹æ³•å§”é…ç¥¨å¤±è´¥çš„ä¾‹å­ä¹Ÿä¸å°‘è§ã€‚ ä½™æ•°ç›¸ç­‰ æœ€å¤§ä½™é¢æ³•ï¼Œå‡ºç°ä½™æ•°ç›¸ç­‰çš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿæ„é€ è¿™ä¸ªæƒ…å†µå¹¶ä¸éš¾ï¼Œå‡è®¾æœ‰ n ä¸ªå€™é€‰äººç«é€‰ S ä¸ªå¸­ä½ï¼Œ\(V_i\) ä¸ºå€™é€‰äºº i çš„ç¥¨æ•°ï¼Œ\(V_i=a_i*Q+C\) ï¼ŒQ ä¸ºé»‘å°”æ•°é¢ï¼Œå¯å¾—å‡º \(S=\frac{nC}{Q}+\sum\limits_{i=1}^{n}a_i\)ï¼Œæ„é€ ä»»æ„ aã€nã€Cã€Q æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¾¿å¯ï¼š \[\begin{align*} &amp;amp; C &amp;lt; Q \\ &amp;amp; \frac{nC}{Q}\in{\mathbb{Z}} \\ &amp;amp; a_i\in{\mathbb{Z}} \\ \end{align*}\] è§æ­¤ä¾‹å­ï¼Œå‡ºç°è¿™ç§æƒ…å†µåªèƒ½æ›´æ¢æ•°é¢ç®—æ³•ï¼Œæˆ–ä¸ç”¨æœ€å¤§ä½™é¢æ³•äº†ã€‚å½“ç„¶ç°å®ä¸­æ˜¯å‡ ä¹ä¸å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µçš„ã€‚ æœ€é«˜å‡æ•°æ³• å¦å¤–ä¸€ç§ä¸æœ€å¤§ä½™é¢æ³•ç›¸å¯¹äºçš„å°±æ˜¯æœ€é«˜å‡æ•°æ³•ï¼Œè€Œä¸”æœ€é«˜å‡æ•°æ³•å·²è¢«è¯æ˜èƒ½é¿å…æœ€å¤§ä½™é¢æ³•é‡åˆ°çš„æ‚–è®ºã€‚æœ€é«˜å‡æ•°æ³•å–å¾—å¸­ä½çš„æ–¹å¼ç›¸å½“äºä¾æ¬¡å¯¹æ¯ä¸ªå¸­ä½è¿›è¡Œç«æ ‡ï¼Œåªæ˜¯ä»·æ ¼ä¸æ˜¯ç»å¯¹è€Œæ˜¯ç›¸å¯¹ï¼Œè€Œä¸”ä»·æ ¼ä¾å–å¾—çš„å¸­ä½æ•°å¢åŠ è€Œé€’å‡ã€‚ä»¥ä¸‹è¡¨ä¸ºä¾‹ï¼Œä¸‰ä¸ªæ”¿å…šç«é€‰ 4 ä¸ªå¸­ä½ã€‚ æ”¿å…š å¾—ç¥¨æ•° ç¬¬ä¸€è½® ç¬¬äºŒè½® ç¬¬ä¸‰è½® ç¬¬å››è½® æ€»å¸­ä½ A 80 80 40 26.67 26.67 3 B 32 32 32 32 16 1 C 14 14 14 14 14 0 ç¬¬ä¸€è½® A ç¥¨æ•°æœ€é«˜ï¼ŒA å¾— 1 å¸­ï¼ŒA çš„ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_A}{2}\)ï¼Œç¬¬äºŒè½®è¿˜æ˜¯ A æœ€é«˜ï¼ŒA è·å¾—ç¬¬äºŒå¸­ï¼Œæ‰€ä»¥ A ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_A}{3}\)ï¼Œç¬¬ä¸‰è½® B ç¥¨æ•°æœ€é«˜ï¼ŒB è·å¾—ç¬¬ä¸€å¸­ï¼ŒB ç¥¨æ•°æ›´æ–°ä¸º \(\frac{V_B}{2}\)ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å¸­ä½åˆ†é…å®Œæˆã€‚ å¯ä»¥çœ‹å‡ºï¼Œè·å¾—ç¬¬ n å¸­çš„å‰©ä½™ç¥¨æ•°ä¸º \(\frac{V}{n+1}\)ã€‚æ¢ä¸€å¥è¯è¯´ä¹Ÿå°±æ˜¯ï¼ŒA èƒ½è·å¾— n ä¸ªå¸­ä½ï¼Œæ˜¯å› ä¸ºå…¶ç¥¨æ•°å¹³å‡ n åˆ†çš„å‡æ•°æœ€å¤§ï¼Œæ‰€ä»¥å«æœ€é«˜å‡æ•°æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ¥è¿‘å®é™…çš„ä¾‹å­ï¼Œæ•°æ®æ¥è‡ª 2004 å¹´çš„å°åº¦å¤§é€‰ã€‚ æœ€é«˜å‡æ•°æ³•ä¹Ÿå«é™¤æ•°æ³•ï¼Œæ”¿å…šè·å¾—ç¬¬ n å¸­çš„å‰©ä½™ç¥¨æ•°ç­‰äºå¾—ç¥¨æ•°é™¤ä»¥ä¸€ä¸ªé™¤æ•°åºåˆ—çš„ç¬¬ n é¡¹ï¼Œè¿™ä¸ªåºåˆ—å¯ä»¥ä¸€èˆ¬åŒ–ä¸º \(f(n)\)ï¼Œ\(f(n)=n+1\) æ—¶ï¼Œç§°ä¸ºæ´ªå¾·æ³•(dâ€™Hondt)ã€‚å…¶ä»–ä¸åŒçš„æœ€é«˜å‡æ•°æ³•ï¼Œä¹Ÿå°±æ˜¯ \(f(n)\) çš„å–å€¼ä¸åŒè€Œå·²ã€‚ const dHondt = (s) =&amp;gt; s+1 // æ´ªå¾·æ³• const sLague = (s) =&amp;gt; s*2+1 // è–æ‹‰å¤æ³•ï¼ˆSainte-LaguÃ«ï¼‰ const imperiali = (s) =&amp;gt; (s+2)/2 // å› ä½©é‡Œäºšåˆ©ï¼ˆImperialiï¼‰ const modSLague = (s) =&amp;gt; s==0?1:(2*s+1)*5/7 // æ”¹è‰¯åœ£æ‹‰å¤æ³• ä¸åŒçš„æ–¹æ³•ï¼Œæœ€å¤§çš„å½±å“æ˜¯\(f(n)\)çš„å¢é•¿ç‡ï¼Œå¢é•¿ç‡è¶Šå¿«è¶Šæœ‰åˆ©äºå°å…šæ´¾ï¼Œç›¸ååˆ™çš„æœ‰åˆ©å¤§å…šæ´¾ã€‚å¤§å¤šæ–¹æ³•éƒ½æ˜¯ä¸€æ¬¡å‡½æ•°ï¼Œæ‰€ä»¥ç³»æ•°è¶Šå¤§å°±è¶Šæœ‰åˆ©äºå°å…šæ´¾ã€‚é™¤äº†äº¨å»·é¡¿-å¸Œå°”æ³•ï¼ˆHuntingtonâ€“Hill methodï¼‰ï¼š \[f(n)=\sqrt{n(n+1)}\] Huntingtonâ€“Hill çš„å¢é•¿ç‡å…¶å®æ˜¯éå¸¸æ¥è¿‘äº dâ€™Hondt çš„ã€‚å®ƒä¹Ÿæ˜¯ç¾å›½ç°è¡Œä¸ºå„å·åˆ†é…ä¼—è®®é™¢å¸­ä½æ‰€ç”¨çš„æ–¹æ³•ã€‚ æ•°é¢æ³•åˆ™ æœ€é«˜å‡æ•°æ³•å¯ä»¥é¿å…é˜¿æ‹‰å·´é©¬æ‚–è®ºå’Œäººå£æ‚–è®ºï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯ç°è¡Œæ¯”ä¾‹ä»£è¡¨åˆ¶é€‰ä¸¾ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œä½†å®ƒä¹Ÿä¸æ˜¯å®Œç¾çš„ã€‚é‡æ–°å›è¿‡å¤´æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œæ€»æŠ•ç¥¨æ•°ä¸º \(P\)ï¼Œæ€»å¸­ä½ä¸º \(S\)ã€‚æ”¿å…š i çš„å¾—ç¥¨ä¸º \(V_i\)ã€‚åœ¨ä¸€ä¸ªç†æƒ³çš„ä¸–ç•Œé‡Œæ”¿å…š i çš„å¸­ä½ä¸ºï¼š \[A_i=S\frac{V_i}{P}\] æˆ‘ä»¬çŸ¥é“ç»å¤§å¤šæ•°æƒ…å†µä¸‹ \(A_i\) æ˜¯ä¸ªå°æ•°ï¼Œè¿™ä¸ªæ•°ç§°ä¸º i çš„è‡ªç„¶æ•°é¢ï¼ˆnature quotaï¼‰ã€‚åº”ç”¨åˆ†é…æ–¹æ³•çš„ç›®çš„å°±æ˜¯å¯¹è‡ªç„¶æ•°é¢è¿›è¡Œå–æ•´ï¼Œè€Œå–æ•´æ— å¤–ä¹æ˜¯å‘ä¸‹å–æ•´æˆ–å‘ä¸Šå–æ•´ã€‚ è¿™ä¸ªå°±æ˜¯æ•°é¢æ³•åˆ™çš„å®šä¹‰ï¼Œåˆ†é…ç»™ä¸€æ–¹çš„å¸­ä½æ•°é‡åº”è¯¥ä¸ºå…¶è‡ªç„¶æ•°é¢çš„å‘ä¸Šå–æ•´æ•´æ•°æˆ–å‘ä¸‹å–æ•´æ•´æ•°ã€‚èƒ½ç§°ä¸ºæ³•åˆ™æƒ³å¿…æ˜¯ååˆ†é‡è¦ï¼Œä½†çœ‹ä¼¼å®Œç¾çš„æœ€é«˜å‡æ•°æ³•å°±è¿åäº†è¿™ä¸ªæ³•åˆ™ã€‚ ç»“è¯­ å®é™…ä¸Š Balinski &amp;amp; Young å·²ç»è¯æ˜äº†ä¸è¿åæ•°é¢æ³•åˆ™åŒæ—¶åˆèƒ½é¿å…æ‚–è®ºçš„åˆ†é…æ–¹æ³•æ˜¯ä¸å¯èƒ½çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ•´æ•°åˆ†æ‘Šå®é™…ä¸Šæ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å…¬å¹³è§£æ³•ã€‚é‚£ä¹ˆå›æœ€å¼€å§‹é‡åˆ°çš„é—®é¢˜ï¼Œå¯»æ‰¾åˆ†é…è¿æ¥çš„æœ€ä¼˜è§£ï¼Œå¦‚æ­¤ç»å°½è„‘æ±ä¹Ÿå°±æƒ…æœ‰å¯åŸäº†ã€‚ä¸è¿‡å…¬å¹³ä¸å¯èƒ½ï¼Œæœ€ä¼˜è§£å´æ˜¯å¯èƒ½çš„ã€‚åªéœ€å®šä¹‰ä»€ä¹ˆæ˜¯æœ€ä¼˜ï¼Œæ¯”å¦‚è¯´å®é™…å¸­æ•°ä¸è‡ªç„¶æ•°é¢ä¹‹é—´çš„è·ç¦»æœ€å°ä¾¿æ˜¯æœ€ä¼˜ï¼ˆå¯è§å‚è€ƒèµ„æ–™1ã€2ï¼‰ï¼Œå› ä¸ºå¸­ä½æ˜¯æ•´æ•°æœç´¢ç©ºé—´æœ‰é™ï¼Œåªéœ€éå†æ‰€æœ‰å¯èƒ½ä¾¿å¯ä»¥æ‰¾åˆ°æœ€ä¼˜ï¼Œå¦‚æœæ»¡è¶³æ•°é¢æ³•åˆ™é‚£ä¹ˆæœç´¢çš„ç©ºé—´ä¾¿æ›´å°äº†ã€‚ æ­£å› ä¸ºç»å¯¹å…¬å¹³çš„ä¸å¯èƒ½ï¼Œå›½å®¶æ”¿ç­–çš„åˆ¶å®šè€…å°±å¯ä»¥é€šè¿‡è°ƒæ•´è¿™äº›æ–¹æ³•è®©æ”¿ç­–åå‘å¤§å¤šæ•°æˆ–è€…å°‘æ•°ï¼Œæ¯”å¦‚è¯´åŠ å¤§æœ€å¤§ä½™é¢æ³•çš„æ•°é¢ï¼Œæˆ–è€…æœ€é«˜å‡æ•°æ³•é€‰æ‹©å¢é•¿ç‡è¾ƒå¿«çš„é™¤æ•°åºåˆ—ï¼Œæ¥è®©å°‘æ•°æ´¾çš„å¾—åˆ°å‘å£°æœºä¼šã€‚å½“ç„¶é€‰æ‹©ç›¸åçš„ç­–ç•¥ï¼Œä¹Ÿèƒ½è¯´æˆæ˜¯é˜»æ­¢æç«¯ä¸»ä¹‰çš„å‘å±•ã€‚å¥½åƒæ”¿åºœæ€ä¹ˆåšéƒ½æ˜¯å¯¹çš„ï¼Œä¸è¿‡é˜»æ­¢æç«¯ä¸»ä¹‰è¿™æ–¹é¢è¿˜çœŸæœ‰åä¾‹ï¼Œé­ç›å…±å’Œå›½çš„å¸å›½è®®ä¼šè®©çº³ç²¹å´›èµ·å°±æ˜¯ä¸€ä¸ªé²œæ˜çš„åä¾‹ã€‚ ä¾‹å­ä¸­æ‰€ç”¨çš„æœ€å¤§ä½™é¢æ³•å®ç°è§ï¼šlargest_remainder.js ä¾‹å­ä¸­æ‰€ç”¨çš„æœ€é«˜å‡æ•°æ³•å®ç°è§ï¼šhighest_average.js å‚è€ƒèµ„æ–™ A Mathematical Exploration of Apportionment Procedures Around the World RangeVoting.org - Apportionment and rounding schemes æ¯”ä¾‹ä»£è¡¨åˆ¶æ˜¯ç”šéº¼ï¼Ÿ Apportionment paradox - Wikipedia</summary></entry><entry><title type="html">å¤œéª‘å‡¤å‡°å±±</title><link href="http://dourok.info/2018/09/26/night-ride-to-phoenix-mountine/" rel="alternate" type="text/html" title="å¤œéª‘å‡¤å‡°å±±" /><published>2018-09-26T00:00:00+00:00</published><updated>2018-09-27T12:13:32+00:00</updated><id>http://dourok.info/2018/09/26/night-ride-to-phoenix-mountine</id><content type="html" xml:base="http://dourok.info/2018/09/26/night-ride-to-phoenix-mountine/">&lt;p&gt;&lt;img src=&quot;æ˜Ÿç©º2.jpg&quot; alt=&quot;&quot; title=&quot;&amp;quot;çºªå¿µç…§&amp;quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;20 å·å¤œ 6 ç‚¹åŠä»æ±•å¤´å¸‚åŒºå‡ºå‘å¤œéª‘å‡¤å‡°å±±ã€‚19ï¼š17 åˆ°è¾¾æ¨Ÿæ—ï¼Œ335 çœé“è²åæ®µçš„è·¯å†µä¸æ˜¯å¤ªå¥½ï¼Œè·¯çª„å¤§è½¦å¤šï¼Œæ°´æ³¥è·¯é¢å¤šå¤„ç ´è£‚ï¼Œ50å·¦å³é€Ÿåº¦è¿‡ä¸€å¤„ä¸å¹³è·¯é¢æ—¶ï¼Œè¿™æ¬¡é¢ ç°¸æ„Ÿè§‰åˆ°å‰è½®æœ‰è¢«ã€è›‡å’¬ã€çš„å¯èƒ½æ€§ï¼Œä¸€è·¯æœ‰ç‚¹æ‹…å¿ƒçˆ†èƒã€‚åˆ°æ„ä¸œé•‡åï¼Œæƒ³åˆ°æ¥ä¸‹æ¥è¦ç¦»å¼€å¸‚åŒºï¼Œé è¾¹åœè½¦æ£€æŸ¥ä¸€ä¸‹è½¦å†µï¼Œå‘ç°å‰è½®èƒå‹ä¸è¶³ã€‚å¼€å§‹æœ‰ç‚¹æ‹…å¿ƒæ˜¯ä¸æ˜¯ç ´èƒæ³„æ°”ï¼Œä¸è¿‡æƒ³åˆ°å‰è½®ä¸Šæ¬¡æ‰“æ°”ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œèµ·ç å¾—ä¸€å¹´ä»¥ä¸Šï¼Œè¯´ä¸å®šä¹°è½¦å°±æ²¡æ‰“è¿‡ï¼ˆğŸ˜ï¼‰ã€‚è¿˜æ˜¯è‡ªç„¶æ³„æ°”çš„å¯èƒ½æ€§å¤§ä¸€ç‚¹ã€‚åˆšå¥½å‰æ–¹ä¸è¿œæ„ä¸œä¸‰è·¯å’ŒåŒ—æ¡¥è·¯çº¢ç¯è·¯å£æœ‰ä¸€å®¶æ–°æœ¬åº—ï¼Œä¾¿è·‘å»æ‰“äº†æ°”ï¼Œåº—ä¸»äººä¸é”™ä¹Ÿæ²¡æ”¶é’±ï¼Œæ£€æŸ¥äº†ä¸‹æ²¡ä»€ä¹ˆé—®é¢˜å°±ç»§ç»­å‡ºå‘äº†ï¼Œå‡†å¤‡å¼€ä¸€æ®µå†çœ‹çœ‹èƒå‹ï¼Œæœ€åæƒ…å†µå°±åœ¨å‡¤å‡°å±±ä½å®¿ã€‚æ‘©æ‰˜è½¦èƒæ²¡æœ‰å…¬è·¯è½¦èƒé‚£ä¹ˆçŸ«æƒ…ï¼ˆäº‹å®è¯æ˜ç£•äº†ä¸€ä¸‹æ²¡å½±å“ï¼Œè½¦åœ¨å±±ä¸Šåœäº†ä¸€å¤œæ°”è¿˜æ˜¯é¥±çš„ï¼‰&lt;/p&gt;

&lt;p&gt;è¿‡äº†æ–‡ç¥ é•‡å°±æ˜¯å±±è·¯äº†ï¼Œå±±è·¯åŸºæœ¬æ²¡æœ‰è·¯ç¯ï¼Œä¸€è·¯è¿œå…‰ï¼Œä¼šè½¦è‡ªè§‰å…³ç¯ï¼Œä½†è¿é¢æ¥çš„æ±½è½¦èƒ½åšåˆ°è‡ªè§‰å…³ç¯ä¸åˆ°ä¸‰æˆï¼Œç—›æ¨ä¸å·²ï¼Œé‡åˆ°ä¸å…³ç¯ï¼Œä¸ºäº†é¿å…ä¼šè½¦åçš„çŸ­æš‚å¤±æ˜ï¼Œåªèƒ½ä½å¤´å‡é€Ÿã€‚æœ‰ä¸€å¤„ä¸€è¾¹è·¯é¢ä¿®è·¯å°æ‰ï¼Œè¿é¢æ¥çš„æ±½è½¦è¿˜ä¸å…³ç¯ï¼Œç®€ç›´æ˜¯è°‹æ€ï¼Œå¹¸å¥½é€Ÿåº¦è¶³å¤Ÿä½æ‰èƒ½é¿å…è¿™äº›å±é™©ã€‚ä¸è¿‡è¿™æ®µè·¯è¿˜æ˜¯å¾—èŠ±å¤šç™½å¤©ä¸€å€çš„æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;å¤§æ¦‚ 9 ç‚¹åˆ°å‡¤å‡°é•‡ï¼Œåœ¨ 201 ä¹¡é“åœç•™ä¼‘æ¯äº†ä¸€ä¸‹ï¼Œå¼€å§‹èµ°è€è·¯ä¸Šå±±ã€‚æ™šä¸Šèµ°è€è·¯è¿˜æ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ï¼Œè€Œä¸”å¿«åˆ°å‡¤æºªæ°´åº“é‚£è¾¹ï¼Œæ‘©æ‰˜è½¦å¼€å§‹å‡ºç°å¼‚å“ï¼ˆå¾€å³å‹å¼¯ä¼šå‡ºç°ï¼‰ï¼Œè™½ç„¶å¤§æ¦‚çŸ¥é“æ˜¯é“¾æ¡å¤ªæ¾äº†ï¼Œä¸è¿‡å¬ç€è¿˜æ˜¯å¾ˆç´§å¼ ã€‚çˆ¬å‡é«˜ä¸€ç‚¹å¼€å§‹æœ‰é›¾ï¼Œå½“æ™šæœ¬æ¥æœ‰æœˆçš„ï¼ˆå…«æœˆåä¸€ï¼‰ï¼Œä¸è¿‡åœ¨äº‘é‡Œå¼€è½¦ï¼Œèƒ½è§åº¦å¾ˆå·®ï¼Œæœ‰å‡ æ¬¡æ‹å¼¯ï¼Œä»¥ä¸ºå¼¯é“è¦å®Œäº†ç»“æœè¿˜æ²¡æœ‰ï¼Œåªèƒ½æ€¥å¿™åˆ¹è½¦å‡é€Ÿã€‚è¿˜æœ‰ä¸€æ¬¡ä»¥ä¸ºè½¦è¾†è¦å¤±æ§äº†ï¼Œè¿˜ç”¨è„šè¸©ä¸€ä¸‹åœ°é¢ä¿æŒå¹³è¡¡ã€‚åé¢å°±ä¸æ•¢åˆ†ç¥å’Œåé¢é‚£ä½å¨å¨ï¼Œç²¾ç¥é«˜åº¦é›†ä¸­ï¼Œè€è·¯ä¸¤è¾¹æœ‰ä¸å°‘æˆ¿å­ï¼Œå±±ä¸Šäººå®¶å¤§å¤šæ—©æ—©ä¼‘æ¯ã€‚åˆ°äº†ä¹Œå´¬æ‘å·¦æ‹å¾€å¤©æ± æ–¹å‘çš„æ—¶å€™ï¼Œæ‘©æ‰˜è½¦åˆšå¥½å¼€åˆ°äº‘ä¸Šé¢ï¼Œè±ç„¶å¼€æœ—ï¼Œæ»¡å¤©ç¹æ˜Ÿï¼Œæœˆå…‰ä¸‹å‘¨å›´æ˜¯æœ›ä¸åˆ°è¾¹é™…çš„äº‘æµ·ï¼Œä¸è¿œå¤„çš„å±±å³°è€¸ç«‹åœ¨äº‘æµ·ä¸Šæ–¹ï¼Œå¤œå¹•ä¸‹æ˜¾å¾—å£®è§‚åˆå¯æ€–ã€‚å› ä¸ºæ—¶é—´å¤ªæ™šï¼Œåˆå¿«åˆ°é¡¶äº†ï¼Œä¾¿æ²¡æœ‰åœè½¦æ‹ç…§ï¼Œå®åœ¨å¯æƒœï¼Œ10ç‚¹å·¦å³åˆ°å¤©æ± å…¥å£åœè½¦åœºæ—¶åˆšåœå¥½è½¦äº‘é›¾åˆæ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿çˆ¬å¤©æ± çš„æ—¶å€™ï¼Œå‘ç°å±…ç„¶å¿˜äº†å¸¦æ°´è¢‹ï¼Œåˆ—å¥½äº†æ¸…å•äº‹æ— å·¨ç»†ï¼Œä¸€ä»¶ä»¶æ‰“é’©å°±æ˜¯å¿˜äº†æŠŠæ°´è¢‹æ”¾è¿›ä¹¦åŒ…é‡Œï¼Œ10 ç‚¹çš„åœè½¦åœºå”®ç¥¨å¤„éƒ½å·²æ²¡æœ‰äººï¼Œç»•äº†ä¸€åœˆæ‰¾ä¸åˆ°å•†é“ºæˆ–è€…è£…æ°´çš„å®¹å™¨ã€‚æœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œæ—¢ç„¶æ²¡å¸¦æ°´è¢‹ï¼Œé‚£å°±çµæ´»å˜é€šå°†é”™å°±é”™ã€‚è§£å†³æ™šé¤å†ä¸Šå»ã€‚ç›´æ¥åœ¨æ™¯åŒºé—¨å£é“ºä¸Šé˜²æ½®å«ï¼Œå¸­åœ°è€Œåã€‚åœ°é¢å¹³ï¼Œç¦»å…¬å•è¿‘ï¼Œæ¥æ°´æ´—é”…éƒ½æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;ç‰›è‚‰ä¸¸.jpg&quot; alt=&quot;&quot; title=&quot;ç‰›è‚‰ä¸¸ã€ç”Ÿèœã€ç…®æ–¹ä¾¿é¢ï¼Œå‡ å£çƒ­æ±¤ä¸‹è‚šå°±æ˜¯æ»¡æ»¡çš„å¹¸ç¦æ„Ÿï¼Œ10 é¢—ç‰›è‚‰ä¸¸è¿˜æ˜¯åƒçš„å¾ˆæ»¡è¶³&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åƒå®Œåˆ·äº†ç‰™ï¼Œå¸¦ä¸Šå¤´ç¯ç»§ç»­ä¸Šè·¯ï¼Œå”®ç¥¨å¤„æ²¡æœ‰äººï¼Œé—¨è¿˜ç•™äº†æ¡é€šé“ï¼Œç›´æ¥å°±é€ƒç¥¨ä¸Šå»äº†ã€‚å…¶å®å°±ç®—é—¨æ²¡å…³è¿˜æ˜¯å¯ä»¥ä»å”®ç¥¨å¤„åè¾¹ç»•è¿‡å»çš„ã€‚è¿™é‡Œåˆ°å¤©æ± å¤§æ¦‚æ˜¯ 1200mï¼Œåœ¨800mã€200m å¤„éƒ½æœ‰è·¯ç‰Œæç¤ºã€‚å…¨ç¨‹çŸ³æ¢¯å’Œå›´æ ï¼Œé›¾éå¸¸æµ“ï¼Œå¤§åŠŸç‡å¤´ç¯ä¹Ÿç…§ä¸æ¸…2ç±³å¤–ï¼Œæ…¢æ…¢èµ°åå‡ äºŒååˆ†é’Ÿå°±èƒ½åˆ°å¤©æ± ï¼Œæ€»çš„æ¥è¯´ä¸ç®—é™¡ï¼Œåœ°å›¾ä¸Šçœ‹çˆ¬å‡å¤§æ¦‚ 130mã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;å”®ç¥¨å¤„.jpg&quot; alt=&quot;&quot; title=&quot;ç¥¨ä»· 30ï¼Œä¸‰å¹´å‰æ¥çš„æ—¶å€™è¿˜æ˜¯ 20ã€‚å·¦è¾¹çš„é€šé“å¯ä»¥ç»•è¿‡æ­£é—¨ &quot; /&gt;&lt;/p&gt;

&lt;p&gt;çˆ¬ä¸Šå»å°±çœ‹åˆ°é›¾é‡Œæœ‰äº®å…‰ï¼Œéšç€ç¯å…‰èµ°è¿‡å»ï¼ŒåŸæ¥æ˜¯å¦ä¸€ä¼™éœ²è¥çš„äººã€‚å‡ ç”·å‡ å¥³ï¼Œä¸¤ä¸ªå¸ç¯·ã€‚ä»–ä»¬åœ¨èµ°å»Šä¸‹éœ²è¥ï¼Œæ‰“äº†ä¸‹æ‹›å‘¼ï¼Œå°±ç»§ç»­æ²¿ç€èµ°å»Šèµ°ã€‚å°±åœ¨è¿‡äº†äº­åçš„å¹³åœ°ï¼ŒæŠµç€ä¸¤ä¸ªçŸ³å¤´çš„åœ°æ–¹æ­èµ·å¸ç¯·ã€‚å› ä¸ºé›¾å¤ªé‡ä¸æ•¢ä¹±èµ°ï¼Œäººä¹Ÿå¤ªç´¯ï¼Œå¿ƒå¿µå¿µçš„è–¯ç‰‡éƒ½æ²¡åƒå°±èººä¸‹äº†ã€‚è¿™ä¸ªå¸ç¯·ä½ç½®é€‰çš„å®åœ¨ä¸å¥½ï¼Œç¦»é‚£ä¼™äººå¤ªè¿‘ï¼Œä»–ä»¬ä¸€æ™šä¸Šéƒ½åœ¨èŠå¤©ï¼Œåœ¨å¤©æ± é‡ŒæŠ“é±¼è¿˜å¤§å£°åš·åš·ã€‚4 ç‚¹å¤šçš„æ—¶å€™åˆæœ‰ä¸€ä¼™äººåœ¨äº­é‡Œä¼‘æ¯å–èŒ¶èŠå¤©ã€‚åŸºæœ¬ä¸€å¤œéƒ½æ²¡ç¡å¥½ã€‚ä¸è¿‡ï¼Œå¹¸å¥½æ²¡ç¡å¥½ã€‚3ç‚¹å‡ºå¤´çš„æ—¶å€™ï¼Œå¬åˆ°ä»–ä»¬æ²¸è…¾èµ·æ¥ï¼Œå–Šç€çœ‹æ˜Ÿæ˜Ÿã€‚&lt;/p&gt;

&lt;p&gt;æ‰“å¼€å¸ç¯·ä¸€çœ‹ï¼Œé›¾éƒ½æ•£å¼€äº†ã€‚æ»¡å¤©ç¹æ˜Ÿï¼Œæ— ä¸€ç‚¹äº‘ï¼Œå®åœ¨ç¾å¦™ã€‚è¿˜çœ‹åˆ°å‡ é¢—æµæ˜Ÿã€‚è¿å¿™å«èµ·åŒä¼´ï¼Œèµ·æ¥çœ‹æ˜Ÿæ˜Ÿï¼Œæ‹å‡ å¼ çºªå¿µç…§ï¼Œæ€»ç®—ä¸æ‰æ­¤è¡Œã€‚æ²¡å¸¦è„šæ¶å¾ˆéš¾æ‰¾è§’åº¦ï¼Œå†›äº‹ä¸­å¿ƒçš„ç¯å…‰æ±¡æŸ“äº†ä¸€éƒ¨åˆ†å¤©åŒºã€‚æ—¶é—´æœ‰é™ï¼Œå‡†å¤‡ä¸è¶³æ‰€ä»¥ç…§ç‰‡éƒ½æ˜¯çºªå¿µç…§ã€‚æ²¡å¤šä¹…ï¼Œé›¾åˆæ¥äº†ã€‚å®‰å¿ƒèººä¸‹ä¼‘æ¯äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;æ˜Ÿç©º1.jpg&quot; alt=&quot;&quot; title=&quot;ç¯å…‰æ±¡æŸ“&quot; /&gt;&lt;/p&gt;

&lt;p&gt;5ç‚¹å¤šèµ·æ¥çœ‹äº†ä¸‹åˆéƒ½æ˜¯é›¾ï¼Œå®åœ¨å¤ªå›°ï¼Œå°±ä¸å»ç¢°è¿æ°”çœ‹æ—¥å‡ºäº†ã€‚äº‘æµ·å’Œé›¾çœŸçš„æ˜¯ä¸€çº¿ä¹‹é—´ã€‚è¿™ä¸ªæ—¶é—´æ®µæ²¡æœ‰äººæ¥ï¼Œåªæœ‰è¿œå¤„å‡ ä¸ªæ‘˜èŒ¶å·¥èŠå¤©çš„å£°éŸ³ï¼Œç»ˆäºèƒ½å®‰å®‰é™é™ç¡ä¸€è§‰äº†ã€‚
ä¸è¿‡åˆ°ä¸ƒç‚¹å¤šç¡ä¸ä¸‹å»äº†ï¼Œå°±èµ·æ¥åˆ·ç‰™åƒæ—©é¤ã€‚åŸæ¥å¤©æ± ä¹Ÿæ˜¯æœ‰å•æ‰€çš„ï¼Œå°±åœ¨éœ²è¥ç‚¹èµ°ä¸€æ®µæ¥¼æ¢¯å°±åˆ°äº†ã€‚è€Œä¸”å‰é¢å°±æ˜¯ä¸€å¤§ç‰‡è‰åœ°ï¼Œæ—©ä¸Šé›¾æ•£äº†ç»ˆäºçœ‹æ¸…æ¥šï¼Œæ˜¨æ™šè¿™ä¸ªè¥ç‚¹é€‰çš„å®åœ¨ä¸å¥½ã€‚åƒå®Œæ—©é¤åƒé›¶é£Ÿå–èŒ¶èŠå¤©ã€‚9ç‚¹å‡ºå¤´å°±æ”¶æ‹¾ä¸œè¥¿ï¼Œåˆ°å¤„é€›é€›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;å¹¿è§’.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å›ç¨‹å‡†å¤‡å»æ¢æ¢è¥¿åŒ—æ–¹å‘çš„è·¯ã€‚é¡ºä¾¿å»é‚£è¾¹çš„å¤©å­æ´ä¹‹ç±»çš„æ™¯ç‚¹ã€‚9ç‚¹å¤šçš„å¤ªé˜³å®åœ¨æ˜¯æ¯’è¾£ï¼Œæ²¿ç€å¤©æ± è¾¹èµ°ä¸€æ®µå°è·¯ï¼Œå·¦æ‰‹è¾¹è¿˜æœ‰ä¸¤ä¸ªæ± å¡˜ï¼Œç»è¿‡ä¸¤ä¸ªäº­ï¼Œåœ¨å†›äº‹é›·è¾¾ä¸‹æ–¹çš„é‚£ä¸ªäº­ä¼‘æ¯äº†ä¼šï¼Œçœ‹ä¼¼è·¯ç¨‹è¿˜å¾ˆè¿œï¼Œä¼¼ä¹ä¸å›ç¨‹çš„è·¯çº¿ä¸é€šï¼Œå¤ªé˜³åˆæ¯’è¾£ï¼Œä¾¿å†³å®šå¾€å›èµ°ï¼Œåˆ°è˜‘è‡äº­æ–¹å‘çš„å°è·¯å¾€ä¸Šèµ°ï¼Œä¾¿æ˜¯è¥¿åŒ—æ–¹å‘ä¸‹å±±çš„è·¯ã€‚&lt;/p&gt;

&lt;p&gt;è·¯æ˜¯æ™®é€šçš„å±±è·¯ï¼Œç¢çŸ³æ¯”è¾ƒå¤šã€‚èµ°åˆ°å°½å¤´å‡ºå¤§è·¯çš„æ—¶å€™è¢«ä¸€ä¸ªé“é—¨é”ä½äº†ï¼Œä¸¤è¾¹è¿˜å›´äº†é“ä¸ç½‘ã€‚ä¸è¿‡è¿™ä¸ªé“é—¨è½»æ˜“å°±ç¿»è¿‡å»ã€‚å¤§è·¯ä¹Ÿæ˜¯å±±åœŸè·¯ï¼Œèƒ½é€šè½¦ã€‚å…¨ç¨‹é‡åˆ°è¿‡ä¸¤è¾†è½¦ï¼Œä¸è¿‡é•¿äº†å¾ˆå¤šï¼Œå¾—ä¸¤å€æ™¯åŒºè·¯çº¿çš„è·ç¦»ï¼Œåœ°å›¾ä¸Šæµ‹è·å¤§æ¦‚ 2 å…¬é‡Œï¼Œä¸è¿‡è¿˜ç®—å¥½èµ°ï¼Œ11ç‚¹å‰é¡ºåˆ©è¾¾åˆ°åœè½¦åœºã€‚å¿«ç‚¹åœè½¦åœºçš„æ—¶å€™æˆ‘ä»¥ä¸ºå‡ºå£çš„è·¯ä¹Ÿè¢«å°äº†ï¼Œå“æ­»äº†ã€‚ä¾¿æ”¾ä¸‹è¡Œæå’ŒåŒä¼´å…ˆå»æ¢æ¢è·¯ï¼Œå¹¸å¥½æ˜¯çœ‹é”™äº†ï¼Œå°†é”™å°±é”™ç›´æ¥å¼€æ‘©æ‰˜å›æ¥æ¥åŒä¼´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;è·¯çº¿.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;é“é—¨.jpg&quot; alt=&quot;&quot; title=&quot;è¿™é‡Œä¸èƒ½é€šè¡Œ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹å±±çš„æ—¶å€™åˆæƒ³ç¢°ç¢°è¿æ°”ï¼Œä¾¿èµ°äº†æ–°è·¯ï¼Œæ–°è·¯æœ‰è·¯ç‰Œå†™æ˜ä¸å…è®¸æ‘©æ‰˜è½¦è¡Œé©¶ï¼Œé…’åº—é‚£é‡Œæœ‰è®¾å¡ï¼Œä¸è¿‡å¤§ä¸­åˆæ²¡æœ‰äººï¼Œè€Œä¸”è¿˜ç•™æœ‰ä¸€ä¸ªæ‘©æ‰˜è½¦å¯è¿‡çš„é€šé“ï¼Œæˆ‘å°±ä¸ç®¡ç›´æ¥é€šè¿‡äº†ã€‚å¿«åˆ°å‡¤å‡°é•‡çš„æ—¶å€™ä¹Ÿæœ‰ä¸€ä¸ªå¡å£ï¼Œä¸è¿‡åŒæ ·ç•™æœ‰ä¸€ä¸ªæ‘©æ‰˜è½¦å¯é€šè¿‡çš„å¡å£ï¼Œè¿˜æœ‰ä¿å®‰ã€‚è‡ªç„¶é•‡å®šæ…¢é€Ÿé€šè¿‡ï¼Œæ²¡æœ‰ä»€ä¹ˆäº‹ï¼Œæœ€åé¡ºåˆ©åˆ°è¾¾å‡¤å‡°é•‡ï¼Œèµ°æ–°è·¯ä¸‹å±±æœç„¶å¿«å¾ˆå¤šï¼Œæ…¢é€Ÿå®‰å…¨é©¾é©¶ä¹Ÿåªéœ€åŠå°æ—¶ä¸åˆ°ã€‚ç™½å¤©å¼€è½¦ä¹Ÿå¿«å¾ˆå¤šã€‚11ç‚¹ä»å¤©æ± åœè½¦åœºä¸‹æ¥ï¼Œ1 ç‚¹å°±åˆ°æ¨Ÿæ—ã€‚ç»“æŸäº†19ä¸ªå°æ—¶çš„å‡¤å‡°å±±ä¹‹æ—…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;æ–°è·¯è€è·¯.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å†™ä¸€ç¯‡æµæ°´è´¦è®°å½•ï¼Œç»™è‡ªå·±ä»¥åä¹Ÿç»™æœ‰éœ€è¦çš„æœ‹å‹ä¸€äº›å‚è€ƒï¼Œå®¢è§‚ä¸Šä¹Ÿé€éœ²äº†ä¸€äº›é€ƒç¥¨çš„å‚è€ƒä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯æˆ‘é¼“åŠ±é€ƒç¥¨ï¼Œå¦‚æœå¯ä»¥è¿˜è¯·èŠ±é’±ä¹°ç¥¨æ”¯æŒå½“åœ°çš„æ—…æ¸¸ä¸šå’Œç¯å¢ƒä¿æŠ¤ã€‚ä¸è¿‡å¯¹äºä¸­å›½æ™¯åŒºçš„ç§äººç»è¥ã€æ”¶è´¹è¿‡é«˜ã€å•†ä¸šåŒ–è¿ä½œè¿‡é‡çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æ·±ç—›æ¶ç»ï¼ˆå¹¶éæŒ‡å¤©æ± ï¼‰ï¼Œæ‰€ä»¥å¯¹äºé€ƒç¥¨è¡Œä¸ºä¹Ÿæ˜¯åªèƒ½ä¸äºˆç½®è¯„äº†ã€‚&lt;/p&gt;</content><author><name></name></author><category term="life" /><category term="å‡¤å‡°å±±" /><category term="æ‘©æ—…" /><category term="æ˜Ÿç©º" /><summary type="html">20 å·å¤œ 6 ç‚¹åŠä»æ±•å¤´å¸‚åŒºå‡ºå‘å¤œéª‘å‡¤å‡°å±±ã€‚19ï¼š17 åˆ°è¾¾æ¨Ÿæ—ï¼Œ335 çœé“è²åæ®µçš„è·¯å†µä¸æ˜¯å¤ªå¥½ï¼Œè·¯çª„å¤§è½¦å¤šï¼Œæ°´æ³¥è·¯é¢å¤šå¤„ç ´è£‚ï¼Œ50å·¦å³é€Ÿåº¦è¿‡ä¸€å¤„ä¸å¹³è·¯é¢æ—¶ï¼Œè¿™æ¬¡é¢ ç°¸æ„Ÿè§‰åˆ°å‰è½®æœ‰è¢«ã€è›‡å’¬ã€çš„å¯èƒ½æ€§ï¼Œä¸€è·¯æœ‰ç‚¹æ‹…å¿ƒçˆ†èƒã€‚åˆ°æ„ä¸œé•‡åï¼Œæƒ³åˆ°æ¥ä¸‹æ¥è¦ç¦»å¼€å¸‚åŒºï¼Œé è¾¹åœè½¦æ£€æŸ¥ä¸€ä¸‹è½¦å†µï¼Œå‘ç°å‰è½®èƒå‹ä¸è¶³ã€‚å¼€å§‹æœ‰ç‚¹æ‹…å¿ƒæ˜¯ä¸æ˜¯ç ´èƒæ³„æ°”ï¼Œä¸è¿‡æƒ³åˆ°å‰è½®ä¸Šæ¬¡æ‰“æ°”ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œèµ·ç å¾—ä¸€å¹´ä»¥ä¸Šï¼Œè¯´ä¸å®šä¹°è½¦å°±æ²¡æ‰“è¿‡ï¼ˆğŸ˜ï¼‰ã€‚è¿˜æ˜¯è‡ªç„¶æ³„æ°”çš„å¯èƒ½æ€§å¤§ä¸€ç‚¹ã€‚åˆšå¥½å‰æ–¹ä¸è¿œæ„ä¸œä¸‰è·¯å’ŒåŒ—æ¡¥è·¯çº¢ç¯è·¯å£æœ‰ä¸€å®¶æ–°æœ¬åº—ï¼Œä¾¿è·‘å»æ‰“äº†æ°”ï¼Œåº—ä¸»äººä¸é”™ä¹Ÿæ²¡æ”¶é’±ï¼Œæ£€æŸ¥äº†ä¸‹æ²¡ä»€ä¹ˆé—®é¢˜å°±ç»§ç»­å‡ºå‘äº†ï¼Œå‡†å¤‡å¼€ä¸€æ®µå†çœ‹çœ‹èƒå‹ï¼Œæœ€åæƒ…å†µå°±åœ¨å‡¤å‡°å±±ä½å®¿ã€‚æ‘©æ‰˜è½¦èƒæ²¡æœ‰å…¬è·¯è½¦èƒé‚£ä¹ˆçŸ«æƒ…ï¼ˆäº‹å®è¯æ˜ç£•äº†ä¸€ä¸‹æ²¡å½±å“ï¼Œè½¦åœ¨å±±ä¸Šåœäº†ä¸€å¤œæ°”è¿˜æ˜¯é¥±çš„ï¼‰ è¿‡äº†æ–‡ç¥ é•‡å°±æ˜¯å±±è·¯äº†ï¼Œå±±è·¯åŸºæœ¬æ²¡æœ‰è·¯ç¯ï¼Œä¸€è·¯è¿œå…‰ï¼Œä¼šè½¦è‡ªè§‰å…³ç¯ï¼Œä½†è¿é¢æ¥çš„æ±½è½¦èƒ½åšåˆ°è‡ªè§‰å…³ç¯ä¸åˆ°ä¸‰æˆï¼Œç—›æ¨ä¸å·²ï¼Œé‡åˆ°ä¸å…³ç¯ï¼Œä¸ºäº†é¿å…ä¼šè½¦åçš„çŸ­æš‚å¤±æ˜ï¼Œåªèƒ½ä½å¤´å‡é€Ÿã€‚æœ‰ä¸€å¤„ä¸€è¾¹è·¯é¢ä¿®è·¯å°æ‰ï¼Œè¿é¢æ¥çš„æ±½è½¦è¿˜ä¸å…³ç¯ï¼Œç®€ç›´æ˜¯è°‹æ€ï¼Œå¹¸å¥½é€Ÿåº¦è¶³å¤Ÿä½æ‰èƒ½é¿å…è¿™äº›å±é™©ã€‚ä¸è¿‡è¿™æ®µè·¯è¿˜æ˜¯å¾—èŠ±å¤šç™½å¤©ä¸€å€çš„æ—¶é—´ã€‚ å¤§æ¦‚ 9 ç‚¹åˆ°å‡¤å‡°é•‡ï¼Œåœ¨ 201 ä¹¡é“åœç•™ä¼‘æ¯äº†ä¸€ä¸‹ï¼Œå¼€å§‹èµ°è€è·¯ä¸Šå±±ã€‚æ™šä¸Šèµ°è€è·¯è¿˜æ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ï¼Œè€Œä¸”å¿«åˆ°å‡¤æºªæ°´åº“é‚£è¾¹ï¼Œæ‘©æ‰˜è½¦å¼€å§‹å‡ºç°å¼‚å“ï¼ˆå¾€å³å‹å¼¯ä¼šå‡ºç°ï¼‰ï¼Œè™½ç„¶å¤§æ¦‚çŸ¥é“æ˜¯é“¾æ¡å¤ªæ¾äº†ï¼Œä¸è¿‡å¬ç€è¿˜æ˜¯å¾ˆç´§å¼ ã€‚çˆ¬å‡é«˜ä¸€ç‚¹å¼€å§‹æœ‰é›¾ï¼Œå½“æ™šæœ¬æ¥æœ‰æœˆçš„ï¼ˆå…«æœˆåä¸€ï¼‰ï¼Œä¸è¿‡åœ¨äº‘é‡Œå¼€è½¦ï¼Œèƒ½è§åº¦å¾ˆå·®ï¼Œæœ‰å‡ æ¬¡æ‹å¼¯ï¼Œä»¥ä¸ºå¼¯é“è¦å®Œäº†ç»“æœè¿˜æ²¡æœ‰ï¼Œåªèƒ½æ€¥å¿™åˆ¹è½¦å‡é€Ÿã€‚è¿˜æœ‰ä¸€æ¬¡ä»¥ä¸ºè½¦è¾†è¦å¤±æ§äº†ï¼Œè¿˜ç”¨è„šè¸©ä¸€ä¸‹åœ°é¢ä¿æŒå¹³è¡¡ã€‚åé¢å°±ä¸æ•¢åˆ†ç¥å’Œåé¢é‚£ä½å¨å¨ï¼Œç²¾ç¥é«˜åº¦é›†ä¸­ï¼Œè€è·¯ä¸¤è¾¹æœ‰ä¸å°‘æˆ¿å­ï¼Œå±±ä¸Šäººå®¶å¤§å¤šæ—©æ—©ä¼‘æ¯ã€‚åˆ°äº†ä¹Œå´¬æ‘å·¦æ‹å¾€å¤©æ± æ–¹å‘çš„æ—¶å€™ï¼Œæ‘©æ‰˜è½¦åˆšå¥½å¼€åˆ°äº‘ä¸Šé¢ï¼Œè±ç„¶å¼€æœ—ï¼Œæ»¡å¤©ç¹æ˜Ÿï¼Œæœˆå…‰ä¸‹å‘¨å›´æ˜¯æœ›ä¸åˆ°è¾¹é™…çš„äº‘æµ·ï¼Œä¸è¿œå¤„çš„å±±å³°è€¸ç«‹åœ¨äº‘æµ·ä¸Šæ–¹ï¼Œå¤œå¹•ä¸‹æ˜¾å¾—å£®è§‚åˆå¯æ€–ã€‚å› ä¸ºæ—¶é—´å¤ªæ™šï¼Œåˆå¿«åˆ°é¡¶äº†ï¼Œä¾¿æ²¡æœ‰åœè½¦æ‹ç…§ï¼Œå®åœ¨å¯æƒœï¼Œ10ç‚¹å·¦å³åˆ°å¤©æ± å…¥å£åœè½¦åœºæ—¶åˆšåœå¥½è½¦äº‘é›¾åˆæ¥äº†ã€‚ å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿çˆ¬å¤©æ± çš„æ—¶å€™ï¼Œå‘ç°å±…ç„¶å¿˜äº†å¸¦æ°´è¢‹ï¼Œåˆ—å¥½äº†æ¸…å•äº‹æ— å·¨ç»†ï¼Œä¸€ä»¶ä»¶æ‰“é’©å°±æ˜¯å¿˜äº†æŠŠæ°´è¢‹æ”¾è¿›ä¹¦åŒ…é‡Œï¼Œ10 ç‚¹çš„åœè½¦åœºå”®ç¥¨å¤„éƒ½å·²æ²¡æœ‰äººï¼Œç»•äº†ä¸€åœˆæ‰¾ä¸åˆ°å•†é“ºæˆ–è€…è£…æ°´çš„å®¹å™¨ã€‚æœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œæ—¢ç„¶æ²¡å¸¦æ°´è¢‹ï¼Œé‚£å°±çµæ´»å˜é€šå°†é”™å°±é”™ã€‚è§£å†³æ™šé¤å†ä¸Šå»ã€‚ç›´æ¥åœ¨æ™¯åŒºé—¨å£é“ºä¸Šé˜²æ½®å«ï¼Œå¸­åœ°è€Œåã€‚åœ°é¢å¹³ï¼Œç¦»å…¬å•è¿‘ï¼Œæ¥æ°´æ´—é”…éƒ½æ–¹ä¾¿ã€‚ åƒå®Œåˆ·äº†ç‰™ï¼Œå¸¦ä¸Šå¤´ç¯ç»§ç»­ä¸Šè·¯ï¼Œå”®ç¥¨å¤„æ²¡æœ‰äººï¼Œé—¨è¿˜ç•™äº†æ¡é€šé“ï¼Œç›´æ¥å°±é€ƒç¥¨ä¸Šå»äº†ã€‚å…¶å®å°±ç®—é—¨æ²¡å…³è¿˜æ˜¯å¯ä»¥ä»å”®ç¥¨å¤„åè¾¹ç»•è¿‡å»çš„ã€‚è¿™é‡Œåˆ°å¤©æ± å¤§æ¦‚æ˜¯ 1200mï¼Œåœ¨800mã€200m å¤„éƒ½æœ‰è·¯ç‰Œæç¤ºã€‚å…¨ç¨‹çŸ³æ¢¯å’Œå›´æ ï¼Œé›¾éå¸¸æµ“ï¼Œå¤§åŠŸç‡å¤´ç¯ä¹Ÿç…§ä¸æ¸…2ç±³å¤–ï¼Œæ…¢æ…¢èµ°åå‡ äºŒååˆ†é’Ÿå°±èƒ½åˆ°å¤©æ± ï¼Œæ€»çš„æ¥è¯´ä¸ç®—é™¡ï¼Œåœ°å›¾ä¸Šçœ‹çˆ¬å‡å¤§æ¦‚ 130mã€‚ çˆ¬ä¸Šå»å°±çœ‹åˆ°é›¾é‡Œæœ‰äº®å…‰ï¼Œéšç€ç¯å…‰èµ°è¿‡å»ï¼ŒåŸæ¥æ˜¯å¦ä¸€ä¼™éœ²è¥çš„äººã€‚å‡ ç”·å‡ å¥³ï¼Œä¸¤ä¸ªå¸ç¯·ã€‚ä»–ä»¬åœ¨èµ°å»Šä¸‹éœ²è¥ï¼Œæ‰“äº†ä¸‹æ‹›å‘¼ï¼Œå°±ç»§ç»­æ²¿ç€èµ°å»Šèµ°ã€‚å°±åœ¨è¿‡äº†äº­åçš„å¹³åœ°ï¼ŒæŠµç€ä¸¤ä¸ªçŸ³å¤´çš„åœ°æ–¹æ­èµ·å¸ç¯·ã€‚å› ä¸ºé›¾å¤ªé‡ä¸æ•¢ä¹±èµ°ï¼Œäººä¹Ÿå¤ªç´¯ï¼Œå¿ƒå¿µå¿µçš„è–¯ç‰‡éƒ½æ²¡åƒå°±èººä¸‹äº†ã€‚è¿™ä¸ªå¸ç¯·ä½ç½®é€‰çš„å®åœ¨ä¸å¥½ï¼Œç¦»é‚£ä¼™äººå¤ªè¿‘ï¼Œä»–ä»¬ä¸€æ™šä¸Šéƒ½åœ¨èŠå¤©ï¼Œåœ¨å¤©æ± é‡ŒæŠ“é±¼è¿˜å¤§å£°åš·åš·ã€‚4 ç‚¹å¤šçš„æ—¶å€™åˆæœ‰ä¸€ä¼™äººåœ¨äº­é‡Œä¼‘æ¯å–èŒ¶èŠå¤©ã€‚åŸºæœ¬ä¸€å¤œéƒ½æ²¡ç¡å¥½ã€‚ä¸è¿‡ï¼Œå¹¸å¥½æ²¡ç¡å¥½ã€‚3ç‚¹å‡ºå¤´çš„æ—¶å€™ï¼Œå¬åˆ°ä»–ä»¬æ²¸è…¾èµ·æ¥ï¼Œå–Šç€çœ‹æ˜Ÿæ˜Ÿã€‚ æ‰“å¼€å¸ç¯·ä¸€çœ‹ï¼Œé›¾éƒ½æ•£å¼€äº†ã€‚æ»¡å¤©ç¹æ˜Ÿï¼Œæ— ä¸€ç‚¹äº‘ï¼Œå®åœ¨ç¾å¦™ã€‚è¿˜çœ‹åˆ°å‡ é¢—æµæ˜Ÿã€‚è¿å¿™å«èµ·åŒä¼´ï¼Œèµ·æ¥çœ‹æ˜Ÿæ˜Ÿï¼Œæ‹å‡ å¼ çºªå¿µç…§ï¼Œæ€»ç®—ä¸æ‰æ­¤è¡Œã€‚æ²¡å¸¦è„šæ¶å¾ˆéš¾æ‰¾è§’åº¦ï¼Œå†›äº‹ä¸­å¿ƒçš„ç¯å…‰æ±¡æŸ“äº†ä¸€éƒ¨åˆ†å¤©åŒºã€‚æ—¶é—´æœ‰é™ï¼Œå‡†å¤‡ä¸è¶³æ‰€ä»¥ç…§ç‰‡éƒ½æ˜¯çºªå¿µç…§ã€‚æ²¡å¤šä¹…ï¼Œé›¾åˆæ¥äº†ã€‚å®‰å¿ƒèººä¸‹ä¼‘æ¯äº†ã€‚ 5ç‚¹å¤šèµ·æ¥çœ‹äº†ä¸‹åˆéƒ½æ˜¯é›¾ï¼Œå®åœ¨å¤ªå›°ï¼Œå°±ä¸å»ç¢°è¿æ°”çœ‹æ—¥å‡ºäº†ã€‚äº‘æµ·å’Œé›¾çœŸçš„æ˜¯ä¸€çº¿ä¹‹é—´ã€‚è¿™ä¸ªæ—¶é—´æ®µæ²¡æœ‰äººæ¥ï¼Œåªæœ‰è¿œå¤„å‡ ä¸ªæ‘˜èŒ¶å·¥èŠå¤©çš„å£°éŸ³ï¼Œç»ˆäºèƒ½å®‰å®‰é™é™ç¡ä¸€è§‰äº†ã€‚ ä¸è¿‡åˆ°ä¸ƒç‚¹å¤šç¡ä¸ä¸‹å»äº†ï¼Œå°±èµ·æ¥åˆ·ç‰™åƒæ—©é¤ã€‚åŸæ¥å¤©æ± ä¹Ÿæ˜¯æœ‰å•æ‰€çš„ï¼Œå°±åœ¨éœ²è¥ç‚¹èµ°ä¸€æ®µæ¥¼æ¢¯å°±åˆ°äº†ã€‚è€Œä¸”å‰é¢å°±æ˜¯ä¸€å¤§ç‰‡è‰åœ°ï¼Œæ—©ä¸Šé›¾æ•£äº†ç»ˆäºçœ‹æ¸…æ¥šï¼Œæ˜¨æ™šè¿™ä¸ªè¥ç‚¹é€‰çš„å®åœ¨ä¸å¥½ã€‚åƒå®Œæ—©é¤åƒé›¶é£Ÿå–èŒ¶èŠå¤©ã€‚9ç‚¹å‡ºå¤´å°±æ”¶æ‹¾ä¸œè¥¿ï¼Œåˆ°å¤„é€›é€›ã€‚ å›ç¨‹å‡†å¤‡å»æ¢æ¢è¥¿åŒ—æ–¹å‘çš„è·¯ã€‚é¡ºä¾¿å»é‚£è¾¹çš„å¤©å­æ´ä¹‹ç±»çš„æ™¯ç‚¹ã€‚9ç‚¹å¤šçš„å¤ªé˜³å®åœ¨æ˜¯æ¯’è¾£ï¼Œæ²¿ç€å¤©æ± è¾¹èµ°ä¸€æ®µå°è·¯ï¼Œå·¦æ‰‹è¾¹è¿˜æœ‰ä¸¤ä¸ªæ± å¡˜ï¼Œç»è¿‡ä¸¤ä¸ªäº­ï¼Œåœ¨å†›äº‹é›·è¾¾ä¸‹æ–¹çš„é‚£ä¸ªäº­ä¼‘æ¯äº†ä¼šï¼Œçœ‹ä¼¼è·¯ç¨‹è¿˜å¾ˆè¿œï¼Œä¼¼ä¹ä¸å›ç¨‹çš„è·¯çº¿ä¸é€šï¼Œå¤ªé˜³åˆæ¯’è¾£ï¼Œä¾¿å†³å®šå¾€å›èµ°ï¼Œåˆ°è˜‘è‡äº­æ–¹å‘çš„å°è·¯å¾€ä¸Šèµ°ï¼Œä¾¿æ˜¯è¥¿åŒ—æ–¹å‘ä¸‹å±±çš„è·¯ã€‚ è·¯æ˜¯æ™®é€šçš„å±±è·¯ï¼Œç¢çŸ³æ¯”è¾ƒå¤šã€‚èµ°åˆ°å°½å¤´å‡ºå¤§è·¯çš„æ—¶å€™è¢«ä¸€ä¸ªé“é—¨é”ä½äº†ï¼Œä¸¤è¾¹è¿˜å›´äº†é“ä¸ç½‘ã€‚ä¸è¿‡è¿™ä¸ªé“é—¨è½»æ˜“å°±ç¿»è¿‡å»ã€‚å¤§è·¯ä¹Ÿæ˜¯å±±åœŸè·¯ï¼Œèƒ½é€šè½¦ã€‚å…¨ç¨‹é‡åˆ°è¿‡ä¸¤è¾†è½¦ï¼Œä¸è¿‡é•¿äº†å¾ˆå¤šï¼Œå¾—ä¸¤å€æ™¯åŒºè·¯çº¿çš„è·ç¦»ï¼Œåœ°å›¾ä¸Šæµ‹è·å¤§æ¦‚ 2 å…¬é‡Œï¼Œä¸è¿‡è¿˜ç®—å¥½èµ°ï¼Œ11ç‚¹å‰é¡ºåˆ©è¾¾åˆ°åœè½¦åœºã€‚å¿«ç‚¹åœè½¦åœºçš„æ—¶å€™æˆ‘ä»¥ä¸ºå‡ºå£çš„è·¯ä¹Ÿè¢«å°äº†ï¼Œå“æ­»äº†ã€‚ä¾¿æ”¾ä¸‹è¡Œæå’ŒåŒä¼´å…ˆå»æ¢æ¢è·¯ï¼Œå¹¸å¥½æ˜¯çœ‹é”™äº†ï¼Œå°†é”™å°±é”™ç›´æ¥å¼€æ‘©æ‰˜å›æ¥æ¥åŒä¼´ã€‚ ä¸‹å±±çš„æ—¶å€™åˆæƒ³ç¢°ç¢°è¿æ°”ï¼Œä¾¿èµ°äº†æ–°è·¯ï¼Œæ–°è·¯æœ‰è·¯ç‰Œå†™æ˜ä¸å…è®¸æ‘©æ‰˜è½¦è¡Œé©¶ï¼Œé…’åº—é‚£é‡Œæœ‰è®¾å¡ï¼Œä¸è¿‡å¤§ä¸­åˆæ²¡æœ‰äººï¼Œè€Œä¸”è¿˜ç•™æœ‰ä¸€ä¸ªæ‘©æ‰˜è½¦å¯è¿‡çš„é€šé“ï¼Œæˆ‘å°±ä¸ç®¡ç›´æ¥é€šè¿‡äº†ã€‚å¿«åˆ°å‡¤å‡°é•‡çš„æ—¶å€™ä¹Ÿæœ‰ä¸€ä¸ªå¡å£ï¼Œä¸è¿‡åŒæ ·ç•™æœ‰ä¸€ä¸ªæ‘©æ‰˜è½¦å¯é€šè¿‡çš„å¡å£ï¼Œè¿˜æœ‰ä¿å®‰ã€‚è‡ªç„¶é•‡å®šæ…¢é€Ÿé€šè¿‡ï¼Œæ²¡æœ‰ä»€ä¹ˆäº‹ï¼Œæœ€åé¡ºåˆ©åˆ°è¾¾å‡¤å‡°é•‡ï¼Œèµ°æ–°è·¯ä¸‹å±±æœç„¶å¿«å¾ˆå¤šï¼Œæ…¢é€Ÿå®‰å…¨é©¾é©¶ä¹Ÿåªéœ€åŠå°æ—¶ä¸åˆ°ã€‚ç™½å¤©å¼€è½¦ä¹Ÿå¿«å¾ˆå¤šã€‚11ç‚¹ä»å¤©æ± åœè½¦åœºä¸‹æ¥ï¼Œ1 ç‚¹å°±åˆ°æ¨Ÿæ—ã€‚ç»“æŸäº†19ä¸ªå°æ—¶çš„å‡¤å‡°å±±ä¹‹æ—…ã€‚ å†™ä¸€ç¯‡æµæ°´è´¦è®°å½•ï¼Œç»™è‡ªå·±ä»¥åä¹Ÿç»™æœ‰éœ€è¦çš„æœ‹å‹ä¸€äº›å‚è€ƒï¼Œå®¢è§‚ä¸Šä¹Ÿé€éœ²äº†ä¸€äº›é€ƒç¥¨çš„å‚è€ƒä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯æˆ‘é¼“åŠ±é€ƒç¥¨ï¼Œå¦‚æœå¯ä»¥è¿˜è¯·èŠ±é’±ä¹°ç¥¨æ”¯æŒå½“åœ°çš„æ—…æ¸¸ä¸šå’Œç¯å¢ƒä¿æŠ¤ã€‚ä¸è¿‡å¯¹äºä¸­å›½æ™¯åŒºçš„ç§äººç»è¥ã€æ”¶è´¹è¿‡é«˜ã€å•†ä¸šåŒ–è¿ä½œè¿‡é‡çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æ·±ç—›æ¶ç»ï¼ˆå¹¶éæŒ‡å¤©æ± ï¼‰ï¼Œæ‰€ä»¥å¯¹äºé€ƒç¥¨è¡Œä¸ºä¹Ÿæ˜¯åªèƒ½ä¸äºˆç½®è¯„äº†ã€‚</summary></entry><entry><title type="html">è¯» Clean Architecture</title><link href="http://dourok.info/2018/07/08/clean-architecture/" rel="alternate" type="text/html" title="è¯» Clean Architecture" /><published>2018-07-08T00:00:00+00:00</published><updated>2018-09-27T03:55:25+00:00</updated><id>http://dourok.info/2018/07/08/clean-architecture</id><content type="html" xml:base="http://dourok.info/2018/07/08/clean-architecture/">&lt;h1 id=&quot;æ¶æ„æ˜¯ä»€ä¹ˆ&quot;&gt;æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;The boxes on a PowerPoint diagram are not a software systemâ€™s architecture.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿‘æ¥è¯»äº† Uncle Bob çš„ ã€Šæ¸…æ™°æ¶æ„ã€‹(Clean Architecture)ï¼Œå‰¯æ ‡é¢˜å«ã€ä¸€ä¸ªå·¥åŒ çš„è½¯ä»¶ç»“æ„ä¸è®¾è®¡æŒ‡å—ã€ï¼Œè‡ªç§°ä¸ºå·¥åŒ çš„ Uncle Bob å…¨åå« &lt;a href=&quot;https://en.wikipedia.org/wiki/Robert_C._Martin&quot;&gt;Robert C. Martin&lt;/a&gt;ï¼Œæ˜¯ä¸€ä½æœ‰ 50 å¤šå¹´ç»éªŒçš„è½¯ä»¶å·¥ç¨‹å¸ˆå’Œä½œè€…ã€‚ä»–æ˜¯ SOLID åŸåˆ™çš„å‘½åè€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ã€Š&lt;a href=&quot;https://book.douban.com/subject/1140457/&quot;&gt;æ•æ·è½¯ä»¶å¼€å‘&lt;/a&gt;ã€‹ã€ã€Š&lt;a href=&quot;https://book.douban.com/subject/4199741/&quot;&gt;ä»£ç æ•´æ´ä¹‹é“&lt;/a&gt;ã€‹çš„ä½œè€…ã€‚ã€Šæ¸…æ™°æ¶æ„ã€‹æ˜¯ 17 å¹´å‡ºç‰ˆçš„ä¹¦ä¹Ÿç®—æ˜¯ä»Šå¹´è¯»çš„æ¯”è¾ƒæ–°çš„ä¹¦äº†ã€‚å…¨ä¹¦åˆ† 35 ç« ï¼Œè¿‘ 400 é¡µï¼Œè™½è¯´ä¹Ÿä¸ç®—ç‰¹åˆ«å¤šï¼Œä¸è¿‡å•ƒä¸‹è‹±æ–‡ç‰ˆä¹Ÿé¢‡ä¸ºåƒåŠ›ã€‚æœ¬ä¹¦å¬èµ·æ¥åƒæ˜¯ä¸“ä¸šè½¯ä»¶æ¶æ„è®ºè¿°ï¼Œå…¶å®æ›´åƒæ˜¯ä½œè€…çš„æ‚è°ˆï¼Œä¸å°‘å†…å®¹éƒ½å¯ä»¥åœ¨ä½œè€…è¿‡å»çš„åšå®¢æ‰¾åˆ°ã€‚å…¶ä¸­çš„è½¯ä»¶å¼€å‘å“²å­¦çš„æ•…äº‹è®©æˆ‘å¾ˆæ„Ÿå…´è¶£ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¶æ„å‘¢ï¼Ÿä½œä¸ºä¸€ä¸ªå¸¸å¸¸æŠŠæ¶æ„æŒ‚åœ¨å˜´è¾¹çš„äººï¼Œè¦ç»™æ¶æ„ä¸‹ä¸ªå®šä¹‰è¿˜çœŸä¸å®¹æ˜“ã€‚ä¹¦ä¸­ Uncle Bob ç»™äº†ä¸€ä¸ªå¾ˆæ£’çš„å®šä¹‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è½¯ä»¶æ¶æ„æ˜¯æŒ‡ï¼Œè®¾è®¡è½¯ä»¶çš„äººä¸ºè½¯ä»¶èµ‹äºˆçš„å½¢çŠ¶ï¼Œè¿™ä¸ªå½¢çŠ¶æ˜¯æŒ‡ç³»ç»Ÿå¦‚ä½•è¢«åˆ’åˆ†ä¸º&lt;strong&gt;ç»„ä»¶(Components)&lt;/strong&gt;ï¼Œå„ä¸ªç»„ä»¶å¦‚ä½•&lt;strong&gt;æ’åˆ—ï¼ˆArrangementï¼‰&lt;/strong&gt;ï¼Œç»„ä»¶ä¹‹é—´å¦‚ä½•&lt;strong&gt;æ²Ÿé€šï¼ˆCommunicationï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://www.inoreader.com/article/3a9c6e7ec00599d2-clean-architecture1&quot;&gt;æç¬‘æè½¯å·¥&lt;/a&gt;ç”¨äº†å…¬å¸çš„ç»„ç»‡æ¶æ„æ¥ç±»æ¯”ï¼Œæˆ‘è§‰å¾—éå¸¸å½¢è±¡ï¼šä¸€ä¸ªä¸­å‹å…¬å¸æœ‰è‘£äº‹ä¼šã€è‘£äº‹é•¿ã€è‘£äº‹ä¼šã€æ€»ç»ç†ã€éƒ¨é—¨ã€ç»„ç­‰ï¼Œä»¥åŠå„éƒ¨é—¨é‡Œé¢çš„å‘˜å·¥ï¼Œç”±æ­¤å½¢æˆç»„ç»‡æ¶æ„å›¾ã€‚å¯ä»¥çœ‹å‡ºæ‰€æœ‰çš„æ¶æ„ä¸€å®šæœ‰ä¸‰ä¸ªä¸œè¥¿ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ„æˆç»„ç»‡çš„å•å…ƒï¼Œä¹Ÿå°±æ˜¯ä¸åŒèŒèƒ½çš„å‘˜å·¥ã€‚&lt;/li&gt;
  &lt;li&gt;äººå‘˜çš„å®‰æ’ï¼Œé˜¶å±‚å¼ã€æ‰å¹³å¼ã€çŸ©é˜µå¼ï¼Œç­‰ç­‰ã€‚&lt;/li&gt;
  &lt;li&gt;äººå‘˜æ²Ÿé€šçš„æ–¹å¼ï¼Œç›´æ¥æ²Ÿé€šã€é€è¿‡éƒ¨é—¨ä¸»ç®¡æˆ–PMä¸å…¶ä»–éƒ¨é—¨æˆ–å¤–éƒ¨å®¢æˆ·ä¸å‚å•†æ²Ÿé€šã€ç¦æ­¢æ²Ÿé€šã€åœ£ä¸Šå‚è¯¢æ‰å¯å¼€å£ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é™¤äº†ç»„ç»‡æ¶æ„å¤–ï¼Œå…¬å¸è¿˜æœ‰ä»–çš„ä¸šåŠ¡ï¼Œä¸šåŠ¡ä¸æ¶æ„æ˜¯å†³å®šä¸€å®¶å…¬å¸çš„ä¸¤ä¸ªç»´åº¦ï¼Œä¸¤è€…çœ‹ä¼¼æ­£äº¤ï¼Œå®é™…å½“æˆ‘ä»¬çœ‹åˆ°ä¸€å®¶å…¬å¸çš„æ¶æ„å›¾ï¼Œæˆ‘ä»¬å¤§æ¦‚ä¹Ÿèƒ½çŒœå‡ºä¸€æ˜ŸåŠç‚¹å…¬å¸çš„ä¸šåŠ¡ï¼Œæ³•åŠ¡éƒ¨æˆ–è¡Œæ”¿éƒ¨å¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆï¼Œä½†ç§»åŠ¨å¼€å‘éƒ¨å¾ˆæ˜æ˜¾å–Šç€å…¬å¸æœ‰ç€ç§»åŠ¨å¼€å‘çš„ä¸šåŠ¡ï¼ˆ&lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2011/09/30/Screaming-Architecture.html&quot;&gt;Screaming Architecture&lt;/a&gt;ï¼‰ã€‚å¾€å¾€ä¸šåŠ¡çš„å‘å±•ä¼šå¯¼è‡´æ¶æ„çš„æ¼”åŒ–ï¼Œæ¶æ„çš„æ¼”åŒ–åè¿‡æ¥ä¿ƒè¿›ä¸šåŠ¡çš„å‘å±•ã€‚&lt;/p&gt;

&lt;p&gt;è½¯ä»¶ç³»ç»Ÿä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œè½¯ä»¶æœ‰ä¸¤ä¸ªé‡ï¼ˆValueï¼‰ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è½¯ä»¶çš„åŠŸèƒ½æˆ–è¡Œä¸ºï¼Œå°±æ˜¯ä¸šåŠ¡&lt;/li&gt;
  &lt;li&gt;è½¯ä»¶çš„å½¢çŠ¶æˆ–è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¶æ„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŠŸèƒ½è¡¡é‡ç³»ç»Ÿèƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Ÿæ¶æ„æ„å‘³ç€ç³»ç»Ÿæ˜¯å¦æ˜“äºå˜åŒ–ã€‚åŠŸèƒ½æ¶æ„å­°é‡è¦ï¼Ÿä½œè€…åœ¨ä¹¦ä¸­ç”¨äº†æ§åˆ¶å˜é‡æ³•æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªç³»ç»Ÿï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸€ä¸ªç³»ç»Ÿèƒ½å®Œå…¨çš„æ»¡è¶³éœ€æ±‚ä½†æ˜¯ä¸å¯å˜ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸€ä¸ªç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨ï¼Œä½†æ˜¯æ˜“äºæ”¹å˜ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¤§éƒ¨åˆ†äººç›´è§‰ä¸Šä¼šé€‰æ‹©é‚£ä¸ªé©¬ä¸Šå°±èƒ½è·‘èµ·æ¥çš„ç³»ç»Ÿã€‚ä½†å“ªä¸ªç³»ç»Ÿæ›´æ²¡ç”¨å‘¢ï¼Ÿç¬¬ä¸€ä¸ªç³»ç»Ÿè™½ç„¶èƒ½ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦éœ€æ±‚å˜åŒ–äº†ä¾¿ä¸èƒ½ç”¨äº†ï¼Œå¯èƒ½æœ‰ç‚¹æ¯”è¾ƒéš¾æƒ³è±¡ï¼Œæ¢å¥è¯è¯´æ˜¯ä¿®æ”¹ç³»ç»Ÿçš„æˆæœ¬é«˜äºä¿®æ”¹ç³»ç»Ÿçš„æ”¶ç›Šï¼Œå› ä¸ºä»–éå¸¸éš¾ä»¥æ›´æ”¹ã€‚ç¬¬äºŒä¸ªç³»ç»Ÿè™½ç„¶ä¸èƒ½æ»¡è¶³ä¸šåŠ¡éœ€è¦ï¼Œä½†æ˜¯å®ƒå¯ä»¥æŒç»­æ”¹å–„å¹¶æœ€ç»ˆå˜å¾—æœ‰ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è‹¥è¯´æ¶æ„æ¯”åŠŸèƒ½è¿˜æœ‰ä»·å€¼ï¼Œåˆä¸åˆå¸¸ç†ï¼Œä¸€ä¸ªç²¾é›•ç»†ç¢çš„æ²¡æœ‰ä»·å€¼çš„è½¯ä»¶ï¼Œæ²¡æœ‰é‡‘ä¸»ä¼šä¸ºå®ƒåŸ‹å•å“ªèƒ½è¯ç”Ÿï¼Ÿé™¤éæ˜¯ã€è½¯ä»¶è‰ºæœ¯å®¶ã€çš„è‡ªå‘è¡Œä¸ºã€‚å¯¹ä¸€å®¶è½¯ä»¶å…¬å¸æ¥è¯´ï¼Œè½¯ä»¶æ˜¯å…¶äº§å“ï¼Œäº§å“è¦å¸¦æ¥æ”¶ç›Šï¼Œæ‰€ä»¥åŠŸèƒ½ä»æ˜¯è½¯ä»¶çš„ç¬¬ä¸€ä»·å€¼ï¼ŒåŠŸèƒ½æ˜¯è½¯ä»¶èƒ½äº§ç”Ÿä»·å€¼çš„éƒ¨åˆ†ã€‚å…³ç³»åˆ°æˆ‘ä»¬çš„é‡‘ä¸»èƒ½ä¸èƒ½èµšåˆ°é’±ã€‚æ¶æ„é€€è€Œæ¬¡ä¹‹æ˜¯è½¯ä»¶çš„ç¬¬äºŒä»·å€¼ï¼Œå½±å“åˆ°è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„å„ç§æˆæœ¬ï¼Œé—´æ¥åœ°å½±å“é‡‘ä¸»çš„æ”¶ç›Šã€‚ä¸¤è€…åœ¨è½¯ä»¶ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‘æŒ¥ç€ä¸åŒçš„ä½œç”¨ï¼ŒåŠŸèƒ½æ›´å¤šçš„æ˜¯å…¶ç´§æ€¥ä¸”é‡è¦éƒ¨åˆ†ï¼Œæ¶æ„æ›´å¤šçš„æ˜¯é‡è¦éç´§æ€¥éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;å…³äºæ¶æ„çš„æ„ä¹‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸ºäº†èƒ½å¤Ÿæœ€å°åŒ–åˆ›å»ºå’Œç»´æŠ¤è½¯ä»¶çš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;çœŸå®çš„è½¯ä»¶å¼€å‘æ˜¯ä¸€ä¸ªæŒ£æ‰ï¼ˆStruggleï¼‰çš„è¿‡ç¨‹ï¼Œç¨‹åºå‘˜ä¼šæƒ³ç€å¤šå¿«å¥½çœå®ç°éœ€æ±‚è§£å†³ Bugï¼Œäº§å“ä¼šåœ¨è½¯ä»¶çš„å¼€å‘é˜¶æ®µå¤šæ¬¡å˜æ›´éœ€æ±‚ï¼Œå¸‚åœºä¼šå¡ç€ä¸Šçº¿æ—¶é—´ã€‚å€˜è‹¥æŠŠåŠŸèƒ½æ˜¯å¦å®ç°ä½œä¸ºæ ‡å‡†ï¼Œç†æ€§åˆçŸ­è§†çš„ç¨‹åºå‘˜ä¼šæœ€å°åŒ–è‡ªå·±çš„æŠ•å…¥ï¼Œåªé¡¾ç€å®ç°è½¯ä»¶çš„åŠŸèƒ½å’Œåº”ä»˜å˜æ›´ï¼Œå¿½è§†ä»»ä½•æ¶æ„æ–¹é¢çš„é—®é¢˜ï¼Œä¸€ä¸ªä¸å¥½çš„æ¶æ„ä¸‹å„ç§æ··ä¹±çš„ä¾èµ–ä¸‹çš„ç›¸äº’ä½œç”¨å…¶ç»´æŠ¤æˆæœ¬å¯èƒ½æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæœ€ç»ˆé¡¹ç›®å…¨å˜æˆæ„å¤§åˆ©é¢æ¡å¼çš„ä»£ç ï¼ˆSpaghetti codeï¼‰ï¼ŒæŒ–å‘çš„äººå¯èƒ½å·²ç»æ¢äº†ä¸€æ‰¹åˆä¸€æ‰¹ï¼Œè€Œè¿™äº›æŠ€æœ¯å€ºåŠ¡çš„ä¸»ä½“å¹¶ä¸æ˜¯æ¬ ä¸‹å€ºåŠ¡çš„ç¨‹åºå‘˜ï¼Œè€Œæ˜¯è½¯ä»¶çš„æ‰€æœ‰äººã€‚ä¸€ä¸ªæœ¬åº”ä¸ºå…¬å¸å¸¦æ¥æŠ€æœ¯ç§¯ç´¯çš„é¡¹ç›®ï¼Œåè€Œæˆä¸ºå…¬å¸çš„å†å²åŒ…è¢±ã€‚&lt;/p&gt;

&lt;p&gt;å¯èƒ½æœ‰å‹‡å£«åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆç»´æŠ¤æˆæœ¬ä¸æ–­å¢åŠ ç›´åˆ°é«˜äºé‡æ„æˆæœ¬çš„é‚£ä¸ªæ‹ç‚¹ï¼‰ä¼šæå‡ºé‡æ„å¯ä»¥è§£å†³é—®é¢˜ã€‚ä½†é‡æ„åªæ˜¯å¯ä»¥è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œå¯èƒ½è¿˜ä¼šå¼•å…¥æ–°çš„é—®é¢˜ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œä½œè€…è¿™æ ·è¯´ï¼šå¦‚æœæœ€åæ‰è€ƒè™‘æ¶æ„ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„å¼€å‘æˆæœ¬ä¼šæ›´é«˜ï¼Œå¹¶ä¸”æœ€ç»ˆå‡ ä¹ä¸å¯èƒ½æˆä¸ºç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå…è®¸è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œåˆ™æ„å‘³ç€è½¯ä»¶å¼€å‘å›¢é˜Ÿæ²¡æœ‰åšè¶³å¤Ÿçš„åŠªåŠ›ã€‚æˆ‘ä»¬ç«™åœ¨ PM çš„è§’åº¦çœ‹ï¼Œä»–åªå…³å¿ƒéœ€æ±‚ï¼Œä»–ä»¬ä¸æ‡‚ä¹Ÿæ²¡æœ‰èƒ½åŠ›è¯„ä¼°æ¶æ„çš„é‡è¦æ€§ï¼Œå› ä¸ºè¿™å¯¹ä»–ä»¬æ¥è¯´æ˜¯æ— å…³çš„ç»†èŠ‚ã€‚æ‰€ä»¥æ¶æ„å¸ˆå¿…é¡»è¦è´£ä»»å»å¼ºè°ƒæ¶æ„çš„é‡è¦æ€§ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­äº‰å–è¶³å¤Ÿçš„æ—¶é—´è¿›è¡Œæ¶æ„è®¾è®¡ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰ä¸€ç‚¹æ˜¯ç¡®å®šï¼Œæ¶æ„è®¾è®¡å’Œå•å…ƒæµ‹è¯•ç¡®å®ä¼šä½¿é¡¹ç›®çš„å¼€å‘å˜æ…¢ï¼Œè€Œå€ºåŠ¡ä¹Ÿä¸ä¸€å®šæ˜¯åäº‹ï¼Œåœ¨ä¸€äº›æ—¶é—´ç‚¹æ¬ ç‚¹æŠ€æœ¯å€ºæ˜¯å¯ä»¥è·å¾—æ›´å¥½çš„æŠ•èµ„å›æŠ¥ç‡ã€‚è¿™ä¸€ç‚¹åœ¨ç°å®ç”Ÿæ´»ä¸­å¯ä»¥æ‰¾åˆ°å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚è´·æ¬¾ä¹°æˆ¿ï¼Œç‚’è‚¡åŠ æ æ†ã€‚åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼ŒåŠŸèƒ½å’Œè®¾è®¡ç¡®å®æ˜¯ä¸€å¯¹çŸ›ç›¾ï¼Œæ¶æ„å¸ˆçš„èŒè´£æ¢ä¸€ç§è¡¨è¿°å°±æ˜¯åˆ©ç”¨å…¶ä¸“ä¸šçŸ¥è¯†ä¸ºåŠŸèƒ½å’Œè®¾è®¡åˆ†é…èµ„æºä»¥è·å¾—æœ€ä½³çš„å›æŠ¥ç‡ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºæ¶æ„å¸ˆçš„èŒè´£ä½œè€…è¿™æ ·è¯´ï¼Œè®¾è®¡è‰¯å¥½çš„æ¶æ„ï¼Œä½¿ç³»ç»Ÿæ˜“äºç†è§£ã€å¼€å‘ã€ç»´æŠ¤å’Œéƒ¨ç½²ã€‚æœ€ç»ˆç›®æ ‡æ˜¯æœ€å¤§é™åº¦åœ°é™ä½ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸæˆæœ¬å¹¶æœ€å¤§é™åº¦åœ°æé«˜ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ¶æ„è®¾è®¡ä¹‹é“&quot;&gt;æ¶æ„è®¾è®¡ä¹‹é“&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;Change is the only constant.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœè¯´è½¯ä»¶å¼€å‘ä¸­æœ‰ä¸å˜çš„çœŸç†ï¼Œé‚£å°±æ˜¯&lt;strong&gt;å˜åŒ–ä¸å¯é¿å…&lt;/strong&gt;ã€‚ä¸ºäº†åº”ä»˜å˜åŒ–ã€‚è½¯ä»¶å·¥ç¨‹å¸ˆæ€»ç»“å‡ºè®¸å¤šåŸåˆ™ï¼Œæ¯”å¦‚å°è£…å˜åŒ–ï¼Œé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–æŠ½è±¡ï¼Œæœ€å°‘çŸ¥è¯†åŸåˆ™ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;è®°å¾—å¾ˆä¹…ä»¥å‰å¼€å§‹æ€è€ƒè½¯ä»¶çš„è®¾è®¡çš„æ—¶å€™ï¼Œæœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯ï¼Œä¸ºäº†å‡å°‘ä»£ç é‡è€Œè®¾è®¡ï¼Œç‰¹åˆ«æ˜¯æ»¥ç”¨ç»§æ‰¿ï¼Œå¯¼è‡´ä»£ç åƒµåŒ–é‡æ„åé¢å¯¹å˜åŒ–æ›´åŠ ç—›è‹¦ï¼Œå¦‚æœå½“æ—¶äº†è§£äº†ç§ç§åŸåˆ™ï¼Œç”Ÿæ´»è‚¯å®šå®¹æ˜“è®¸å¤šã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ä¹¦ç”¨äº†ä¸‰åˆ†ä¹‹ä¸€çš„ç¯‡å¹…æ¥è®²è¿™äº›åŸåˆ™ã€‚åŒ…æ‹¬ç”¨äºæŒ‡å¯¼å¦‚ä½•è®¾è®¡&lt;strong&gt;ç±»&lt;/strong&gt;çš„ &lt;a href=&quot;https://zh.wikipedia.org/wiki/SOLID_(%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1)&quot;&gt;SOLID åŸåˆ™&lt;/a&gt;ï¼Œå’ŒæŒ‡å¯¼å¦‚ä½•è®¾è®¡ç»„ä»¶çš„å…­ä¸ªåŸåˆ™ã€‚è¿™é‡Œ&lt;strong&gt;ç±»&lt;/strong&gt;ä¸å•å•æ˜¯é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œè€Œæ˜¯æ›´åŠ æ³›åŒ–åœ°æŒ‡ä¸€ç»„å‡½æ•°å’Œæ•°æ®ï¼Œä¹Ÿç§°ä¸ºæ¨¡å—ï¼ˆmoduleï¼‰ã€‚ è€Œç»„ä»¶æŒ‡çš„æ˜¯ï¼ŒæŒ‡çš„æ˜¯ç‹¬ç«‹çš„å¯éƒ¨ç½²å•å…ƒï¼Œæ˜¯æ¨¡å—çš„é›†åˆã€‚æ¯”å¦‚ java ä¸­çš„ jarï¼Œruby çš„ gemã€‚&lt;/p&gt;

&lt;p&gt;SOLID åŸåˆ™æŒ‡å¯¼ç±»çš„è®¾è®¡åº”è¯¥å®¹å¿å˜åŒ–ã€æ˜“äºç†è§£ã€‚ç»„ä»¶åŸåˆ™æŒ‡å¯¼ç»„ä»¶çš„å†…èšå’Œç»„ä»¶é—´çš„è€¦åˆï¼Œå…¶å®ä¹Ÿæ˜¯ java çš„åˆ†åŒ…åŸåˆ™ã€‚&lt;/p&gt;

&lt;p&gt;ç»„ä»¶å†…èšï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é‡ç”¨å‘å¸ƒç­‰ä»·åŸåˆ™ï¼ˆRelease/Reuse Equivalency Principleï¼‰&lt;/li&gt;
  &lt;li&gt;å…±åŒå°é—­åŸåˆ™ï¼ˆCommon Closure Principleï¼‰&lt;/li&gt;
  &lt;li&gt;å…±åŒé‡ç”¨åŸåˆ™ï¼ˆCommon Reuse Principleï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç»„ä»¶è€¦åˆï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ— ç¯ä¾èµ–åŸåˆ™ ADPï¼ˆAcycle Dependencies Principleï¼‰&lt;/li&gt;
  &lt;li&gt;ç¨³å®šä¾èµ–åŸåˆ™ SDPï¼ˆStable Dependencies Principleï¼‰&lt;/li&gt;
  &lt;li&gt;ç¨³å®šæŠ½è±¡åŸåˆ™ SAPï¼ˆStable Abstractions Principleï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¯‡å¹…æ‰€é™å°±ä¸è¿›è¡Œè§£é‡Šäº†ï¼Œä½œè€…è¿˜ä»‹ç»äº†ä¸¤ä¸ªåº¦é‡ç»„ä»¶ç¨³å®šæ€§å’ŒæŠ½è±¡æ€§çš„é‡ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸ç¨³å®šæ€§ï¼š\(I = F_{out}/(F_{in}+F_{out})\)ï¼Œ\(F_{in}\) ä¼ å…¥ä¾èµ–ï¼›\(F_{out}\) ä¼ å‡ºä¾èµ–ã€‚ä¾èµ–å…³ç³»åº”è¯¥ï¼Œé«˜ I å€¼ä¾èµ–ä½ I å€¼ã€‚&lt;/li&gt;
  &lt;li&gt;æŠ½è±¡æ€§ï¼š\(A = N_a/N_c\)ï¼Œ\(N_c\) ç±»çš„æ•°ç›®ï¼›\(N_a\) æŠ½è±¡ç±»æˆ–æ¥å£çš„æ•°ç›®ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä½œè€…è¿˜èŠäº†ç¼–ç¨‹èŒƒå¼çš„å‘å±•ï¼Œä»–çš„è§‚ç‚¹ä¹ŸæŒºæœ‰æ„æ€ï¼šç¼–ç¨‹çš„å‘å±•ï¼Œæ˜¯ä¸€ä¸ªæ·»åŠ é™åˆ¶çš„è¿‡ç¨‹ã€‚ä¸‰ç§èŒƒå¼éƒ½ä»æˆ‘ä»¬èº«ä¸Šå¤ºèµ°äº†ä¸€äº›ä¸œè¥¿ã€‚æ¯ä¸€ç§éƒ½é™åˆ¶äº†æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç»“æ„åŒ–ç¼–ç¨‹ï¼Œå¯¹ç›´æ¥æ§åˆ¶è½¬ç§»è¿›è¡Œäº†é™åˆ¶&lt;/li&gt;
  &lt;li&gt;é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹é—´æ¥æ§åˆ¶è½¬ç§»è¿›è¡Œäº†æ§åˆ¶&lt;/li&gt;
  &lt;li&gt;å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯¹å˜é‡åˆ†é…è¿›è¡Œäº†é™åˆ¶&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é¢å‘å¯¹è±¡æœ€æ ¸å¿ƒçš„å°±æ˜¯å¢å¼ºäº†å¤šæ€ï¼Œå¼•å…¥å¤šæ€åï¼Œé«˜çº§å‡½æ•°ä¾èµ–äºä½çº§å‡½æ•°çš„æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°ã€‚æŠŠå¯¹å…·ä½“å®ç°çš„ä¾èµ–åˆ†ç¦»å‡ºæ¥ã€‚ä½çº§çš„å®ç°ï¼Œå¯ä»¥è¢«ç‹¬ç«‹éƒ¨ç½²æ›´æ›¿ã€‚è¿™å°±æ˜¯ä¾èµ–åè½¬ã€‚å¯¹æ¶æ„å¸ˆæ¥è¯´æä¾›äº†ä½¿ç”¨å¤šæ€æ€§æ¥è·å¾—å¯¹ç³»ç»Ÿä¸­æ¯ä¸ªæºä»£ç ä¾èµ–å…³ç³»çš„ç»å¯¹æ§åˆ¶çš„èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼ŒDijkstra ã€ŠGo To Statement Considered Harmfulã€‹çš„&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%9C%89%E5%AE%B3&quot;&gt;æ•…äº‹&lt;/a&gt;ä¹Ÿå€¼å¾—äº†è§£ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ¸…æ™°æ¶æ„&quot;&gt;æ¸…æ™°æ¶æ„&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;Every problem in computer science can be solved with a layer of indirection (besides the problem of too many layers of indirection)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ¸…æ™°æ¶æ„ï¼Œåœ¨ 2011 å¹´ä½œè€…çš„åšå®¢å°±æœ‰æåˆ°è¿™ä¸ªåè¯ &lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2011/11/22/Clean-Architecture.html&quot;&gt;Clean Architecture&lt;/a&gt;ï¼Œå¦ä¸€ç¯‡å¼•ç”¨æ¯”è¾ƒå¤šçš„åšæ–‡ &lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html&quot;&gt;The Clean Architecture&lt;/a&gt; å†™äº 12 å¹´ï¼Œå†…å®¹æ‰€è®²çš„å°±æ˜¯æœ¬ä¹¦çš„æ¸…æ™°æ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæ¸…æ™°æ¶æ„ä¸æ˜¯ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Œä»–æ˜¯å…­è¾¹å½¢æ¶æ„(Hexagonal Architecture)çš„ä¸€ä¸ªå˜ä½“ï¼ŒåŸºäºä»¥å¾€å¤šç§æ¶æ„çš„å‘å±•å’Œå½’çº³ï¼Œæå‡ºæ¥çš„ä¸€ä¸ªæ–°æ¶æ„æ¨¡å‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ ç»Ÿçš„åˆ†å±‚æ¶æ„æ˜¯å‚ç›´å½¢å¼çš„å±‚æ¬¡æ¶æ„ï¼Œæ¸…æ™°æ¶æ„æ˜¯ç”±å¤–å¾€å†…çš„åœ†ç¯çŠ¶å±‚æ¬¡æ¶æ„ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1200/0*JD606Sqx6RYZLKdu.&quot; alt=&quot;å›¾ç‰‡æ¥æºï¼šhttps://android.jlelse.eu/thoughts-on-clean-architecture-b8449d9d02df&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ ·æ¶æ„æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸€ä¸ªæ ¸å¿ƒ&lt;/li&gt;
  &lt;li&gt;æŠ½è±¡æ€§å¾€å†…é€’å¢&lt;/li&gt;
  &lt;li&gt;å¤–å±‚ä¾èµ–å†…å±‚&lt;/li&gt;
  &lt;li&gt;å±‚ä¸å±‚ä¹‹é—´é€šè¿‡æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤æµ&lt;/li&gt;
  &lt;li&gt;æ¡†æ¶ã€æ•°æ®åº“ã€UI ç­‰éƒ½æ˜¯ç»†èŠ‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ ¸å¿ƒçš„å®ä½“æŒ‡çš„å°±æ˜¯é¢†åŸŸå†…çš„å…³é”®ä¸šåŠ¡é€»è¾‘ï¼Œæœ€ä¸å¯èƒ½å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚è‹¹æœæ€»æ˜¯å¾€ä¸‹æ‰ï¼›ä¿é™©æ€»æœ‰æ‰¿ä¿äººã€æŠ•ä¿äººã€è¢«ä¿é™©äººã€å—ç›Šäººï¼›è¿˜è´·çš„ç­‰é¢æœ¬æ¯ã€ç­‰é¢æœ¬é‡‘ç®—æ³•ã€‚å…³é”®ä¸šåŠ¡é€»è¾‘åº”è¯¥æ˜¯ç³»ç»Ÿä¸­æœ€ç‹¬ç«‹å’Œå¯é‡ç”¨çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒå±‚æ˜¯ç”¨ä¾‹ï¼Œç”¨ä¾‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚ç”¨ä¾‹å…³æ³¨ä¸è¾“å…¥æ•°æ®å¹¶äº§ç”Ÿè¾“å‡ºæ•°æ®ï¼Œä½†ç”¨ä¾‹å¯¹è±¡ä¸åº”å»å…³å¿ƒæ•°æ®å¦‚ä½•ä¼ é€’ç»™ç”¨æˆ·æˆ–å…¶ä»–ä»»ä½•ç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ç€æ˜¯æ¥å£é€‚é…å±‚ï¼Œå°†å®ä½“å’Œç”¨ä¾‹è½¬åŒ–ä¸ºæ›´é€‚ç”¨å¤–å±‚ä½¿ç”¨çš„å½¢å¼ã€‚å°†å¤–éƒ¨æ•°æ®è½¬åŒ–ä¸ºç”¨ä¾‹æˆ–å®ä½“ä½¿ç”¨çš„å†…éƒ¨å½¢å¼ã€‚è¿™ä¸€å±‚æœ€å¼ºå¤§çš„å·¥å…·å°±æ˜¯ä¾èµ–å€’ç½®ï¼Œä»¥ MVP ä¸ºä¾‹ï¼Œæ›´æ–°ç•Œé¢çš„æ—¶å€™ï¼Œæ§åˆ¶æµçš„æ–¹å‘ Presenter -&amp;gt; UIï¼Œè€Œä¾èµ–å…³ç³»å´æ˜¯ UI ä¾èµ–äº Presenter å±‚ï¼ˆå®ç°äº† Presenter å±‚ç›¸åº”çš„ View æ¥å£ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;dip.png&quot; alt=&quot;ä¾èµ–å€’ç½®ä½¿å¾—ä¾èµ–å…³ç³»ä¸æ§åˆ¶æµçš„æ–¹å‘ç›¸å&quot; /&gt;&lt;/p&gt;

&lt;p&gt;UI åœ¨å¤–å±‚è¿™ä¸ªç†æ‰€å½“ç„¶äº†ï¼Œåå­—æœ¬èº«å°±è¯´æ˜äº†å®ƒç›´æ¥å’Œç”¨æˆ·æ‰“äº¤é“ï¼Œè€Œä¸” UI æ˜¯æŒæ§åœ¨è®¾è®¡å’Œäº§å“æ‰‹é‡Œï¼Œè¶Šä¸èƒ½æ§åˆ¶çš„ä¸œè¥¿è¶Šè¦å°å¿ƒå…¶å˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ ç»Ÿçš„åˆ†å±‚ç»“æ„ï¼Œæ•°æ®åº“æ€»æ˜¯å¤„äºæœ€åº•å±‚ï¼Œä½†å…¶ä¸­æ•°æ®æ‰æ˜¯å…³é”®ï¼Œæ•°æ®åº“ä¸æ˜¯ã€‚å…³ç³»å‹æ•°æ®åº“åªä¸è¿‡æ˜¯æŠŠæ•°æ®æŒ‰ b+ æ ‘è¿™æ ·çš„ç»“æ„å­˜å‚¨èµ·æ¥ï¼Œç„¶åé€šè¿‡ SQL æ¥æ“ä½œæ•°æ®ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶å­˜å‚¨æ•°æ®ï¼Œç”šè‡³å¯ä»¥è„±ç¦»ç¡¬ç›˜ç›´æ¥åœ¨å†…å­˜é‡Œé¢ç”¨æ•°ç»„ã€é“¾è¡¨ã€æ ‘ã€å›¾ç­‰æ•°æ®ç»“æ„ç»„ç»‡æˆ‘ä»¬çš„æ•°æ®ï¼Œæ¯•ç«Ÿå†…å­˜ä»·æ ¼è¶Šæ¥è¶Šä¾¿å®œäº†ï¼ˆäº”å¹´ä¸€ä¸ªå–æ ·ï¼Œå°±å¯ä»¥æ— è§†è¿‘å‡ å¹´ PC å†…å­˜çš„æ¶¨å¹…äº†ğŸ˜†ï¼‰ã€‚å…¶ä¸­å…³é”®çš„ç‚¹å°±æ˜¯&lt;strong&gt;æ¨è¿Ÿå†³å®š&lt;/strong&gt;ï¼Œæˆ‘ä»¬å¾ˆéš¾åœ¨åˆæœŸå¯¹æˆ‘ä»¬çš„æ•°æ®ä½¿ç”¨åœºæ™¯åšä¸ªå‡†ç¡®çš„é¢„æµ‹ï¼Œæ•°æ®åº“ä½œä¸ºç»†èŠ‚éš”ç¦»åœ¨æ ¸å¿ƒç³»ç»Ÿå¤–ï¼Œä»¥åå› ä¸ºæ€§èƒ½è§„æ¨¡ç­‰ç­‰é—®é¢˜å˜åŠ¨æ•°æ®åº“æ›´åŠ å®¹æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ¡†æ¶å‘¢ï¼Ÿæ¡†æ¶æ€»æ˜¯é¼“åŠ±æˆ‘ä»¬å’Œåº”ç”¨ç¨‹åºç´§å¯†çš„è€¦åˆåœ¨ä¸€èµ·ï¼Œå®ƒæä¾›ä¸€ç§æ¨¡å¼ï¼Œåªè¦æˆ‘ä»¬æœä»è¿™ä¸ªæ¨¡å¼å°±èƒ½è·å¾—æå¤§çš„ä¾¿åˆ©ï¼Œä»£ä»·å°±æ˜¯è¿™ä¸ªæ¡†æ¶å’Œæˆ‘ä»¬åº”ç”¨çš„å„ä¸ªå±‚æ¬¡ç´§å¯†åœ°è€¦åˆåœ¨ä¸€èµ·ã€‚è¿™æœ‰ä»€ä¹ˆé£é™©ï¼Ÿå…¶ä¸€ï¼Œæ¡†æ¶ä¹Ÿè®¸å¯ä»¥å¸®åŠ©æ‚¨å®Œæˆåº”ç”¨ç¨‹åºçš„ä¸€äº›æ—©æœŸåŠŸèƒ½ã€‚ ä½†æ˜¯éšç€äº§å“çš„æˆç†Ÿï¼Œå®ƒå¯èƒ½ä¼šè¶…å‡ºæ¡†æ¶çš„åŠŸèƒ½ã€‚å…¶äºŒï¼Œæ¡†æ¶å¯èƒ½ä¼šæœç€ä½ æ²¡æœ‰å¸®åŠ©çš„æ–¹å‘å‘å±•ï¼Œä½ ç”šè‡³å¯èƒ½ä¼šå‘ç° API æ¶ˆå¤±ã€æ”¹å˜äº†ï¼Œå› ä¸ºæ§åˆ¶æƒåœ¨ä½œè€…è€Œä¸æ˜¯åœ¨ä½ æ‰‹ä¸Šã€‚å…¶ä¸‰å°±æ˜¯æ€»æœ‰æ–°æ¡†æ¶å‡ºæ¥ï¼Œä½ å¯èƒ½å¸Œæœ›åˆ‡æ¢åˆ°æ›´æ–°æ›´å¥½çš„æ¡†æ¶ã€‚&lt;/p&gt;

&lt;p&gt;æœ€è¿‘ä¸€ä¸ªæœ‹å‹ç»´æŠ¤è€é¡¹ç›®é‡åˆ°ä¸€ä¸ª &lt;a href=&quot;https://github.com/loopj/android-async-http&quot;&gt;android-async-http&lt;/a&gt; çš„&lt;a href=&quot;https://github.com/loopj/android-async-http/issues/1001&quot;&gt;é—®é¢˜&lt;/a&gt;å‘æˆ‘æ±‚åŠ©ï¼Œandroid-async-httpï¼ï¼ï¼è¿™ä¸ªä¸æ˜¯æˆ‘ä¸€å¼€å§‹åš Android é¡¹ç›®ç”¨çš„ç½‘ç»œåº“å—ï¼Ÿèµ·ç ä¹Ÿæ˜¯ 11ã€12 å¹´çš„äº‹äº†ã€‚è™½ç„¶æ˜¯ä¸ªä¸é”™çš„åº“ä½†ä¹Ÿä¸ç»´æŠ¤å‡ å¹´äº†å§ã€‚é‡åˆ°åº•å±‚çš„ Bug åˆ«ææœ‰å¤šæ£˜æ‰‹äº†ï¼Œè€Œä¸”ç»´æŠ¤çš„ä»·å€¼å·²ä¸å¤§ï¼ŒæŠ•å…¥å¤ªå¤šæ—¶é—´åˆè§‰å¾—äºï¼Œæœ€ç»ˆåªèƒ½ç”¨ä¸€äº›é¢å¤–çš„æªæ–½æŠŠå®ƒæ©ç›–è¿‡å»ã€‚&lt;/p&gt;

&lt;p&gt;ä½†åˆ†ç¦»æ¡†æ¶ï¼Œè°ˆä½•å®¹æ˜“å‘¢ã€‚è¿™å‡ å¹´å†™çš„ Appï¼Œæ•°æ®å±‚ä¹Ÿä»æ‰‹å†™ Dao åˆ° greenDao åˆ° DBFlow å†åˆ°ç°åœ¨çš„ Roomã€‚Room è™½ç„¶æœ‰å®˜æ–¹åŠ æŒï¼Œä½†ä»¥è°·æ­Œçš„å°¿æ€§è¢«å¼ƒç”¨ä¹Ÿæ˜¯éšæ—¶çš„äº‹ã€‚å¦‚æœå¼•å…¥ Roomï¼Œæœ€å†…å±‚çš„ Entity å°±å¾—ä½¿ç”¨ Room çš„æ³¨è§£ä¾¿ä¼šå¯¹ Room çš„ä¾èµ–ã€‚å¦‚æœè¦åˆ†ç¦»å‘¢ï¼Œå°±éœ€è¦åœ¨æ•°æ®å±‚ä¹Ÿå®šä¹‰ä¸€å¥— Entityï¼Œå±‚å±‚ä¹‹é—´çš„æ•°æ®ä¼ é€’è¿˜éœ€è¦åšè½¬æ¢ï¼ŒæŠŠæ ¸å¿ƒçš„ Entity è½¬æ¢ä¸ºæ•°æ®å±‚çš„ Entityï¼Œè¿™æ ·åšå°±å¾ˆæ¸…æ™°æ¶æ„äº†&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼Œä½†æ˜¯æœ‰å¿…è¦å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æ¶æ„çš„çŸ›ç›¾åœ¨äºï¼Œæˆ‘ä»¬ä¸åº”è¯¥é¢„è§æŠ½è±¡çš„å¿…è¦æ€§ã€‚çŸ¥é“ YAGNIï¼ˆYou arenâ€™t gonna need itï¼‰å—ï¼Ÿè¿™æ˜¯ä¸ªé¥±å«æ™ºæ…§çš„ç†å¿µï¼šâ€œä½ ä¸éœ€è¦å®ƒã€‚â€ã€‚å› ä¸ºè¿‡åº¦å·¥ç¨‹å¾€å¾€æ¯”ä¸å¤Ÿå·¥ç¨‹åŒ–æ›´ç³Ÿç³•ã€‚å…¸å‹çš„ç§»åŠ¨åº”ç”¨ç¨‹åºä¸å…¸å‹çš„ä¼ä¸šåº”ç”¨ç¨‹åºæœ‰å¾ˆå¤§ä¸åŒã€‚å®ƒè¦å°å¾—å¤šï¼Œå¹¶ä¸”é€šå¸¸éœ€è¦å¿«é€Ÿäº¤ä»˜ã€‚è®°ä½æ¶æ„æ˜¯æ¼”åŒ–çš„ï¼Œä¸èƒ½ç®€å•åœ°åœ¨é¡¹ç›®çš„å¼€å§‹æ—¶å†³å®šå®æ–½å“ªäº›è¾¹ç•Œä»¥åŠå¿½ç•¥å“ªäº›è¾¹ç•Œã€‚ç›¸åï¼Œéšç€ç³»ç»Ÿçš„å‘å±•ï¼Œè¾¹ç•Œä¼šæ…¢æ…¢å˜çš„æ¸…æ™°ï¼Œä½ ä¼šå…³æ³¨åˆ°å®ƒï¼Œå†æƒè¡¡å®æ–½å’Œå¿½ç•¥çš„æˆæœ¬ï¼Œåœ¨å®æ–½æˆæœ¬ä½äºå¿½ç•¥æˆæœ¬çš„æ‹ç‚¹æ—¶åšå‡ºå†³å®šã€‚&lt;/p&gt;

&lt;p&gt;ä¸èƒ½æ‰‹é‡Œæœ‰ä¸ªé”¤å­çœ‹åˆ°ä»€ä¹ˆéƒ½æ˜¯é’‰å­ã€‚å°±åƒå½“åˆå­¦è®¾è®¡æ¨¡å¼ä¸€æ ·ï¼Œå­¦äº†ä¹‹ååˆè¦è®©ä½ å¿˜æ‰å®ƒã€‚&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/android10/Android-CleanArchitecture&quot;&gt;Android-CleanArchitecture&lt;/a&gt; å°±æ˜¯è¿™æ ·çš„è®¾è®¡ï¼Œä½†åœ¨ &lt;a href=&quot;https://fernandocejas.com/2018/05/07/architecting-android-reloaded/&quot;&gt;Kotlin ç‰ˆ&lt;/a&gt;å·²ç»ä¸ç”¨äº†ã€‚Â &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name></name></author><category term="coder" /><category term="æ¶æ„" /><category term="è½¯ä»¶å·¥ç¨‹" /><summary type="html">æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ The boxes on a PowerPoint diagram are not a software systemâ€™s architecture. è¿‘æ¥è¯»äº† Uncle Bob çš„ ã€Šæ¸…æ™°æ¶æ„ã€‹(Clean Architecture)ï¼Œå‰¯æ ‡é¢˜å«ã€ä¸€ä¸ªå·¥åŒ çš„è½¯ä»¶ç»“æ„ä¸è®¾è®¡æŒ‡å—ã€ï¼Œè‡ªç§°ä¸ºå·¥åŒ çš„ Uncle Bob å…¨åå« Robert C. Martinï¼Œæ˜¯ä¸€ä½æœ‰ 50 å¤šå¹´ç»éªŒçš„è½¯ä»¶å·¥ç¨‹å¸ˆå’Œä½œè€…ã€‚ä»–æ˜¯ SOLID åŸåˆ™çš„å‘½åè€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ã€Šæ•æ·è½¯ä»¶å¼€å‘ã€‹ã€ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹çš„ä½œè€…ã€‚ã€Šæ¸…æ™°æ¶æ„ã€‹æ˜¯ 17 å¹´å‡ºç‰ˆçš„ä¹¦ä¹Ÿç®—æ˜¯ä»Šå¹´è¯»çš„æ¯”è¾ƒæ–°çš„ä¹¦äº†ã€‚å…¨ä¹¦åˆ† 35 ç« ï¼Œè¿‘ 400 é¡µï¼Œè™½è¯´ä¹Ÿä¸ç®—ç‰¹åˆ«å¤šï¼Œä¸è¿‡å•ƒä¸‹è‹±æ–‡ç‰ˆä¹Ÿé¢‡ä¸ºåƒåŠ›ã€‚æœ¬ä¹¦å¬èµ·æ¥åƒæ˜¯ä¸“ä¸šè½¯ä»¶æ¶æ„è®ºè¿°ï¼Œå…¶å®æ›´åƒæ˜¯ä½œè€…çš„æ‚è°ˆï¼Œä¸å°‘å†…å®¹éƒ½å¯ä»¥åœ¨ä½œè€…è¿‡å»çš„åšå®¢æ‰¾åˆ°ã€‚å…¶ä¸­çš„è½¯ä»¶å¼€å‘å“²å­¦çš„æ•…äº‹è®©æˆ‘å¾ˆæ„Ÿå…´è¶£ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¶æ„å‘¢ï¼Ÿä½œä¸ºä¸€ä¸ªå¸¸å¸¸æŠŠæ¶æ„æŒ‚åœ¨å˜´è¾¹çš„äººï¼Œè¦ç»™æ¶æ„ä¸‹ä¸ªå®šä¹‰è¿˜çœŸä¸å®¹æ˜“ã€‚ä¹¦ä¸­ Uncle Bob ç»™äº†ä¸€ä¸ªå¾ˆæ£’çš„å®šä¹‰ï¼š è½¯ä»¶æ¶æ„æ˜¯æŒ‡ï¼Œè®¾è®¡è½¯ä»¶çš„äººä¸ºè½¯ä»¶èµ‹äºˆçš„å½¢çŠ¶ï¼Œè¿™ä¸ªå½¢çŠ¶æ˜¯æŒ‡ç³»ç»Ÿå¦‚ä½•è¢«åˆ’åˆ†ä¸ºç»„ä»¶(Components)ï¼Œå„ä¸ªç»„ä»¶å¦‚ä½•æ’åˆ—ï¼ˆArrangementï¼‰ï¼Œç»„ä»¶ä¹‹é—´å¦‚ä½•æ²Ÿé€šï¼ˆCommunicationï¼‰ã€‚ æç¬‘æè½¯å·¥ç”¨äº†å…¬å¸çš„ç»„ç»‡æ¶æ„æ¥ç±»æ¯”ï¼Œæˆ‘è§‰å¾—éå¸¸å½¢è±¡ï¼šä¸€ä¸ªä¸­å‹å…¬å¸æœ‰è‘£äº‹ä¼šã€è‘£äº‹é•¿ã€è‘£äº‹ä¼šã€æ€»ç»ç†ã€éƒ¨é—¨ã€ç»„ç­‰ï¼Œä»¥åŠå„éƒ¨é—¨é‡Œé¢çš„å‘˜å·¥ï¼Œç”±æ­¤å½¢æˆç»„ç»‡æ¶æ„å›¾ã€‚å¯ä»¥çœ‹å‡ºæ‰€æœ‰çš„æ¶æ„ä¸€å®šæœ‰ä¸‰ä¸ªä¸œè¥¿ï¼š æ„æˆç»„ç»‡çš„å•å…ƒï¼Œä¹Ÿå°±æ˜¯ä¸åŒèŒèƒ½çš„å‘˜å·¥ã€‚ äººå‘˜çš„å®‰æ’ï¼Œé˜¶å±‚å¼ã€æ‰å¹³å¼ã€çŸ©é˜µå¼ï¼Œç­‰ç­‰ã€‚ äººå‘˜æ²Ÿé€šçš„æ–¹å¼ï¼Œç›´æ¥æ²Ÿé€šã€é€è¿‡éƒ¨é—¨ä¸»ç®¡æˆ–PMä¸å…¶ä»–éƒ¨é—¨æˆ–å¤–éƒ¨å®¢æˆ·ä¸å‚å•†æ²Ÿé€šã€ç¦æ­¢æ²Ÿé€šã€åœ£ä¸Šå‚è¯¢æ‰å¯å¼€å£ç­‰ã€‚ é™¤äº†ç»„ç»‡æ¶æ„å¤–ï¼Œå…¬å¸è¿˜æœ‰ä»–çš„ä¸šåŠ¡ï¼Œä¸šåŠ¡ä¸æ¶æ„æ˜¯å†³å®šä¸€å®¶å…¬å¸çš„ä¸¤ä¸ªç»´åº¦ï¼Œä¸¤è€…çœ‹ä¼¼æ­£äº¤ï¼Œå®é™…å½“æˆ‘ä»¬çœ‹åˆ°ä¸€å®¶å…¬å¸çš„æ¶æ„å›¾ï¼Œæˆ‘ä»¬å¤§æ¦‚ä¹Ÿèƒ½çŒœå‡ºä¸€æ˜ŸåŠç‚¹å…¬å¸çš„ä¸šåŠ¡ï¼Œæ³•åŠ¡éƒ¨æˆ–è¡Œæ”¿éƒ¨å¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆï¼Œä½†ç§»åŠ¨å¼€å‘éƒ¨å¾ˆæ˜æ˜¾å–Šç€å…¬å¸æœ‰ç€ç§»åŠ¨å¼€å‘çš„ä¸šåŠ¡ï¼ˆScreaming Architectureï¼‰ã€‚å¾€å¾€ä¸šåŠ¡çš„å‘å±•ä¼šå¯¼è‡´æ¶æ„çš„æ¼”åŒ–ï¼Œæ¶æ„çš„æ¼”åŒ–åè¿‡æ¥ä¿ƒè¿›ä¸šåŠ¡çš„å‘å±•ã€‚ è½¯ä»¶ç³»ç»Ÿä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œè½¯ä»¶æœ‰ä¸¤ä¸ªé‡ï¼ˆValueï¼‰ï¼š è½¯ä»¶çš„åŠŸèƒ½æˆ–è¡Œä¸ºï¼Œå°±æ˜¯ä¸šåŠ¡ è½¯ä»¶çš„å½¢çŠ¶æˆ–è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¶æ„ åŠŸèƒ½è¡¡é‡ç³»ç»Ÿèƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Ÿæ¶æ„æ„å‘³ç€ç³»ç»Ÿæ˜¯å¦æ˜“äºå˜åŒ–ã€‚åŠŸèƒ½æ¶æ„å­°é‡è¦ï¼Ÿä½œè€…åœ¨ä¹¦ä¸­ç”¨äº†æ§åˆ¶å˜é‡æ³•æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªç³»ç»Ÿï¼š ä¸€ä¸ªç³»ç»Ÿèƒ½å®Œå…¨çš„æ»¡è¶³éœ€æ±‚ä½†æ˜¯ä¸å¯å˜ã€‚ ä¸€ä¸ªç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨ï¼Œä½†æ˜¯æ˜“äºæ”¹å˜ã€‚ å¤§éƒ¨åˆ†äººç›´è§‰ä¸Šä¼šé€‰æ‹©é‚£ä¸ªé©¬ä¸Šå°±èƒ½è·‘èµ·æ¥çš„ç³»ç»Ÿã€‚ä½†å“ªä¸ªç³»ç»Ÿæ›´æ²¡ç”¨å‘¢ï¼Ÿç¬¬ä¸€ä¸ªç³»ç»Ÿè™½ç„¶èƒ½ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦éœ€æ±‚å˜åŒ–äº†ä¾¿ä¸èƒ½ç”¨äº†ï¼Œå¯èƒ½æœ‰ç‚¹æ¯”è¾ƒéš¾æƒ³è±¡ï¼Œæ¢å¥è¯è¯´æ˜¯ä¿®æ”¹ç³»ç»Ÿçš„æˆæœ¬é«˜äºä¿®æ”¹ç³»ç»Ÿçš„æ”¶ç›Šï¼Œå› ä¸ºä»–éå¸¸éš¾ä»¥æ›´æ”¹ã€‚ç¬¬äºŒä¸ªç³»ç»Ÿè™½ç„¶ä¸èƒ½æ»¡è¶³ä¸šåŠ¡éœ€è¦ï¼Œä½†æ˜¯å®ƒå¯ä»¥æŒç»­æ”¹å–„å¹¶æœ€ç»ˆå˜å¾—æœ‰ç”¨ã€‚ è‹¥è¯´æ¶æ„æ¯”åŠŸèƒ½è¿˜æœ‰ä»·å€¼ï¼Œåˆä¸åˆå¸¸ç†ï¼Œä¸€ä¸ªç²¾é›•ç»†ç¢çš„æ²¡æœ‰ä»·å€¼çš„è½¯ä»¶ï¼Œæ²¡æœ‰é‡‘ä¸»ä¼šä¸ºå®ƒåŸ‹å•å“ªèƒ½è¯ç”Ÿï¼Ÿé™¤éæ˜¯ã€è½¯ä»¶è‰ºæœ¯å®¶ã€çš„è‡ªå‘è¡Œä¸ºã€‚å¯¹ä¸€å®¶è½¯ä»¶å…¬å¸æ¥è¯´ï¼Œè½¯ä»¶æ˜¯å…¶äº§å“ï¼Œäº§å“è¦å¸¦æ¥æ”¶ç›Šï¼Œæ‰€ä»¥åŠŸèƒ½ä»æ˜¯è½¯ä»¶çš„ç¬¬ä¸€ä»·å€¼ï¼ŒåŠŸèƒ½æ˜¯è½¯ä»¶èƒ½äº§ç”Ÿä»·å€¼çš„éƒ¨åˆ†ã€‚å…³ç³»åˆ°æˆ‘ä»¬çš„é‡‘ä¸»èƒ½ä¸èƒ½èµšåˆ°é’±ã€‚æ¶æ„é€€è€Œæ¬¡ä¹‹æ˜¯è½¯ä»¶çš„ç¬¬äºŒä»·å€¼ï¼Œå½±å“åˆ°è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„å„ç§æˆæœ¬ï¼Œé—´æ¥åœ°å½±å“é‡‘ä¸»çš„æ”¶ç›Šã€‚ä¸¤è€…åœ¨è½¯ä»¶ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‘æŒ¥ç€ä¸åŒçš„ä½œç”¨ï¼ŒåŠŸèƒ½æ›´å¤šçš„æ˜¯å…¶ç´§æ€¥ä¸”é‡è¦éƒ¨åˆ†ï¼Œæ¶æ„æ›´å¤šçš„æ˜¯é‡è¦éç´§æ€¥éƒ¨åˆ†ã€‚ å…³äºæ¶æ„çš„æ„ä¹‰ï¼š ä¸ºäº†èƒ½å¤Ÿæœ€å°åŒ–åˆ›å»ºå’Œç»´æŠ¤è½¯ä»¶çš„æˆæœ¬ã€‚ çœŸå®çš„è½¯ä»¶å¼€å‘æ˜¯ä¸€ä¸ªæŒ£æ‰ï¼ˆStruggleï¼‰çš„è¿‡ç¨‹ï¼Œç¨‹åºå‘˜ä¼šæƒ³ç€å¤šå¿«å¥½çœå®ç°éœ€æ±‚è§£å†³ Bugï¼Œäº§å“ä¼šåœ¨è½¯ä»¶çš„å¼€å‘é˜¶æ®µå¤šæ¬¡å˜æ›´éœ€æ±‚ï¼Œå¸‚åœºä¼šå¡ç€ä¸Šçº¿æ—¶é—´ã€‚å€˜è‹¥æŠŠåŠŸèƒ½æ˜¯å¦å®ç°ä½œä¸ºæ ‡å‡†ï¼Œç†æ€§åˆçŸ­è§†çš„ç¨‹åºå‘˜ä¼šæœ€å°åŒ–è‡ªå·±çš„æŠ•å…¥ï¼Œåªé¡¾ç€å®ç°è½¯ä»¶çš„åŠŸèƒ½å’Œåº”ä»˜å˜æ›´ï¼Œå¿½è§†ä»»ä½•æ¶æ„æ–¹é¢çš„é—®é¢˜ï¼Œä¸€ä¸ªä¸å¥½çš„æ¶æ„ä¸‹å„ç§æ··ä¹±çš„ä¾èµ–ä¸‹çš„ç›¸äº’ä½œç”¨å…¶ç»´æŠ¤æˆæœ¬å¯èƒ½æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæœ€ç»ˆé¡¹ç›®å…¨å˜æˆæ„å¤§åˆ©é¢æ¡å¼çš„ä»£ç ï¼ˆSpaghetti codeï¼‰ï¼ŒæŒ–å‘çš„äººå¯èƒ½å·²ç»æ¢äº†ä¸€æ‰¹åˆä¸€æ‰¹ï¼Œè€Œè¿™äº›æŠ€æœ¯å€ºåŠ¡çš„ä¸»ä½“å¹¶ä¸æ˜¯æ¬ ä¸‹å€ºåŠ¡çš„ç¨‹åºå‘˜ï¼Œè€Œæ˜¯è½¯ä»¶çš„æ‰€æœ‰äººã€‚ä¸€ä¸ªæœ¬åº”ä¸ºå…¬å¸å¸¦æ¥æŠ€æœ¯ç§¯ç´¯çš„é¡¹ç›®ï¼Œåè€Œæˆä¸ºå…¬å¸çš„å†å²åŒ…è¢±ã€‚ å¯èƒ½æœ‰å‹‡å£«åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆç»´æŠ¤æˆæœ¬ä¸æ–­å¢åŠ ç›´åˆ°é«˜äºé‡æ„æˆæœ¬çš„é‚£ä¸ªæ‹ç‚¹ï¼‰ä¼šæå‡ºé‡æ„å¯ä»¥è§£å†³é—®é¢˜ã€‚ä½†é‡æ„åªæ˜¯å¯ä»¥è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œå¯èƒ½è¿˜ä¼šå¼•å…¥æ–°çš„é—®é¢˜ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œä½œè€…è¿™æ ·è¯´ï¼šå¦‚æœæœ€åæ‰è€ƒè™‘æ¶æ„ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„å¼€å‘æˆæœ¬ä¼šæ›´é«˜ï¼Œå¹¶ä¸”æœ€ç»ˆå‡ ä¹ä¸å¯èƒ½æˆä¸ºç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå…è®¸è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œåˆ™æ„å‘³ç€è½¯ä»¶å¼€å‘å›¢é˜Ÿæ²¡æœ‰åšè¶³å¤Ÿçš„åŠªåŠ›ã€‚æˆ‘ä»¬ç«™åœ¨ PM çš„è§’åº¦çœ‹ï¼Œä»–åªå…³å¿ƒéœ€æ±‚ï¼Œä»–ä»¬ä¸æ‡‚ä¹Ÿæ²¡æœ‰èƒ½åŠ›è¯„ä¼°æ¶æ„çš„é‡è¦æ€§ï¼Œå› ä¸ºè¿™å¯¹ä»–ä»¬æ¥è¯´æ˜¯æ— å…³çš„ç»†èŠ‚ã€‚æ‰€ä»¥æ¶æ„å¸ˆå¿…é¡»è¦è´£ä»»å»å¼ºè°ƒæ¶æ„çš„é‡è¦æ€§ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­äº‰å–è¶³å¤Ÿçš„æ—¶é—´è¿›è¡Œæ¶æ„è®¾è®¡ã€‚ æœ‰ä¸€ç‚¹æ˜¯ç¡®å®šï¼Œæ¶æ„è®¾è®¡å’Œå•å…ƒæµ‹è¯•ç¡®å®ä¼šä½¿é¡¹ç›®çš„å¼€å‘å˜æ…¢ï¼Œè€Œå€ºåŠ¡ä¹Ÿä¸ä¸€å®šæ˜¯åäº‹ï¼Œåœ¨ä¸€äº›æ—¶é—´ç‚¹æ¬ ç‚¹æŠ€æœ¯å€ºæ˜¯å¯ä»¥è·å¾—æ›´å¥½çš„æŠ•èµ„å›æŠ¥ç‡ã€‚è¿™ä¸€ç‚¹åœ¨ç°å®ç”Ÿæ´»ä¸­å¯ä»¥æ‰¾åˆ°å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚è´·æ¬¾ä¹°æˆ¿ï¼Œç‚’è‚¡åŠ æ æ†ã€‚åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼ŒåŠŸèƒ½å’Œè®¾è®¡ç¡®å®æ˜¯ä¸€å¯¹çŸ›ç›¾ï¼Œæ¶æ„å¸ˆçš„èŒè´£æ¢ä¸€ç§è¡¨è¿°å°±æ˜¯åˆ©ç”¨å…¶ä¸“ä¸šçŸ¥è¯†ä¸ºåŠŸèƒ½å’Œè®¾è®¡åˆ†é…èµ„æºä»¥è·å¾—æœ€ä½³çš„å›æŠ¥ç‡ã€‚ å¯¹äºæ¶æ„å¸ˆçš„èŒè´£ä½œè€…è¿™æ ·è¯´ï¼Œè®¾è®¡è‰¯å¥½çš„æ¶æ„ï¼Œä½¿ç³»ç»Ÿæ˜“äºç†è§£ã€å¼€å‘ã€ç»´æŠ¤å’Œéƒ¨ç½²ã€‚æœ€ç»ˆç›®æ ‡æ˜¯æœ€å¤§é™åº¦åœ°é™ä½ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸæˆæœ¬å¹¶æœ€å¤§é™åº¦åœ°æé«˜ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ã€‚ æ¶æ„è®¾è®¡ä¹‹é“ Change is the only constant. å¦‚æœè¯´è½¯ä»¶å¼€å‘ä¸­æœ‰ä¸å˜çš„çœŸç†ï¼Œé‚£å°±æ˜¯å˜åŒ–ä¸å¯é¿å…ã€‚ä¸ºäº†åº”ä»˜å˜åŒ–ã€‚è½¯ä»¶å·¥ç¨‹å¸ˆæ€»ç»“å‡ºè®¸å¤šåŸåˆ™ï¼Œæ¯”å¦‚å°è£…å˜åŒ–ï¼Œé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–æŠ½è±¡ï¼Œæœ€å°‘çŸ¥è¯†åŸåˆ™ç­‰ç­‰ã€‚ è®°å¾—å¾ˆä¹…ä»¥å‰å¼€å§‹æ€è€ƒè½¯ä»¶çš„è®¾è®¡çš„æ—¶å€™ï¼Œæœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯ï¼Œä¸ºäº†å‡å°‘ä»£ç é‡è€Œè®¾è®¡ï¼Œç‰¹åˆ«æ˜¯æ»¥ç”¨ç»§æ‰¿ï¼Œå¯¼è‡´ä»£ç åƒµåŒ–é‡æ„åé¢å¯¹å˜åŒ–æ›´åŠ ç—›è‹¦ï¼Œå¦‚æœå½“æ—¶äº†è§£äº†ç§ç§åŸåˆ™ï¼Œç”Ÿæ´»è‚¯å®šå®¹æ˜“è®¸å¤šã€‚ æœ¬ä¹¦ç”¨äº†ä¸‰åˆ†ä¹‹ä¸€çš„ç¯‡å¹…æ¥è®²è¿™äº›åŸåˆ™ã€‚åŒ…æ‹¬ç”¨äºæŒ‡å¯¼å¦‚ä½•è®¾è®¡ç±»çš„ SOLID åŸåˆ™ï¼Œå’ŒæŒ‡å¯¼å¦‚ä½•è®¾è®¡ç»„ä»¶çš„å…­ä¸ªåŸåˆ™ã€‚è¿™é‡Œç±»ä¸å•å•æ˜¯é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œè€Œæ˜¯æ›´åŠ æ³›åŒ–åœ°æŒ‡ä¸€ç»„å‡½æ•°å’Œæ•°æ®ï¼Œä¹Ÿç§°ä¸ºæ¨¡å—ï¼ˆmoduleï¼‰ã€‚ è€Œç»„ä»¶æŒ‡çš„æ˜¯ï¼ŒæŒ‡çš„æ˜¯ç‹¬ç«‹çš„å¯éƒ¨ç½²å•å…ƒï¼Œæ˜¯æ¨¡å—çš„é›†åˆã€‚æ¯”å¦‚ java ä¸­çš„ jarï¼Œruby çš„ gemã€‚ SOLID åŸåˆ™æŒ‡å¯¼ç±»çš„è®¾è®¡åº”è¯¥å®¹å¿å˜åŒ–ã€æ˜“äºç†è§£ã€‚ç»„ä»¶åŸåˆ™æŒ‡å¯¼ç»„ä»¶çš„å†…èšå’Œç»„ä»¶é—´çš„è€¦åˆï¼Œå…¶å®ä¹Ÿæ˜¯ java çš„åˆ†åŒ…åŸåˆ™ã€‚ ç»„ä»¶å†…èšï¼š é‡ç”¨å‘å¸ƒç­‰ä»·åŸåˆ™ï¼ˆRelease/Reuse Equivalency Principleï¼‰ å…±åŒå°é—­åŸåˆ™ï¼ˆCommon Closure Principleï¼‰ å…±åŒé‡ç”¨åŸåˆ™ï¼ˆCommon Reuse Principleï¼‰ ç»„ä»¶è€¦åˆï¼š æ— ç¯ä¾èµ–åŸåˆ™ ADPï¼ˆAcycle Dependencies Principleï¼‰ ç¨³å®šä¾èµ–åŸåˆ™ SDPï¼ˆStable Dependencies Principleï¼‰ ç¨³å®šæŠ½è±¡åŸåˆ™ SAPï¼ˆStable Abstractions Principleï¼‰ ç¯‡å¹…æ‰€é™å°±ä¸è¿›è¡Œè§£é‡Šäº†ï¼Œä½œè€…è¿˜ä»‹ç»äº†ä¸¤ä¸ªåº¦é‡ç»„ä»¶ç¨³å®šæ€§å’ŒæŠ½è±¡æ€§çš„é‡ï¼š ä¸ç¨³å®šæ€§ï¼š\(I = F_{out}/(F_{in}+F_{out})\)ï¼Œ\(F_{in}\) ä¼ å…¥ä¾èµ–ï¼›\(F_{out}\) ä¼ å‡ºä¾èµ–ã€‚ä¾èµ–å…³ç³»åº”è¯¥ï¼Œé«˜ I å€¼ä¾èµ–ä½ I å€¼ã€‚ æŠ½è±¡æ€§ï¼š\(A = N_a/N_c\)ï¼Œ\(N_c\) ç±»çš„æ•°ç›®ï¼›\(N_a\) æŠ½è±¡ç±»æˆ–æ¥å£çš„æ•°ç›®ã€‚ ä½œè€…è¿˜èŠäº†ç¼–ç¨‹èŒƒå¼çš„å‘å±•ï¼Œä»–çš„è§‚ç‚¹ä¹ŸæŒºæœ‰æ„æ€ï¼šç¼–ç¨‹çš„å‘å±•ï¼Œæ˜¯ä¸€ä¸ªæ·»åŠ é™åˆ¶çš„è¿‡ç¨‹ã€‚ä¸‰ç§èŒƒå¼éƒ½ä»æˆ‘ä»¬èº«ä¸Šå¤ºèµ°äº†ä¸€äº›ä¸œè¥¿ã€‚æ¯ä¸€ç§éƒ½é™åˆ¶äº†æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚ ç»“æ„åŒ–ç¼–ç¨‹ï¼Œå¯¹ç›´æ¥æ§åˆ¶è½¬ç§»è¿›è¡Œäº†é™åˆ¶ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹é—´æ¥æ§åˆ¶è½¬ç§»è¿›è¡Œäº†æ§åˆ¶ å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯¹å˜é‡åˆ†é…è¿›è¡Œäº†é™åˆ¶ é¢å‘å¯¹è±¡æœ€æ ¸å¿ƒçš„å°±æ˜¯å¢å¼ºäº†å¤šæ€ï¼Œå¼•å…¥å¤šæ€åï¼Œé«˜çº§å‡½æ•°ä¾èµ–äºä½çº§å‡½æ•°çš„æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°ã€‚æŠŠå¯¹å…·ä½“å®ç°çš„ä¾èµ–åˆ†ç¦»å‡ºæ¥ã€‚ä½çº§çš„å®ç°ï¼Œå¯ä»¥è¢«ç‹¬ç«‹éƒ¨ç½²æ›´æ›¿ã€‚è¿™å°±æ˜¯ä¾èµ–åè½¬ã€‚å¯¹æ¶æ„å¸ˆæ¥è¯´æä¾›äº†ä½¿ç”¨å¤šæ€æ€§æ¥è·å¾—å¯¹ç³»ç»Ÿä¸­æ¯ä¸ªæºä»£ç ä¾èµ–å…³ç³»çš„ç»å¯¹æ§åˆ¶çš„èƒ½åŠ›ã€‚ å¦å¤–ï¼ŒDijkstra ã€ŠGo To Statement Considered Harmfulã€‹çš„æ•…äº‹ä¹Ÿå€¼å¾—äº†è§£ä¸€ä¸‹ã€‚ æ¸…æ™°æ¶æ„ Every problem in computer science can be solved with a layer of indirection (besides the problem of too many layers of indirection) æ¸…æ™°æ¶æ„ï¼Œåœ¨ 2011 å¹´ä½œè€…çš„åšå®¢å°±æœ‰æåˆ°è¿™ä¸ªåè¯ Clean Architectureï¼Œå¦ä¸€ç¯‡å¼•ç”¨æ¯”è¾ƒå¤šçš„åšæ–‡ The Clean Architecture å†™äº 12 å¹´ï¼Œå†…å®¹æ‰€è®²çš„å°±æ˜¯æœ¬ä¹¦çš„æ¸…æ™°æ¶æ„ã€‚ æ‰€ä»¥ï¼Œæ¸…æ™°æ¶æ„ä¸æ˜¯ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Œä»–æ˜¯å…­è¾¹å½¢æ¶æ„(Hexagonal Architecture)çš„ä¸€ä¸ªå˜ä½“ï¼ŒåŸºäºä»¥å¾€å¤šç§æ¶æ„çš„å‘å±•å’Œå½’çº³ï¼Œæå‡ºæ¥çš„ä¸€ä¸ªæ–°æ¶æ„æ¨¡å‹ã€‚ ä¼ ç»Ÿçš„åˆ†å±‚æ¶æ„æ˜¯å‚ç›´å½¢å¼çš„å±‚æ¬¡æ¶æ„ï¼Œæ¸…æ™°æ¶æ„æ˜¯ç”±å¤–å¾€å†…çš„åœ†ç¯çŠ¶å±‚æ¬¡æ¶æ„ï¼š è¿™æ ·æ¶æ„æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š ä¸€ä¸ªæ ¸å¿ƒ æŠ½è±¡æ€§å¾€å†…é€’å¢ å¤–å±‚ä¾èµ–å†…å±‚ å±‚ä¸å±‚ä¹‹é—´é€šè¿‡æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤æµ æ¡†æ¶ã€æ•°æ®åº“ã€UI ç­‰éƒ½æ˜¯ç»†èŠ‚ æ ¸å¿ƒçš„å®ä½“æŒ‡çš„å°±æ˜¯é¢†åŸŸå†…çš„å…³é”®ä¸šåŠ¡é€»è¾‘ï¼Œæœ€ä¸å¯èƒ½å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚è‹¹æœæ€»æ˜¯å¾€ä¸‹æ‰ï¼›ä¿é™©æ€»æœ‰æ‰¿ä¿äººã€æŠ•ä¿äººã€è¢«ä¿é™©äººã€å—ç›Šäººï¼›è¿˜è´·çš„ç­‰é¢æœ¬æ¯ã€ç­‰é¢æœ¬é‡‘ç®—æ³•ã€‚å…³é”®ä¸šåŠ¡é€»è¾‘åº”è¯¥æ˜¯ç³»ç»Ÿä¸­æœ€ç‹¬ç«‹å’Œå¯é‡ç”¨çš„ä»£ç ã€‚ ç¬¬äºŒå±‚æ˜¯ç”¨ä¾‹ï¼Œç”¨ä¾‹æ˜¯åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚ç”¨ä¾‹å…³æ³¨ä¸è¾“å…¥æ•°æ®å¹¶äº§ç”Ÿè¾“å‡ºæ•°æ®ï¼Œä½†ç”¨ä¾‹å¯¹è±¡ä¸åº”å»å…³å¿ƒæ•°æ®å¦‚ä½•ä¼ é€’ç»™ç”¨æˆ·æˆ–å…¶ä»–ä»»ä½•ç»„ä»¶ã€‚ æ¥ç€æ˜¯æ¥å£é€‚é…å±‚ï¼Œå°†å®ä½“å’Œç”¨ä¾‹è½¬åŒ–ä¸ºæ›´é€‚ç”¨å¤–å±‚ä½¿ç”¨çš„å½¢å¼ã€‚å°†å¤–éƒ¨æ•°æ®è½¬åŒ–ä¸ºç”¨ä¾‹æˆ–å®ä½“ä½¿ç”¨çš„å†…éƒ¨å½¢å¼ã€‚è¿™ä¸€å±‚æœ€å¼ºå¤§çš„å·¥å…·å°±æ˜¯ä¾èµ–å€’ç½®ï¼Œä»¥ MVP ä¸ºä¾‹ï¼Œæ›´æ–°ç•Œé¢çš„æ—¶å€™ï¼Œæ§åˆ¶æµçš„æ–¹å‘ Presenter -&amp;gt; UIï¼Œè€Œä¾èµ–å…³ç³»å´æ˜¯ UI ä¾èµ–äº Presenter å±‚ï¼ˆå®ç°äº† Presenter å±‚ç›¸åº”çš„ View æ¥å£ï¼‰ UI åœ¨å¤–å±‚è¿™ä¸ªç†æ‰€å½“ç„¶äº†ï¼Œåå­—æœ¬èº«å°±è¯´æ˜äº†å®ƒç›´æ¥å’Œç”¨æˆ·æ‰“äº¤é“ï¼Œè€Œä¸” UI æ˜¯æŒæ§åœ¨è®¾è®¡å’Œäº§å“æ‰‹é‡Œï¼Œè¶Šä¸èƒ½æ§åˆ¶çš„ä¸œè¥¿è¶Šè¦å°å¿ƒå…¶å˜åŒ–ã€‚ ä¼ ç»Ÿçš„åˆ†å±‚ç»“æ„ï¼Œæ•°æ®åº“æ€»æ˜¯å¤„äºæœ€åº•å±‚ï¼Œä½†å…¶ä¸­æ•°æ®æ‰æ˜¯å…³é”®ï¼Œæ•°æ®åº“ä¸æ˜¯ã€‚å…³ç³»å‹æ•°æ®åº“åªä¸è¿‡æ˜¯æŠŠæ•°æ®æŒ‰ b+ æ ‘è¿™æ ·çš„ç»“æ„å­˜å‚¨èµ·æ¥ï¼Œç„¶åé€šè¿‡ SQL æ¥æ“ä½œæ•°æ®ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶å­˜å‚¨æ•°æ®ï¼Œç”šè‡³å¯ä»¥è„±ç¦»ç¡¬ç›˜ç›´æ¥åœ¨å†…å­˜é‡Œé¢ç”¨æ•°ç»„ã€é“¾è¡¨ã€æ ‘ã€å›¾ç­‰æ•°æ®ç»“æ„ç»„ç»‡æˆ‘ä»¬çš„æ•°æ®ï¼Œæ¯•ç«Ÿå†…å­˜ä»·æ ¼è¶Šæ¥è¶Šä¾¿å®œäº†ï¼ˆäº”å¹´ä¸€ä¸ªå–æ ·ï¼Œå°±å¯ä»¥æ— è§†è¿‘å‡ å¹´ PC å†…å­˜çš„æ¶¨å¹…äº†ğŸ˜†ï¼‰ã€‚å…¶ä¸­å…³é”®çš„ç‚¹å°±æ˜¯æ¨è¿Ÿå†³å®šï¼Œæˆ‘ä»¬å¾ˆéš¾åœ¨åˆæœŸå¯¹æˆ‘ä»¬çš„æ•°æ®ä½¿ç”¨åœºæ™¯åšä¸ªå‡†ç¡®çš„é¢„æµ‹ï¼Œæ•°æ®åº“ä½œä¸ºç»†èŠ‚éš”ç¦»åœ¨æ ¸å¿ƒç³»ç»Ÿå¤–ï¼Œä»¥åå› ä¸ºæ€§èƒ½è§„æ¨¡ç­‰ç­‰é—®é¢˜å˜åŠ¨æ•°æ®åº“æ›´åŠ å®¹æ˜“ã€‚ ä½†æ¡†æ¶å‘¢ï¼Ÿæ¡†æ¶æ€»æ˜¯é¼“åŠ±æˆ‘ä»¬å’Œåº”ç”¨ç¨‹åºç´§å¯†çš„è€¦åˆåœ¨ä¸€èµ·ï¼Œå®ƒæä¾›ä¸€ç§æ¨¡å¼ï¼Œåªè¦æˆ‘ä»¬æœä»è¿™ä¸ªæ¨¡å¼å°±èƒ½è·å¾—æå¤§çš„ä¾¿åˆ©ï¼Œä»£ä»·å°±æ˜¯è¿™ä¸ªæ¡†æ¶å’Œæˆ‘ä»¬åº”ç”¨çš„å„ä¸ªå±‚æ¬¡ç´§å¯†åœ°è€¦åˆåœ¨ä¸€èµ·ã€‚è¿™æœ‰ä»€ä¹ˆé£é™©ï¼Ÿå…¶ä¸€ï¼Œæ¡†æ¶ä¹Ÿè®¸å¯ä»¥å¸®åŠ©æ‚¨å®Œæˆåº”ç”¨ç¨‹åºçš„ä¸€äº›æ—©æœŸåŠŸèƒ½ã€‚ ä½†æ˜¯éšç€äº§å“çš„æˆç†Ÿï¼Œå®ƒå¯èƒ½ä¼šè¶…å‡ºæ¡†æ¶çš„åŠŸèƒ½ã€‚å…¶äºŒï¼Œæ¡†æ¶å¯èƒ½ä¼šæœç€ä½ æ²¡æœ‰å¸®åŠ©çš„æ–¹å‘å‘å±•ï¼Œä½ ç”šè‡³å¯èƒ½ä¼šå‘ç° API æ¶ˆå¤±ã€æ”¹å˜äº†ï¼Œå› ä¸ºæ§åˆ¶æƒåœ¨ä½œè€…è€Œä¸æ˜¯åœ¨ä½ æ‰‹ä¸Šã€‚å…¶ä¸‰å°±æ˜¯æ€»æœ‰æ–°æ¡†æ¶å‡ºæ¥ï¼Œä½ å¯èƒ½å¸Œæœ›åˆ‡æ¢åˆ°æ›´æ–°æ›´å¥½çš„æ¡†æ¶ã€‚ æœ€è¿‘ä¸€ä¸ªæœ‹å‹ç»´æŠ¤è€é¡¹ç›®é‡åˆ°ä¸€ä¸ª android-async-http çš„é—®é¢˜å‘æˆ‘æ±‚åŠ©ï¼Œandroid-async-httpï¼ï¼ï¼è¿™ä¸ªä¸æ˜¯æˆ‘ä¸€å¼€å§‹åš Android é¡¹ç›®ç”¨çš„ç½‘ç»œåº“å—ï¼Ÿèµ·ç ä¹Ÿæ˜¯ 11ã€12 å¹´çš„äº‹äº†ã€‚è™½ç„¶æ˜¯ä¸ªä¸é”™çš„åº“ä½†ä¹Ÿä¸ç»´æŠ¤å‡ å¹´äº†å§ã€‚é‡åˆ°åº•å±‚çš„ Bug åˆ«ææœ‰å¤šæ£˜æ‰‹äº†ï¼Œè€Œä¸”ç»´æŠ¤çš„ä»·å€¼å·²ä¸å¤§ï¼ŒæŠ•å…¥å¤ªå¤šæ—¶é—´åˆè§‰å¾—äºï¼Œæœ€ç»ˆåªèƒ½ç”¨ä¸€äº›é¢å¤–çš„æªæ–½æŠŠå®ƒæ©ç›–è¿‡å»ã€‚ ä½†åˆ†ç¦»æ¡†æ¶ï¼Œè°ˆä½•å®¹æ˜“å‘¢ã€‚è¿™å‡ å¹´å†™çš„ Appï¼Œæ•°æ®å±‚ä¹Ÿä»æ‰‹å†™ Dao åˆ° greenDao åˆ° DBFlow å†åˆ°ç°åœ¨çš„ Roomã€‚Room è™½ç„¶æœ‰å®˜æ–¹åŠ æŒï¼Œä½†ä»¥è°·æ­Œçš„å°¿æ€§è¢«å¼ƒç”¨ä¹Ÿæ˜¯éšæ—¶çš„äº‹ã€‚å¦‚æœå¼•å…¥ Roomï¼Œæœ€å†…å±‚çš„ Entity å°±å¾—ä½¿ç”¨ Room çš„æ³¨è§£ä¾¿ä¼šå¯¹ Room çš„ä¾èµ–ã€‚å¦‚æœè¦åˆ†ç¦»å‘¢ï¼Œå°±éœ€è¦åœ¨æ•°æ®å±‚ä¹Ÿå®šä¹‰ä¸€å¥— Entityï¼Œå±‚å±‚ä¹‹é—´çš„æ•°æ®ä¼ é€’è¿˜éœ€è¦åšè½¬æ¢ï¼ŒæŠŠæ ¸å¿ƒçš„ Entity è½¬æ¢ä¸ºæ•°æ®å±‚çš„ Entityï¼Œè¿™æ ·åšå°±å¾ˆæ¸…æ™°æ¶æ„äº†1ï¼Œä½†æ˜¯æœ‰å¿…è¦å—ï¼Ÿ æ¶æ„çš„çŸ›ç›¾åœ¨äºï¼Œæˆ‘ä»¬ä¸åº”è¯¥é¢„è§æŠ½è±¡çš„å¿…è¦æ€§ã€‚çŸ¥é“ YAGNIï¼ˆYou arenâ€™t gonna need itï¼‰å—ï¼Ÿè¿™æ˜¯ä¸ªé¥±å«æ™ºæ…§çš„ç†å¿µï¼šâ€œä½ ä¸éœ€è¦å®ƒã€‚â€ã€‚å› ä¸ºè¿‡åº¦å·¥ç¨‹å¾€å¾€æ¯”ä¸å¤Ÿå·¥ç¨‹åŒ–æ›´ç³Ÿç³•ã€‚å…¸å‹çš„ç§»åŠ¨åº”ç”¨ç¨‹åºä¸å…¸å‹çš„ä¼ä¸šåº”ç”¨ç¨‹åºæœ‰å¾ˆå¤§ä¸åŒã€‚å®ƒè¦å°å¾—å¤šï¼Œå¹¶ä¸”é€šå¸¸éœ€è¦å¿«é€Ÿäº¤ä»˜ã€‚è®°ä½æ¶æ„æ˜¯æ¼”åŒ–çš„ï¼Œä¸èƒ½ç®€å•åœ°åœ¨é¡¹ç›®çš„å¼€å§‹æ—¶å†³å®šå®æ–½å“ªäº›è¾¹ç•Œä»¥åŠå¿½ç•¥å“ªäº›è¾¹ç•Œã€‚ç›¸åï¼Œéšç€ç³»ç»Ÿçš„å‘å±•ï¼Œè¾¹ç•Œä¼šæ…¢æ…¢å˜çš„æ¸…æ™°ï¼Œä½ ä¼šå…³æ³¨åˆ°å®ƒï¼Œå†æƒè¡¡å®æ–½å’Œå¿½ç•¥çš„æˆæœ¬ï¼Œåœ¨å®æ–½æˆæœ¬ä½äºå¿½ç•¥æˆæœ¬çš„æ‹ç‚¹æ—¶åšå‡ºå†³å®šã€‚ ä¸èƒ½æ‰‹é‡Œæœ‰ä¸ªé”¤å­çœ‹åˆ°ä»€ä¹ˆéƒ½æ˜¯é’‰å­ã€‚å°±åƒå½“åˆå­¦è®¾è®¡æ¨¡å¼ä¸€æ ·ï¼Œå­¦äº†ä¹‹ååˆè¦è®©ä½ å¿˜æ‰å®ƒã€‚ Android-CleanArchitecture å°±æ˜¯è¿™æ ·çš„è®¾è®¡ï¼Œä½†åœ¨ Kotlin ç‰ˆå·²ç»ä¸ç”¨äº†ã€‚Â &amp;#8617;</summary></entry><entry><title type="html">æ–°å¹´æ–°åšå®¢</title><link href="http://dourok.info/2018/01/02/new-year-new-blog/" rel="alternate" type="text/html" title="æ–°å¹´æ–°åšå®¢" /><published>2018-01-02T00:00:00+00:00</published><updated>2018-09-27T09:26:14+00:00</updated><id>http://dourok.info/2018/01/02/new-year-new-blog</id><content type="html" xml:base="http://dourok.info/2018/01/02/new-year-new-blog/">&lt;h3 id=&quot;è¿ç§»-jekyll&quot;&gt;è¿ç§» Jekyll&lt;/h3&gt;
&lt;p&gt;ç½‘ç«™åœ¨ 18 å¹´å…ƒæ—¦ç»ˆäºé‡åšçš„å·®ä¸å¤šäº†ï¼Œäº”å¹´å‰ä¹°çš„ä¸»æœºåœ¨å»å¹´ 12 æœˆè¿‡æœŸäº†ï¼Œä¿ƒä½¿æˆ‘ç»ˆäºå°†æ‹–äº†ä¸€å¹´å¤šçš„ Jekyll è¿ç§»è®¡åˆ’è½åœ°ã€‚Ruhoh ä» 14 å¹´å°±å†æ²¡æœ‰æ›´æ–°ï¼Œè™½ç„¶ç”¨èµ·æ¥æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æ€»æœ‰ä¸€äº›å°æ¯›ç—…ï¼Œæ¯”å¦‚ç”Ÿæˆé€Ÿåº¦è¿‡æ…¢(Jekyll ä¹Ÿä¸å¿«ï¼Œ15 æ¬¾é«˜é… MBP å…¨ç«™ç”Ÿæˆéƒ½å¤§æ¦‚è¦ 10ç§’)ï¼Œå®æ—¶é¢„è§ˆçš„åŠŸèƒ½ä¹Ÿæ²¡æœ‰ Jekyll çš„å¢é•¿å¼æ„å»ºé‚£ä¹ˆå¼ºå¤§ã€‚ä½œä¸ºä¸€ä¸ªå°ä¼—çš„é™æ€åšå®¢ç”Ÿæˆç³»ç»ŸåŸºæœ¬ä¹Ÿæ²¡ä»€ä¹ˆç”Ÿæ€ï¼Œè¿ç§»åˆ°ä¸»æµçš„ Jekyll æ˜¯è¿Ÿæ—©çš„äº‹ï¼Œåªä¸è¿‡æˆ‘å¯¹ Ruhoh åšäº†ä¸å°‘å®šåˆ¶ï¼Œè¿ç§»è¦åœ¨ Jekyll è¿™è¾¹é‡æ–°å®ç°ä¸€éæŒºè´¹æ—¶é—´çš„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¤§çš„é—®é¢˜å°±æ˜¯ç¬”è®°ç³»ç»Ÿï¼ŒJekyll å’Œ Ruhoh éƒ½æ”¯æŒé¡µé¢èµ„æºçš„å½’ç±»å’Œç®¡ç†ï¼ŒJekyll ä¸­å« Collectionï¼ŒRuhoh å« Resourceã€‚Jekyll çš„ç†å¿µæ˜¯æ‰€æœ‰ Collection ç”Ÿè€Œå¹³ç­‰ï¼Œä½†æœ‰äº› Collection æ›´å¹³ç­‰ã€‚æ¯”å¦‚å…¶ä»– Collection å°±ä¸åƒ Posts é‚£æ ·è‡ªå¸¦æ ‡ç­¾æ±‡æ€»ã€‚Ruhoh çš„ Resource æ‰æ˜¯çœŸå¹³ç­‰ï¼Œé€šè¿‡æ’ä»¶æ‰©å±•çš„èƒ½åŠ›ä¹Ÿæ›´å¼ºå¤§å½“ç„¶ä¹Ÿæ›´ç¹çã€‚ä¹‹å‰çš„ç¬”è®°å’Œæ—¥è®°å°±æ˜¯é€šè¿‡è‡ªå®šä¹‰ Resource å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;ç”¨ Jekyll å®ç°ç¬”è®°ç³»ç»Ÿæˆ‘æ²¡æœ‰å¯¹ Collection è¿›è¡Œæ‰©å±•ï¼Œé€šè¿‡é…ç½®æ¥å®ç°éƒ¨åˆ†åŠŸèƒ½ï¼Œèˆå¼ƒäº†çˆ¶ç±»åˆ«ä¹Ÿèƒ½ç”Ÿæˆé¡µé¢çš„åŠŸèƒ½ã€‚ç¬”è®°çš„æ ‘ç»“æ„ json é€šè¿‡ generator æ’ä»¶å®ç°ã€‚æ ‡ç­¾å½’çº³ä¹Ÿå¾—è‡ªå·±å®ç°ã€‚å›ºå®šè¿æ¥åè€Œæ˜¯æœ€ç®€å•çš„ï¼Œä¸€æ¡é…ç½®æå®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;scope:
  type: &quot;notes&quot;
values:
  layout: &quot;note&quot;
  permalink: &quot;/:collection/:path/&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦å¤–è¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰æ’ä»¶ï¼Œæ¯”å¦‚ LaTeXï¼Œ &lt;code&gt;Kramdown&lt;/code&gt; æ˜¯é»˜è®¤æ”¯æŒçš„ã€‚è‡³äº &lt;a href=&quot;https://graphviz.gitlab.io/&quot;&gt;graphviz&lt;/a&gt;ï¼Œæˆ‘å‘ç° Kramdown çš„å®šåˆ¶æ¯” Redcarpet éº»çƒ¦ã€‚æœ€åè¿˜æ˜¯å†³å®šç”¨è‡ªå®šä¹‰ liquid &lt;a href=&quot;https://jekyllrb.com/docs/plugins/#tags&quot;&gt;tags&lt;/a&gt; å®ç°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{% graphviz %}
digraph G {
	subgraph cluster_0 {
	....

	start [shape=Mdiamond];
	end [shape=Msquare];
}
{% endgraphviz %}
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&quot;graphviz&quot; data-graph=&quot;
digraph G {

	subgraph cluster_0 {
		style=filled;
		color=lightgrey;
		node [style=filled,color=white];
		a0 -&amp;gt; a1 -&amp;gt; a2 -&amp;gt; a3;
		label = &amp;quot;process #1&amp;quot;;
	}

	subgraph cluster_1 {
		node [style=filled];
		b0 -&amp;gt; b1 -&amp;gt; b2 -&amp;gt; b3;
		label = &amp;quot;process #2&amp;quot;;
		color=blue
	}
	start -&amp;gt; a0;
	start -&amp;gt; b0;
	a1 -&amp;gt; b3;
	b2 -&amp;gt; a3;
	a3 -&amp;gt; a0;
	a3 -&amp;gt; end;
	b3 -&amp;gt; end;

	start [shape=Mdiamond];
	end [shape=Msquare];
}
&quot;&gt;
        &lt;/div&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯&lt;a href=&quot;https://github.com/douo/douo.github.com/blob/develop/_plugins/ruhoh_jekyll.rb&quot;&gt;è¿ç§»è„šæœ¬&lt;/a&gt;ï¼Œé¦–å…ˆå°†æ–‡ç« çš„æ–‡ä»¶åè½¬æ¢ä¸ºç¬¦åˆ Jekyll è§„åˆ™ã€‚ Ruhoh ç”¨çš„æ¨¡æ¿è¯­è¨€æ˜¯ &lt;a href=&quot;https://mustache.github.io&quot;&gt;Mustache&lt;/a&gt;ï¼Œçœ¼çœ‹ Mustache è¢«å¾®ä¿¡å°ç¨‹åºé€‰ç”¨äº†æœ‰æœºä¼šç«äº†ï¼Œåˆè¢«æˆ‘æ”¾å¼ƒäº†â€¦â€¦ Markdown å¼•æ“æ˜¯ &lt;a href=&quot;https://github.com/vmg/redcarpet&quot;&gt;Redcarpet&lt;/a&gt;ï¼ŒJekyll åˆ™æ˜¯ &lt;a href=&quot;https://shopify.github.io/liquid/&quot;&gt;Liquid&lt;/a&gt; å’Œ &lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;Kramdown&lt;/a&gt;ï¼Œæ‰€ä»¥è¿˜éœ€å¯¹å†…æ–‡åšä¸€äº›è½¬æ¢å’Œè¿‡æ»¤ã€‚è¿˜æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å°†é¡µé¢å¼•ç”¨çš„æœ¬åœ°èµ„æºè¿›è¡Œæ•´ç†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;resource-ç®¡ç†&quot;&gt;Resource ç®¡ç†&lt;/h3&gt;

&lt;p&gt;å¯¹é¡µé¢èµ„æºè¿›è¡Œç®¡ç†æ˜¯ç”±æ¥å·²ä¹…çš„æƒ³æ³•ã€‚è¦æ±‚æ¯ç¯‡æ–‡ç« ï¼ˆDocumentï¼‰çš„éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„èµ„æºç›®å½•ï¼Œç„¶åç›®å½•å†…çš„æ–‡ä»¶éƒ½å¯ä»¥åœ¨æ­£æ–‡å†…é€šè¿‡ç›¸å¯¹è·¯å¾„è®¿é—®ã€‚è¿™æ ·å°±ä¸ç”¨å†å°†æ‰€æœ‰èµ„æºéƒ½æŒ¤åœ¨ media æ–‡ä»¶å¤¹ï¼Œè¿˜å¾—ç”¨ä¸€ä¸ª`` æ¥è·å– media çš„ç›¸å¯¹è·¯å¾„ã€‚å®ç°æ˜¯é€šè¿‡ä¸€ä¸ª &lt;a href=&quot;https://github.com/douo/douo.github.com/blob/develop/_plugins/resource_generator.rb&quot;&gt;generator&lt;/a&gt; å°†èµ„æºæ‹·è´åˆ°ç›¸åº”è·¯å¾„å®ç°çš„ï¼Œæœ€ç»ˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;_res
â”œâ”€â”€ notes
â”‚Â Â  â”œâ”€â”€ Programming
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Android
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ loader
â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Loader.png
â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ loader_event.png
â”‚Â Â  â”œâ”€â”€ Reading
â”‚Â Â  â”‚Â Â  â””â”€â”€ computer-systems-a-programmer-s-perspective
â”‚Â Â  â”‚Â Â      â””â”€â”€ CSAPP
â”‚Â Â  â”‚Â Â          â”œâ”€â”€ CSAPP-5.10&amp;amp;5.11.png
â”‚Â Â  â”‚Â Â          â”œâ”€â”€ CSAPP-5.5&amp;amp;5.6.png
â”‚Â Â  â”‚Â Â          â”œâ”€â”€ address_translation.png
â”‚Â Â  â”‚Â Â          â””â”€â”€ process_address_space.png
â””â”€â”€ posts
    â”œâ”€â”€ 2013-08-16-the-pain-of-note
    â”‚Â Â  â””â”€â”€ note_system_review.js
    â”œâ”€â”€ 2013-10-22-the-pain-of-note-2
    â”‚Â Â  â””â”€â”€ categories.org
    â”œâ”€â”€ 2016-12-24-hierarchy-fragment-pager-adapter
    â”‚Â Â  â”œâ”€â”€ b_aa_ba_ca.png
    â”‚Â Â  â”œâ”€â”€ b_ba_baa_baaa.png
    â”‚Â Â  â””â”€â”€ b_ba_ca.png
    â”œâ”€â”€ 2017-10-20-lambda-in-android
    â”‚Â Â  â””â”€â”€ desugar_diagram.png
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;å‘½ä»¤è¡Œæ¥å£&quot;&gt;å‘½ä»¤è¡Œæ¥å£&lt;/h3&gt;

&lt;p&gt;Jekyll æ˜¯æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œæ“ä½œçš„å‘½ä»¤è¡Œæ¥å£çš„ï¼Œè¿™ç‚¹è¿˜æ˜¯ Ruhoh åšå¾—æ¯”è¾ƒå¥½ï¼Œå¯ä»¥å¯¹æ¯ä¸ª Resource/Collection çš„å‘½ä»¤è¡Œæ¥å£è¿›è¡Œå®šåˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;Jekyll è¦å¯ä»¥é€šè¿‡ Commands æ’ä»¶å®ç°å‘½ä»¤è¡Œæ¥å£ã€‚è§ &lt;a href=&quot;https://github.com/douo/douo.github.com/tree/develop/jekyll-moon&quot;&gt;jekyll-moon&lt;/a&gt;ï¼Œç›®å‰æ‰©å±•äº† &lt;code&gt;create&lt;/code&gt; å‘½ä»¤ï¼Œå®ç°äº†åˆ›å»º post å’Œ noteã€‚æ¥ä¸‹æ¥è¿˜éœ€è¦å®ç°åˆ›å»ºèµ„æºç›®å½•ã€å†…æ–‡æœç´¢ï¼Œlist ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸»é¢˜&quot;&gt;ä¸»é¢˜&lt;/h3&gt;

&lt;p&gt;åå°çš„äº‹è¯´å¾—å·®ä¸å¤šï¼Œæ¥ä¸‹æ¥è¯´è¯´å‰å°ã€‚ä¸»é¢˜å’Œç½‘ç«™ç»“æ„é‡æ–°åšäº†è®¾è®¡ã€‚åŸºäº &lt;a href=&quot;http://materializecss.com/&quot;&gt;Materialize&lt;/a&gt; ä¸»é¢˜ä¹Ÿæ˜¯åƒç´ çº§ç…§æ¬ã€‚ä¸è¿‡ä¹Ÿç®—å®ç°äº†ä¸€ç›´å¾ˆæƒ³åšçš„ MD è®¾è®¡ã€‚&lt;/p&gt;

&lt;p&gt;ç”¨äº† ES6 å’Œ Sassï¼ŒJekyll é»˜è®¤æ”¯æŒ Sass å¤„ç†å™¨ã€‚è‡³äº Es6 ç”¨çš„æ˜¯ jekyll-babelï¼Œbabel-sourceï¼ˆ5.8.35ï¼‰ å¿«ä¸¤å¹´æ²¡æ›´æ–°äº†ï¼Œçœ‹æ¥ Rubier è¿˜æ˜¯å–œå¥½ coffee-script å¤šä¸€äº›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æœç´¢&quot;&gt;æœç´¢&lt;/h3&gt;

&lt;p&gt;ç½‘ç«™æœ€å¤§çš„çªç ´æ˜¯ç»ˆäºæœ‰äº†èƒ½ç”¨çš„æœç´¢ï¼ŒåŸºäº &lt;a href=&quot;https://lunrjs.com/&quot;&gt;Lunr&lt;/a&gt; å®ç°çš„æµè§ˆå™¨ç«¯çš„æœç´¢ã€‚ç›®å‰åªå¯¹æ ‡é¢˜å’Œæ ‡ç­¾è¿›è¡Œç´¢å¼•ã€‚&lt;/p&gt;

&lt;p&gt;Lunr é»˜è®¤ä¸æ”¯æŒä¸­æ–‡ï¼Œå®ƒçš„å»ºç«‹ç´¢å¼•çš„è¿‡ç¨‹æ˜¯å…ˆé€šè¿‡åˆ†è¯å™¨è¿›è¡Œå¤„ç†ï¼Œ&lt;a href=&quot;https://github.com/olivernn/lunr.js/blob/master/lib/tokenizer.js&quot;&gt;tokenizer.js&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å†å¯¹æ¯ä¸ª tokenï¼Œé€šè¿‡ pipeline è¿›è¡Œå¤„ç†ï¼Œé»˜è®¤æœ‰ä¸‰ä¸ª pipelineï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;builder.pipeline.add(
    lunr.trimmer, // è¿‡æ¥æ‰€ä»¥é \W å­—ç¬¦ï¼Œä¸­æ–‡ä¼šåœ¨è¿™é‡Œè¢«è¿‡æ»¤æ‰
    lunr.stopWordFilter, // è¿‡æ»¤åœæ­¢è¯
    lunr.stemmer // è¿”å›è¯å¹²
  )
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è€ƒè™‘åˆ°ä¸­æ–‡åˆ†è¯çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥æˆ‘å°†åˆ†è¯æ”¾åœ¨ Ruby ç«¯å¤„ç†ï¼Œæ‰¾äº†ä¸€éæ²¡æœ‰æ‰¾åˆ°ç‰¹åˆ«åˆé€‚çš„åˆ†è¯å™¨ï¼Œä¸»è¦æ˜¯ä¸æƒ³æœ‰ native extensionï¼Œåœ¨ travis-ci ä¸Šéƒ¨ç½²ä¸æ–¹ä¾¿ã€‚æ‰€ä»¥ç›®å‰åªæ˜¯å•çº¯å°†ä¸­æ–‡ä¸è‹±æ–‡åˆ†éš”å¼€è€Œå·²ï¼Œè§ &lt;a href=&quot;https://github.com/douo/douo.github.com/blob/develop/_plugins/index_generator.rb&quot;&gt;index_generator.rb&lt;/a&gt;ã€‚è¦æœç´¢ä¸­æ–‡æœ€å¥½è¿˜æ˜¯å¾—æ‰‹åŠ¨åŠ ä¸Šé€šé…ç¬¦ï¼ŒLunr çš„æœç´¢ç”¨æ³•å¯å‚è€ƒ &lt;a href=&quot;https://lunrjs.com/guides/searching.html&quot;&gt;Searching : Lunr&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;è‡ªåŠ¨éƒ¨ç½²&quot;&gt;è‡ªåŠ¨éƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;GitHub è™½ç„¶æ”¯æŒ Jekyllï¼Œä½†æˆ‘åŠ äº†ä¸å°‘ Jekyll æ’ä»¶ï¼Œæƒ³ç›´æ¥ç”¨ GitHub æ¥éƒ¨ç½²æ˜¯ä¸å¯èƒ½çš„ã€‚ä¸è¿‡ä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•çš„ï¼Œæ¯”å¦‚ç”¨å…è´¹çš„æŒç»­é›†æˆæœåŠ¡ &lt;a href=&quot;https://travis-ci.org&quot;&gt;travis-ci.org&lt;/a&gt; æ¥å®ç°æŒç»­éƒ¨ç½²ï¼ŒTravis æ”¯æŒéƒ¨ç½²åˆ° GitHub Pageï¼Œå‡ è¡Œé…ç½®æå®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard
  local_dir: ${TRAVIS_BUILD_DIR}/_site
  target_branch: master
  on:
    branch: develop
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Jekyll çš„æŒç»­é›†æˆå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ &lt;a href=&quot;https://jekyllrb.com/docs/continuous-integration/travis-ci/&quot;&gt;Travis CI | jekyll&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ”¯æŒ-https-çš„å…è´¹ä¸»æœº&quot;&gt;æ”¯æŒ HTTPS çš„å…è´¹ä¸»æœº&lt;/h3&gt;

&lt;p&gt;åˆ°è¿™é‡ŒåŸºæœ¬å®ç°äº† &lt;code&gt;push&lt;/code&gt; åè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²åˆ° https://douo.github.com ç”± GitHub æ¥å…è´¹æ‰˜ç®¡ï¼Œä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸå2ï¼Œä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆç¾å¥½ã€‚ä½†è¦ä¸ºè‡ªå·±çš„åŸŸåæ·»åŠ å…è´¹ HTTPS æ”¯æŒå°±æ²¡é‚£ä¹ˆå®¹æ˜“ã€‚å¹¸å¥½ &lt;a href=&quot;https://www.netlify.com/&quot;&gt;Netlify&lt;/a&gt; æ°èƒ½æä¾›è¿™æ ·çš„æœåŠ¡ï¼Œå¹¶æ”¯æŒç»‘å®šå…è´¹çš„ &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Letâ€™s Encrypt - Free SSL/TLS Certificates&lt;/a&gt; è¯ä¹¦ï¼Œå…·ä½“å¯å‚è€ƒï¼š&lt;a href=&quot;https://jaeger.itscoder.com/web/2017/08/30/github-page-https&quot;&gt;GitHub Page åšå®¢è‡ªå®šä¹‰åŸŸåæ·»åŠ  HTTPS æ”¯æŒ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ›´æ–°&quot;&gt;æ›´æ–°&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;2018å¹´05æœˆ29æ—¥ï¼Œå¼•å…¥ webpack ç®¡ç†å‰ç«¯èµ„æºï¼Œä½¿ç”¨ &lt;a href=&quot;https://github.com/clenemt/clenemt.com.git&quot;&gt;clenemt&lt;/a&gt; çš„é…ç½®ã€‚&lt;/li&gt;
  &lt;li&gt;2018å¹´09æœˆ27æ—¥ï¼Œgithub å·²ç»æ”¯æŒ&lt;a href=&quot;https://blog.github.com/2018-05-01-github-pages-custom-domains-https/&quot;&gt;è‡ªå®šä¹‰åŸŸå https&lt;/a&gt;ï¼Œæ‰€ä»¥ä» netlify è¿å› github äº†ï¼Œnetlify é€Ÿåº¦å®åœ¨å¤ªæ…¢ã€‚&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="jekyll" /><category term="ruhoh" /><category term="lunr" /><summary type="html">è¿ç§» Jekyll ç½‘ç«™åœ¨ 18 å¹´å…ƒæ—¦ç»ˆäºé‡åšçš„å·®ä¸å¤šäº†ï¼Œäº”å¹´å‰ä¹°çš„ä¸»æœºåœ¨å»å¹´ 12 æœˆè¿‡æœŸäº†ï¼Œä¿ƒä½¿æˆ‘ç»ˆäºå°†æ‹–äº†ä¸€å¹´å¤šçš„ Jekyll è¿ç§»è®¡åˆ’è½åœ°ã€‚Ruhoh ä» 14 å¹´å°±å†æ²¡æœ‰æ›´æ–°ï¼Œè™½ç„¶ç”¨èµ·æ¥æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æ€»æœ‰ä¸€äº›å°æ¯›ç—…ï¼Œæ¯”å¦‚ç”Ÿæˆé€Ÿåº¦è¿‡æ…¢(Jekyll ä¹Ÿä¸å¿«ï¼Œ15 æ¬¾é«˜é… MBP å…¨ç«™ç”Ÿæˆéƒ½å¤§æ¦‚è¦ 10ç§’)ï¼Œå®æ—¶é¢„è§ˆçš„åŠŸèƒ½ä¹Ÿæ²¡æœ‰ Jekyll çš„å¢é•¿å¼æ„å»ºé‚£ä¹ˆå¼ºå¤§ã€‚ä½œä¸ºä¸€ä¸ªå°ä¼—çš„é™æ€åšå®¢ç”Ÿæˆç³»ç»ŸåŸºæœ¬ä¹Ÿæ²¡ä»€ä¹ˆç”Ÿæ€ï¼Œè¿ç§»åˆ°ä¸»æµçš„ Jekyll æ˜¯è¿Ÿæ—©çš„äº‹ï¼Œåªä¸è¿‡æˆ‘å¯¹ Ruhoh åšäº†ä¸å°‘å®šåˆ¶ï¼Œè¿ç§»è¦åœ¨ Jekyll è¿™è¾¹é‡æ–°å®ç°ä¸€éæŒºè´¹æ—¶é—´çš„ã€‚ æœ€å¤§çš„é—®é¢˜å°±æ˜¯ç¬”è®°ç³»ç»Ÿï¼ŒJekyll å’Œ Ruhoh éƒ½æ”¯æŒé¡µé¢èµ„æºçš„å½’ç±»å’Œç®¡ç†ï¼ŒJekyll ä¸­å« Collectionï¼ŒRuhoh å« Resourceã€‚Jekyll çš„ç†å¿µæ˜¯æ‰€æœ‰ Collection ç”Ÿè€Œå¹³ç­‰ï¼Œä½†æœ‰äº› Collection æ›´å¹³ç­‰ã€‚æ¯”å¦‚å…¶ä»– Collection å°±ä¸åƒ Posts é‚£æ ·è‡ªå¸¦æ ‡ç­¾æ±‡æ€»ã€‚Ruhoh çš„ Resource æ‰æ˜¯çœŸå¹³ç­‰ï¼Œé€šè¿‡æ’ä»¶æ‰©å±•çš„èƒ½åŠ›ä¹Ÿæ›´å¼ºå¤§å½“ç„¶ä¹Ÿæ›´ç¹çã€‚ä¹‹å‰çš„ç¬”è®°å’Œæ—¥è®°å°±æ˜¯é€šè¿‡è‡ªå®šä¹‰ Resource å®ç°çš„ã€‚ ç”¨ Jekyll å®ç°ç¬”è®°ç³»ç»Ÿæˆ‘æ²¡æœ‰å¯¹ Collection è¿›è¡Œæ‰©å±•ï¼Œé€šè¿‡é…ç½®æ¥å®ç°éƒ¨åˆ†åŠŸèƒ½ï¼Œèˆå¼ƒäº†çˆ¶ç±»åˆ«ä¹Ÿèƒ½ç”Ÿæˆé¡µé¢çš„åŠŸèƒ½ã€‚ç¬”è®°çš„æ ‘ç»“æ„ json é€šè¿‡ generator æ’ä»¶å®ç°ã€‚æ ‡ç­¾å½’çº³ä¹Ÿå¾—è‡ªå·±å®ç°ã€‚å›ºå®šè¿æ¥åè€Œæ˜¯æœ€ç®€å•çš„ï¼Œä¸€æ¡é…ç½®æå®šï¼š scope: type: &quot;notes&quot; values: layout: &quot;note&quot; permalink: &quot;/:collection/:path/&quot; å¦å¤–è¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰æ’ä»¶ï¼Œæ¯”å¦‚ LaTeXï¼Œ Kramdown æ˜¯é»˜è®¤æ”¯æŒçš„ã€‚è‡³äº graphvizï¼Œæˆ‘å‘ç° Kramdown çš„å®šåˆ¶æ¯” Redcarpet éº»çƒ¦ã€‚æœ€åè¿˜æ˜¯å†³å®šç”¨è‡ªå®šä¹‰ liquid tags å®ç°ã€‚ {% graphviz %} digraph G { subgraph cluster_0 { .... start [shape=Mdiamond]; end [shape=Msquare]; } {% endgraphviz %} è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯è¿ç§»è„šæœ¬ï¼Œé¦–å…ˆå°†æ–‡ç« çš„æ–‡ä»¶åè½¬æ¢ä¸ºç¬¦åˆ Jekyll è§„åˆ™ã€‚ Ruhoh ç”¨çš„æ¨¡æ¿è¯­è¨€æ˜¯ Mustacheï¼Œçœ¼çœ‹ Mustache è¢«å¾®ä¿¡å°ç¨‹åºé€‰ç”¨äº†æœ‰æœºä¼šç«äº†ï¼Œåˆè¢«æˆ‘æ”¾å¼ƒäº†â€¦â€¦ Markdown å¼•æ“æ˜¯ Redcarpetï¼ŒJekyll åˆ™æ˜¯ Liquid å’Œ Kramdownï¼Œæ‰€ä»¥è¿˜éœ€å¯¹å†…æ–‡åšä¸€äº›è½¬æ¢å’Œè¿‡æ»¤ã€‚è¿˜æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å°†é¡µé¢å¼•ç”¨çš„æœ¬åœ°èµ„æºè¿›è¡Œæ•´ç†ã€‚ Resource ç®¡ç† å¯¹é¡µé¢èµ„æºè¿›è¡Œç®¡ç†æ˜¯ç”±æ¥å·²ä¹…çš„æƒ³æ³•ã€‚è¦æ±‚æ¯ç¯‡æ–‡ç« ï¼ˆDocumentï¼‰çš„éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„èµ„æºç›®å½•ï¼Œç„¶åç›®å½•å†…çš„æ–‡ä»¶éƒ½å¯ä»¥åœ¨æ­£æ–‡å†…é€šè¿‡ç›¸å¯¹è·¯å¾„è®¿é—®ã€‚è¿™æ ·å°±ä¸ç”¨å†å°†æ‰€æœ‰èµ„æºéƒ½æŒ¤åœ¨ media æ–‡ä»¶å¤¹ï¼Œè¿˜å¾—ç”¨ä¸€ä¸ª`` æ¥è·å– media çš„ç›¸å¯¹è·¯å¾„ã€‚å®ç°æ˜¯é€šè¿‡ä¸€ä¸ª generator å°†èµ„æºæ‹·è´åˆ°ç›¸åº”è·¯å¾„å®ç°çš„ï¼Œæœ€ç»ˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š _res â”œâ”€â”€ notes â”‚Â Â  â”œâ”€â”€ Programming â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Android â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ loader â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Loader.png â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ loader_event.png â”‚Â Â  â”œâ”€â”€ Reading â”‚Â Â  â”‚Â Â  â””â”€â”€ computer-systems-a-programmer-s-perspective â”‚Â Â  â”‚Â Â  â””â”€â”€ CSAPP â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CSAPP-5.10&amp;amp;5.11.png â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CSAPP-5.5&amp;amp;5.6.png â”‚Â Â  â”‚Â Â  â”œâ”€â”€ address_translation.png â”‚Â Â  â”‚Â Â  â””â”€â”€ process_address_space.png â””â”€â”€ posts â”œâ”€â”€ 2013-08-16-the-pain-of-note â”‚Â Â  â””â”€â”€ note_system_review.js â”œâ”€â”€ 2013-10-22-the-pain-of-note-2 â”‚Â Â  â””â”€â”€ categories.org â”œâ”€â”€ 2016-12-24-hierarchy-fragment-pager-adapter â”‚Â Â  â”œâ”€â”€ b_aa_ba_ca.png â”‚Â Â  â”œâ”€â”€ b_ba_baa_baaa.png â”‚Â Â  â””â”€â”€ b_ba_ca.png â”œâ”€â”€ 2017-10-20-lambda-in-android â”‚Â Â  â””â”€â”€ desugar_diagram.png å‘½ä»¤è¡Œæ¥å£ Jekyll æ˜¯æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œæ“ä½œçš„å‘½ä»¤è¡Œæ¥å£çš„ï¼Œè¿™ç‚¹è¿˜æ˜¯ Ruhoh åšå¾—æ¯”è¾ƒå¥½ï¼Œå¯ä»¥å¯¹æ¯ä¸ª Resource/Collection çš„å‘½ä»¤è¡Œæ¥å£è¿›è¡Œå®šåˆ¶ã€‚ Jekyll è¦å¯ä»¥é€šè¿‡ Commands æ’ä»¶å®ç°å‘½ä»¤è¡Œæ¥å£ã€‚è§ jekyll-moonï¼Œç›®å‰æ‰©å±•äº† create å‘½ä»¤ï¼Œå®ç°äº†åˆ›å»º post å’Œ noteã€‚æ¥ä¸‹æ¥è¿˜éœ€è¦å®ç°åˆ›å»ºèµ„æºç›®å½•ã€å†…æ–‡æœç´¢ï¼Œlist ç­‰ã€‚ ä¸»é¢˜ åå°çš„äº‹è¯´å¾—å·®ä¸å¤šï¼Œæ¥ä¸‹æ¥è¯´è¯´å‰å°ã€‚ä¸»é¢˜å’Œç½‘ç«™ç»“æ„é‡æ–°åšäº†è®¾è®¡ã€‚åŸºäº Materialize ä¸»é¢˜ä¹Ÿæ˜¯åƒç´ çº§ç…§æ¬ã€‚ä¸è¿‡ä¹Ÿç®—å®ç°äº†ä¸€ç›´å¾ˆæƒ³åšçš„ MD è®¾è®¡ã€‚ ç”¨äº† ES6 å’Œ Sassï¼ŒJekyll é»˜è®¤æ”¯æŒ Sass å¤„ç†å™¨ã€‚è‡³äº Es6 ç”¨çš„æ˜¯ jekyll-babelï¼Œbabel-sourceï¼ˆ5.8.35ï¼‰ å¿«ä¸¤å¹´æ²¡æ›´æ–°äº†ï¼Œçœ‹æ¥ Rubier è¿˜æ˜¯å–œå¥½ coffee-script å¤šä¸€äº›ã€‚ æœç´¢ ç½‘ç«™æœ€å¤§çš„çªç ´æ˜¯ç»ˆäºæœ‰äº†èƒ½ç”¨çš„æœç´¢ï¼ŒåŸºäº Lunr å®ç°çš„æµè§ˆå™¨ç«¯çš„æœç´¢ã€‚ç›®å‰åªå¯¹æ ‡é¢˜å’Œæ ‡ç­¾è¿›è¡Œç´¢å¼•ã€‚ Lunr é»˜è®¤ä¸æ”¯æŒä¸­æ–‡ï¼Œå®ƒçš„å»ºç«‹ç´¢å¼•çš„è¿‡ç¨‹æ˜¯å…ˆé€šè¿‡åˆ†è¯å™¨è¿›è¡Œå¤„ç†ï¼Œtokenizer.js å†å¯¹æ¯ä¸ª tokenï¼Œé€šè¿‡ pipeline è¿›è¡Œå¤„ç†ï¼Œé»˜è®¤æœ‰ä¸‰ä¸ª pipelineï¼š builder.pipeline.add( lunr.trimmer, // è¿‡æ¥æ‰€ä»¥é \W å­—ç¬¦ï¼Œä¸­æ–‡ä¼šåœ¨è¿™é‡Œè¢«è¿‡æ»¤æ‰ lunr.stopWordFilter, // è¿‡æ»¤åœæ­¢è¯ lunr.stemmer // è¿”å›è¯å¹² ) è€ƒè™‘åˆ°ä¸­æ–‡åˆ†è¯çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥æˆ‘å°†åˆ†è¯æ”¾åœ¨ Ruby ç«¯å¤„ç†ï¼Œæ‰¾äº†ä¸€éæ²¡æœ‰æ‰¾åˆ°ç‰¹åˆ«åˆé€‚çš„åˆ†è¯å™¨ï¼Œä¸»è¦æ˜¯ä¸æƒ³æœ‰ native extensionï¼Œåœ¨ travis-ci ä¸Šéƒ¨ç½²ä¸æ–¹ä¾¿ã€‚æ‰€ä»¥ç›®å‰åªæ˜¯å•çº¯å°†ä¸­æ–‡ä¸è‹±æ–‡åˆ†éš”å¼€è€Œå·²ï¼Œè§ index_generator.rbã€‚è¦æœç´¢ä¸­æ–‡æœ€å¥½è¿˜æ˜¯å¾—æ‰‹åŠ¨åŠ ä¸Šé€šé…ç¬¦ï¼ŒLunr çš„æœç´¢ç”¨æ³•å¯å‚è€ƒ Searching : Lunr è‡ªåŠ¨éƒ¨ç½² GitHub è™½ç„¶æ”¯æŒ Jekyllï¼Œä½†æˆ‘åŠ äº†ä¸å°‘ Jekyll æ’ä»¶ï¼Œæƒ³ç›´æ¥ç”¨ GitHub æ¥éƒ¨ç½²æ˜¯ä¸å¯èƒ½çš„ã€‚ä¸è¿‡ä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•çš„ï¼Œæ¯”å¦‚ç”¨å…è´¹çš„æŒç»­é›†æˆæœåŠ¡ travis-ci.org æ¥å®ç°æŒç»­éƒ¨ç½²ï¼ŒTravis æ”¯æŒéƒ¨ç½²åˆ° GitHub Pageï¼Œå‡ è¡Œé…ç½®æå®šï¼š deploy: provider: pages skip_cleanup: true github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard local_dir: ${TRAVIS_BUILD_DIR}/_site target_branch: master on: branch: develop Jekyll çš„æŒç»­é›†æˆå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ Travis CI | jekyll æ”¯æŒ HTTPS çš„å…è´¹ä¸»æœº åˆ°è¿™é‡ŒåŸºæœ¬å®ç°äº† push åè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²åˆ° https://douo.github.com ç”± GitHub æ¥å…è´¹æ‰˜ç®¡ï¼Œä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸå2ï¼Œä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆç¾å¥½ã€‚ä½†è¦ä¸ºè‡ªå·±çš„åŸŸåæ·»åŠ å…è´¹ HTTPS æ”¯æŒå°±æ²¡é‚£ä¹ˆå®¹æ˜“ã€‚å¹¸å¥½ Netlify æ°èƒ½æä¾›è¿™æ ·çš„æœåŠ¡ï¼Œå¹¶æ”¯æŒç»‘å®šå…è´¹çš„ Letâ€™s Encrypt - Free SSL/TLS Certificates è¯ä¹¦ï¼Œå…·ä½“å¯å‚è€ƒï¼šGitHub Page åšå®¢è‡ªå®šä¹‰åŸŸåæ·»åŠ  HTTPS æ”¯æŒã€‚ æ›´æ–° 2018å¹´05æœˆ29æ—¥ï¼Œå¼•å…¥ webpack ç®¡ç†å‰ç«¯èµ„æºï¼Œä½¿ç”¨ clenemt çš„é…ç½®ã€‚ 2018å¹´09æœˆ27æ—¥ï¼Œgithub å·²ç»æ”¯æŒè‡ªå®šä¹‰åŸŸå httpsï¼Œæ‰€ä»¥ä» netlify è¿å› github äº†ï¼Œnetlify é€Ÿåº¦å®åœ¨å¤ªæ…¢ã€‚</summary></entry><entry><title type="html">Lambda in Android</title><link href="http://dourok.info/2017/10/20/lambda-in-android/" rel="alternate" type="text/html" title="Lambda in Android" /><published>2017-10-20T00:00:00+00:00</published><updated>2017-11-30T15:56:47+00:00</updated><id>http://dourok.info/2017/10/20/lambda-in-android</id><content type="html" xml:base="http://dourok.info/2017/10/20/lambda-in-android/">&lt;h3 id=&quot;android-å¦‚ä½•å®ç°æ”¯æŒ-lambda-è¡¨è¾¾å¼&quot;&gt;Android å¦‚ä½•å®ç°æ”¯æŒ lambda è¡¨è¾¾å¼&lt;/h3&gt;

&lt;p&gt;lambda è¡¨è¾¾å¼æ˜¯ java 8 æ–°å¼•å…¥çš„è¯­è¨€ç‰¹æ€§ï¼Œä½¿ç”¨äº†é€šè¿‡ java 7 æ–°å¼•å…¥çš„å­—èŠ‚ç æŒ‡ä»¤ invokedynamic æ¥å®ç°çš„ï¼ˆå‚è€ƒ &lt;a href=&quot;http://wiki.jvmlangsummit.com/images/7/7b/Goetz-jvmls-lambda.pdf&quot;&gt;Goetz-jvmls-lambda.pdf&lt;/a&gt;ï¼‰ã€‚ä½†åœ¨ dalvik ä¸­å¹¶æ²¡æœ‰ç›¸åº”çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥ç›´æ¥å°† java 8 çš„å­—èŠ‚ç ç¿»è¯‘ä¸º dalvik å­—èŠ‚ç ç›®å‰æ˜¯æ˜¯ä¸å¯è¡Œçš„ã€‚ä¸è¿‡ä» java lambda çš„å®ç°ä¸Šæ¥è®²ï¼Œå®é™…ä¸Šå°±æ˜¯å†…éƒ¨åŒ¿åç±»çš„è¯­æ³•ç³–ã€‚&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶æ˜¯è¯­æ³•ç³–ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªä»£ç è½¬æ¢çš„äº‹ï¼ŒæŠŠè¿™ä¸ªè¿‡ç¨‹æŠ½ç¦»å‡ºæ¥å¦å¤–å®ç°ï¼Œå°±å¯ä»¥åœ¨ä½ç‰ˆæœ¬çš„ jdk ä¸­å®ç°å¯¹ lambda çš„æ”¯æŒã€‚&lt;a href=&quot;https://github.com/orfjackal/retrolambda&quot;&gt;retrolambda&lt;/a&gt;ï¼Œå°±æ˜¯åœ¨å­—èŠ‚ç å±‚é¢å®ç°è¿™ä¸ªè½¬æ¢ã€‚retrolambda çš„å…·ä½“å®ç°æ˜¯åŸºäº java 8 å¯¹ lambda çš„åº•å±‚å®ç°æ¥åšçš„ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œjava ä¸»è¦ä¸ºå½“å‰ç±»ï¼ˆlambda è¡¨è¾¾å¼æ‰€åœ¨çš„ç±»ï¼‰ç”Ÿæˆä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä½“ï¼ˆmethod bodyï¼‰å°±æ˜¯ lambda bodyï¼Œè¿™ä¸ªæ–¹æ³•ç§°ä¸º desugar æ–¹æ³•ã€‚è¿è¡Œæ—¶ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°è¿™æ¡ lambda è¯­å¥çš„æ—¶å€™ï¼Œinvokedynamic è°ƒç”¨å¼•å¯¼æ–¹æ³•ï¼ˆBSMï¼‰ï¼Œå¼•å¯¼æ–¹æ³•ç”Ÿæˆä¸€ä¸ªå®ç°äº†å…·ä½“å‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼Œåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼‰çš„ VM åŒ¿åç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºæ•è· lambda æ‰€éœ€è¦çš„å˜é‡ã€‚ç¬¬äºŒæ­¥ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°å’Œ invokdynamic ç»‘å®šèµ·æ¥ï¼Œæœ€åè°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°è¿”å›è¿™ä¸ªåŒ¿åç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ lambda objectï¼ˆä»¥åå†æ‰§è¡Œè¿™æ¡ invokedynamic æŒ‡ä»¤å°±æ˜¯ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°è¿”å›å®ä¾‹äº†ï¼‰ã€‚è°ƒç”¨çš„æ—¶å€™ï¼Œå†æŠŠæ¥å£æ–¹æ³•éœ€è¦çš„å‚æ•°å’Œæ•è·çš„å˜é‡ä¼ é€’ç»™ desugar æ–¹æ³•æ¥å®Œæˆ lambda çš„åº”ç”¨ï¼ˆå¯å‚è€ƒ&lt;a href=&quot;http://dourok.info/2017/10/08/understanding-invokedynamic&quot;&gt;ç†è§£ invokedynamic&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;retrolambda çš„åšæ³•æ˜¯ï¼Œæºæ–‡ä»¶å…ˆç”¨ java 8 ç¼–è¯‘ï¼Œlambda body è½¬æ¢ä¸ºå½“å‰ç±»çš„ desugar æ–¹æ³•ç¼–è¯‘å™¨å·²ç»å¤„ç†å¥½äº†ã€‚æ¥ç€è§£æç¼–è¯‘åçš„ class æ–‡ä»¶ï¼Œé‡åˆ°ä¸€æ¡ invokedynamic æŒ‡ä»¤ï¼Œå°±æ¨¡ä»¿å®ƒè°ƒç”¨å®ƒçš„å¼•å¯¼æ–¹æ³•ï¼ˆ&lt;a href=&quot;https://github.com/orfjackal/retrolambda/blob/master/retrolambda/src/main/java/net/orfjackal/retrolambda/lambdas/LambdaReifier.java#L26&quot;&gt;LambdaReifier.reifyLambdaClass&lt;/a&gt;ï¼‰ï¼ŒæŠŠå¼•å¯¼æ–¹æ³•ç”Ÿæˆçš„åŒ¿åç±»ä½œä¸ºå½“å‰ç±»çš„åŒ¿åç±»ä¿å­˜ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥è¿˜ä¼šå¯¹è¿™äº›ç±»å†åšä¸€äº›å˜æ¢ï¼ŒåŒ…æ‹¬ç”¨å•ä¾‹ä¼˜åŒ–æ— çŠ¶æ€çš„ lambda å¯¹è±¡ï¼Œå°†æ„é€ å‡½æ•°æ›¿æ¢ä¸ºå·¥å‚æ–¹æ³•ï¼ˆ&lt;a href=&quot;https://github.com/orfjackal/retrolambda/blob/master/retrolambda/src/main/java/net/orfjackal/retrolambda/lambdas/BackportLambdaClass.java#L60&quot;&gt;BackportLambdaClass#visitEnd&lt;/a&gt;ï¼‰ã€‚æœ€åæŠŠ invokedynamic æ›¿æ¢ä¸ºå¯¹è¯¥åŒ¿åç±»çš„å®ä¾‹åŒ–è¯­å¥ï¼Œå°±æ˜¯è¿™æ ·æŠŠ invokedynamic æ›¿æ¢ä¸ºç­‰ä»·çš„å…¼å®¹ä»£ç ã€‚ä¸è¿‡ï¼Œ retrolambda çš„å®ç°ä¾èµ–äº java å¯¹ lambda çš„å…·ä½“å®ç°ï¼Œåç»­çš„ java ç‰ˆæœ¬ä¸ç”¨åŒ¿åç±»äº†ï¼Œé‚£ä¹ˆ retrolambda ä¹Ÿå°±ä¸èƒ½ç”¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Android Studio 3.0 ä¹‹å‰ï¼Œè¦åœ¨åŸºäº java çš„ Android å¼€å‘ä¸­ä½¿ç”¨ lambda è¡¨è¾¾ä¸€èˆ¬éƒ½æ˜¯ç”¨ retrolambda æ¥è½¬æ¢ä¸º dex èƒ½å¤„ç†çš„å­—èŠ‚ç æ¥å®ç°çš„ï¼ˆå°±ä¸æå¤­æŠ˜çš„ Jack äº†ï¼‰ã€‚ ä¸è¿‡ Android Studio 3.0 åï¼ŒIDE å·²ç»æ”¯æŒå®ç°è¿™ä¸ªè½¬æ¢äº†ï¼Œç®€ç§° desugarã€‚å…·ä½“å¦‚ä½•å¼€å¯å¯å‚çœ‹å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://developer.android.com/studio/write/java8-support.html&quot;&gt;Use Java 8 language features&lt;/a&gt;ã€‚IDE çš„ desugar è¿‡ç¨‹æ¯” retrolamda çš„ä¸»è¦åŒºåˆ«å°±æ˜¯æ—¶æœºä¸åŒï¼ŒåŸç†ä¸Šå¤§è‡´æ˜¯ä¸€æ ·çš„ï¼ŒIDE çš„å®ç°å¯è§ &lt;a href=&quot;https://android.googlesource.com/platform/external/desugar/+/master/java/com/google/devtools/build/android/desugar/LambdaDesugaring.java#394&quot;&gt;LambdaDesugaring#visitInvokeDynamicInsn&lt;/a&gt;ã€‚ retrolambda åªèƒ½å¯¹å½“å‰é¡¹ç›®è¿›è¡Œè½¬æ¢ï¼ŒIDE æ˜¯åœ¨è½¬æ¢ä¸º dex ä¹‹å‰åšçš„è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´ IDE è¿˜æ”¯æŒç¬¬ä¸‰æ–¹ç”¨ java 8 ç¼–è¯‘çš„åº“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;desugar_diagram.png&quot; alt=&quot;android æ„å»ºæµç¨‹å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŸå›¾è§ &lt;a href=&quot;https://sites.google.com/a/android.com/tools/tech-docs/new-build-system/build-workflow&quot;&gt;Build Workflow - Android Studio Project Site&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ€»ä¹‹ï¼ŒAndroid å¯¹ lambda çš„å®ç°ä¸ java 8 å¹¶æœªå¤ªå¤§åŒºåˆ«ï¼Œæœ€ä¸»è¦çš„åŒºåˆ« java 8 çš„åŒ¿åç±»åœ¨è¿è¡Œæ—¶ç”Ÿæˆï¼Œè€Œ Android æ˜¯åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼ˆè¿™æ ·è¿˜å¯ä»¥é¿å…äº†å¯¹ serializable lambda çš„ç‰¹æ®Šå¯¹å¾…ï¼‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;lambda-è¡¨è¾¾å¼&quot;&gt;lambda è¡¨è¾¾å¼&lt;/h3&gt;

&lt;p&gt;lambda è¡¨è¾¾å¼åœ¨ java ä¸­å°±æ˜¯ç”¨äºåˆ›å»ºå‡½æ•°å¼æ¥å£å®ä¾‹ï¼ˆlambda objectï¼‰çš„è¡¨è¾¾å¼ï¼Œlambda çš„å®é™…ä½¿ç”¨ä¸­ï¼Œä¸»è¦å°†å…¶åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œå…¶ä¸€ï¼Œæ— çŠ¶æ€çš„ï¼ˆstatelessï¼‰ lambda è¡¨è¾¾å¼ï¼ŒæŒ‡çš„å°±æ˜¯æ²¡æœ‰è‡ªç”±å˜é‡çš„ lambda è¡¨è¾¾å¼ã€‚ç›¸å¯¹çš„ï¼Œå¦ä¸€ç±»å°±æ˜¯æœ‰è‡ªç”±å˜é‡çš„ lambda è¡¨è¾¾å¼ã€‚&lt;/p&gt;

&lt;p&gt;ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡ï¼ŒæŠŠä¸€é“ lambda è¡¨è¾¾å¼ä»å…¶ä¸Šä¸‹æ–‡æŠ½ç¦»å‡ºæ¥çœ‹ä¸€ä¸‹ï¼š&lt;code&gt;L1 = s -&amp;gt; Integer.valueOf(s)&lt;/code&gt;ã€‚è¡¨è¾¾å¼ä¸­çš„ä¸¤ä¸ªé‡ Integer å’Œ sï¼ŒInteger æ˜¯å¸¸é‡ï¼Œè€Œ s åœ¨å‚æ•°åˆ—è¡¨ä¸­å£°æ˜äº†ï¼ˆç±»å‹çœç•¥ï¼‰ï¼Œè¿™é‡Œç§° s æ˜¯ä¸€ä¸ªç»‘å®šå˜é‡ï¼Œæ‰€æœ‰é‡éƒ½æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥ L1 å°±æ˜¯æ— çŠ¶æ€çš„ lambda è¡¨è¾¾å¼ï¼ˆå¯ä»¥è®¤ä¸ºå®ƒçš„è°ƒç”¨ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š&lt;code&gt;() -&amp;gt; System.out.println(Arrays.toString(args))&lt;/code&gt;ã€‚&lt;code&gt;args&lt;/code&gt; æ˜¯ä»€ä¹ˆï¼Ÿè„±ç¦»äº†ä¸Šä¸‹æ–‡å°±æ— æ³•ç¡®å®šäº†ï¼Œå¦‚æœåœ¨ä¸Šä¸‹æ–‡ä¸­çœ‹ï¼Œå°±å¾ˆæ¸…æ¥š &lt;code&gt;args&lt;/code&gt; æ˜¯ä»€ä¹ˆäº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    Runnable r = () -&amp;gt; System.out.println(Arrays.toString(args));
    r.run();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;args&lt;/code&gt; åœ¨è¿™é‡Œå°±æ˜¯è‡ªç”±å˜é‡ã€‚è¦å¯¹ lambda è¡¨è¾¾å¼æ±‚å€¼å‰æ‰€æœ‰è‡ªç”±å˜é‡éƒ½æ˜¯å¾—å·²çŸ¥çš„ï¼Œjava ä¸­æ‰€æœ‰è‡ªç”±å˜é‡éƒ½å¿…é¡»åœ¨ç¼–è¯‘æœŸç¡®è®¤ï¼ˆå¦å¤–ä¸€ç§ä¸åŒçš„å®ç°å¯å‚è€ƒ &lt;a href=&quot;http://groovy-lang.org/closures.html#_delegate_of_a_closure&quot;&gt;Groovy&lt;/a&gt;ï¼‰ï¼Œä¸ºè‡ªç”±å˜é‡ç¡®å®šå€¼çš„è¿‡ç¨‹ç§°ä¸ºå˜é‡æ•è·ï¼ˆcapturingï¼‰ï¼ŒæŠŠå˜é‡æ•è·åå’Œ lambda è¡¨è¾¾å¼ç»‘å®šåœ¨ä¸€èµ·çš„ç»“æ„å°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ï¼Œlambda å¯¹è±¡å®ä¾‹å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚java ä¸­å°±æ˜¯é€šè¿‡åŒ¿åç±»æ¥å­˜æ”¾è¿™äº›æ•è·è¿™äº›å˜é‡ï¼Œè€Œä¸”æ˜¯ä»¥ final å¼•ç”¨çš„å½¢å¼ï¼Œæ‰€ä»¥æ›´åº”è¯¥è¯´æ˜¯å€¼è€Œä¸æ˜¯å˜é‡ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆçœ‹ä¸€ä¸‹æœ€ç®€å•çš„æ— çŠ¶æ€ lambdaï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class LambdaTest {
    public void testStateless() {
        Runnable r = (() -&amp;gt; System.out.println(&quot;pure&quot;));
        r.run();
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¼–è¯‘åå†åç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå˜æˆäº†ä¸¤ä¸ªç±»ï¼ˆå¯ä»¥åœ¨ &lt;code&gt;build/intermediates/transforms/desugar&lt;/code&gt; ä¸­æ‰¾åˆ°ï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;LambdaTest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class LambdaTest {
    public void testStateless() {
        Runnable r = LambdaTest$$Lambda$0.$instance;
        r.run();
    }
    
    static void lambda$testPure$0$LambdaTest(){
        System.out.println(&quot;pure&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;LambdaTest$$Lambda$0:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;final class LambdaTest$$Lambda$0 implements Runnable {
  static final Runnable $instance = new LambdaTest$$Lambda$0();

  private LambdaTest$$Lambda$0() {
  }

  public void run() {
    LambdaTest.lambda$testPure$0$LambdaTest();
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;lambda body å˜æˆäº† LambdaTest ä¸­çš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ desugar æ–¹æ³•ï¼Œå¦å¤–è¿˜ç”Ÿæˆäº†ä¸€ä¸ªç±» &lt;code&gt;LambdaTest$$Lambda$0&lt;/code&gt; å®ç°äº†å‡½æ•°å¼æ¥å£ï¼Œåœ¨å…¶å®ç°æ–¹æ³•é‡Œå†å»è°ƒç”¨ desugar æ–¹æ³•ï¼Œæ— çŠ¶æ€ lambda å¯¹è±¡ä¸éœ€è¦ä¿å­˜é¢å¤–çš„å‚æ•°ï¼Œè¿™é‡Œç”¨å•ä¾‹è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ•è·äº†å˜é‡ï¼Œä»¥å±€éƒ¨å˜é‡å’Œå½¢å¼å‚æ•°ä¸ºä¾‹ï¼Œæ— è®ºæ˜¯å±€éƒ¨å˜é‡è¿˜æ˜¯ä¸Šä¸‹æ–‡æ–¹æ³•çš„å½¢å¼å‚æ•°ï¼Œå®ƒä»¬çš„å€¼å’Œç±»å‹éƒ½æ˜¯ç¼–è¯‘æ—¶ç¡®å®šçš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public void capturingLocal(String strp) {
    String str = &quot;lexical&quot;;
    Runnable r = () -&amp;gt; System.out.println(str + strp);
    r.run();
  }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;LambdaTest$$Lambda$1ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;final class LambdaTest$$Lambda$1 implements Runnable {
  private final String arg$1;
  private final String arg$2;

  LambdaTest$$Lambda$1(String var1, String var2) {
    this.arg$1 = var1;
    this.arg$2 = var2;
  }

  public void run() {
    LambdaTest.lambda$capturingLocal$1$LambdaTest(this.arg$1, this.arg$2);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸå…ˆçš„ lambda è¡¨è¾¾å¼èµ‹å€¼è¯­å¥å˜æˆäº† &lt;code&gt;Runnable r = new LambdaTest$$Lambda$1(str, strp)&lt;/code&gt;ï¼Œè‡ªç”±å˜é‡éƒ½é€šè¿‡ lambda å¯¹è±¡æ„é€ å™¨è¿›è¡Œæ•è·å¹¶ä¿å­˜èµ·æ¥ï¼Œå¯¹ lambda æ±‚å€¼çš„æ—¶å€™å†ä¼ é€’ç»™ desugar æ–¹æ³•ï¼Œè¿™é‡Œ Runnable çš„æ–¹æ³•æ²¡æœ‰å½¢å¼å‚æ•°ï¼Œå¦‚æœæœ‰å½¢å¼å‚æ•°çš„è¯ï¼Œè¿™äº›æ•è·çš„å˜é‡ä¼šæ’åœ¨å½¢å¼å‚æ•°åé¢å†ä¼ é€’ç»™ desugar æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœåœ¨ lambda ä¸­å¼•ç”¨äº†å¯¹è±¡å­—æ®µï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private String stri = &quot;instance&quot;;
public void capturingInstance() {
    Runnable r = () -&amp;gt; System.out.println(stri);
    r.run();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;LambdaTest$$Lambda$4:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;final class LambdaTest$$Lambda$4 implements Runnable {
  private final LambdaTest arg$1;

  LambdaTest$$Lambda$4(LambdaTest var1) {
    this.arg$1 = var1;
  }

  public void run() {
    this.arg$1.lambda$capturingInstance$4$LambdaTest();
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ° lambda å¯¹è±¡ä¿å­˜äº†ä¸Šä¸‹æ–‡ç±»çš„å¼•ç”¨ï¼Œæ— è®ºæ˜¯å®ä¾‹å˜é‡è¿˜æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå®é™…ä¸Šéƒ½æœ‰ä¸€ä¸ªéšæ€§çš„æ¥æ”¶è€…å°±æ˜¯ &lt;code&gt;this&lt;/code&gt;ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¾æ€§çš„å£°æ˜ï¼Œåœ¨ lambda body ä¸­çš„ &lt;code&gt;this&lt;/code&gt; å¼•ç”¨æŒ‡å‘çš„å°±æ˜¯å…¶ä¸Šä¸‹æ–‡çš„ç±»ï¼Œè€Œä¸æ˜¯ lambda å¯¹è±¡ï¼ˆä¸åŒ¿åç±»çš„åŒºåˆ«ï¼‰ã€‚åœ¨è¿™é‡Œ lambda è¡¨è¾¾æ•è·çš„å˜é‡å°±æ˜¯å®ä¾‹å˜é‡çš„æ¥æ”¶è€… &lt;code&gt;this&lt;/code&gt; è€Œä¸æ˜¯å®ä¾‹å˜é‡æœ¬èº«ã€‚è€Œä¸”å¯ä»¥çœ‹åˆ° lambda çš„ desugar æ–¹æ³•å˜æˆäº†å®ä¾‹æ–¹æ³•ï¼Œç”¨è¿™ç§æ–¹å¼ï¼Œlambda body å‡ ä¹ä¸ç”¨åšä»»ä½•è½¬æ¢åªéœ€ç…§æ¬è¿›æ–¹æ³•ä½“å°±è¡Œã€‚è¿˜åŒ…æ‹¬å¯¹ &lt;code&gt;super&lt;/code&gt; çš„å¤„ç†ï¼Œlambda å¯¹è±¡æ— æ³•æ•è· superï¼Œåªèƒ½é€šè¿‡è°ƒç”¨ this çš„å®ä¾‹æ–¹æ³•æ¥å®ç°å¯¹ super çš„è°ƒç”¨ï¼Œå¯è§ç”¨ desugar æ–¹æ³•æ¥å®ç°æ˜¯ååˆ†ä¾¿åˆ©çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;this&lt;/code&gt; çš„æ•è·ï¼Œå¯¹äº Android å¼€å‘æ¥è¯´ç‰¹åˆ«è¦æ³¨æ„ï¼Œ&lt;strong&gt;åœ¨ Activity ä¸­ä½¿ç”¨ lambda è¡¨è¾¾å¼çš„è¯ï¼Œæ„å‘³ç€ä¼šé€šè¿‡ final å¼•ç”¨çš„å½¢è±¡å°†å½“å‰ Activity å®ä¾‹ä¼ é€’åˆ°å¤–éƒ¨å»ï¼Œç¨ä¸æ³¨æ„ä¾¿ä¼šå¼•èµ·æ³„éœ²ã€‚ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„æŠ€å·§ï¼Œå°†å®ä¾‹å­—æ®µèµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œå°±ä¸ä¼šæ•è· this å¼•ç”¨äº†ã€‚å½“ç„¶å¯¹äºç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å¯¹è±¡æ¥è¯´è¿˜æ˜¯ä¸å®‰å…¨çš„ï¼Œæ¯”å¦‚ Viewã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ–¹æ³•å¼•ç”¨&quot;&gt;æ–¹æ³•å¼•ç”¨&lt;/h3&gt;

&lt;p&gt;æ–¹æ³•å¼•ç”¨åŸºæœ¬å¯ä»¥å½“æˆæ˜¯ lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œæ–¹æ³•å¼•ç”¨éƒ½å¯ä»¥ç”¨ç›¸åº”çš„ lambda è¡¨è¾¾å¼æ¥ä»£æ›¿ï¼Œæœ‰ä¸€ä¸ªä¾‹å¤–å°±æ˜¯å¸¦æœ‰ç±»å‹å‚æ•°æ–¹æ³•çš„å‡½æ•°å¼æ¥å£ï¼Œèƒ½ç”¨æ–¹æ³•å¼•ç”¨ä½†ä¸èƒ½ç”¨ lambda è¡¨è¾¾å¼ï¼Œè§ &lt;a href=&quot;https://stackoverflow.com/questions/22588518/lambda-expression-and-generic-method&quot;&gt;java - Lambda Expression and generic method - Stack Overflow&lt;/a&gt;ã€‚æ–¹æ³•å¼•ç”¨ä¹Ÿåˆ†ä¸ºæ•è·ä¸éæ•è·ï¼Œå¯¹äºæ— é¡»æ•è·æ¥çš„æ–¹æ³•å¼•ç”¨ä¸»è¦æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é™æ€æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;æ„é€ å™¨&lt;/li&gt;
  &lt;li&gt;æœªç»‘å®šçš„å®ä¾‹æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»€ä¹ˆæ˜¯æœªç»‘å®šçš„å®ä¾‹æ–¹æ³•ï¼Ÿæ–¹æ³•å¼•ç”¨è¯­æ³•å¯ä»¥å¤§è‡´è®¤ä¸ºæ˜¯&lt;code&gt;æ¥æ”¶è€…::æ–¹æ³•å&lt;/code&gt;è¿™æ ·çš„å½¢å¼ï¼Œæ–¹æ³•å¯ä»¥æ˜¯å®ä¾‹æ–¹æ³•æˆ–è€…æ˜¯é™æ€æ–¹æ³•ï¼Œå½“æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•è€Œæ¥æ”¶è€…æ˜¯ç±»å¼•ç”¨æ—¶ï¼Œè¿™æ—¶æ¥æ”¶è€…å°±æ˜¯ä¸€ä¸ªæœªç»‘å®šçš„æ¥æ”¶è€…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list.filter(String::isEmpty)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;isEmpty&lt;/code&gt; æ˜¯å®ä¾‹æ–¹æ³•ï¼Œè€Œæ¥æ”¶è€…æ˜¯ç±»å¼•ç”¨ï¼Œåœ¨è¿™é‡Œæ¥æ”¶è€…åœ¨è¿è¡Œä¼šè¢«æ›¿æ¢ä¸ºè¢«æ›¿æ¢ä¸º list å†…çš„å…ƒç´ ï¼Œç­‰ä»·äºè¿™æ ·çš„ lambda è¡¨è¾¾å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list.filter(s -&amp;gt; s.isEmpty())
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„éç»‘å®šçš„å®ä¾‹æ–¹æ³•å¼•ç”¨æ˜¯æœ‰äºŒä¹‰æ€§çš„ï¼Œjava æ ¹æ®æ–¹æ³•çš„å£°æ˜å»æ¨å®š &lt;code&gt;isEmpty&lt;/code&gt; æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œä»¥ä¸‹é¢çš„ç±»ä¸ºä¾‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class C{
   public static boolean isEmpty(C c);
   public boolean isEmpty();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚ä¸Šé¢çš„æ–¹æ³•å£°æ˜ä¸¤ä¸ªæ–¹æ³•å¯¹äºè¡¨è¾¾å¼ &lt;code&gt;list.filter(C::isEmpty)&lt;/code&gt; æ¥è¯´éƒ½æ˜¯åˆæ³•çš„ï¼Œjava ä¹Ÿå°±æ— æ³•æ¨æ–­å‡ºè¿™é‡Œæ˜¯æŒ‡å“ªä¸ªæ–¹æ³•å¼•ç”¨ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥é”™ã€‚&lt;/p&gt;

&lt;p&gt;éœ€è¦æ•è·çš„æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å·²ç»‘å®šå®ä¾‹çš„æ–¹æ³•å¼•ç”¨ï¼ŒåŒ…æ‹¬å®ä¾‹æ–¹æ³•ï¼Œå†…éƒ¨ç±»ï¼ˆæ•°ç»„ï¼‰çš„æ„é€ å™¨ï¼Œsuper æ–¹æ³•ã€‚æ¥æ”¶è€…å°±æ˜¯é—­åŒ…æ‰€è¦æ•è·çš„å˜é‡ã€‚ä½†è¦æ³¨æ„ä¸€ç‚¹æ–¹æ³•å¼•ç”¨æ˜¯æ²¡æœ‰éšå¼å£°æ˜çš„ &lt;code&gt;this&lt;/code&gt; å¼•ç”¨çš„ã€‚æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼Œä»è¯­ä¹‰ä¸Šæ¥è¯´æ˜¯ç­‰ä»·çš„ï¼Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public void capturingInstance() {
    Predicate&amp;lt;String&amp;gt; c = s -&amp;gt; stri.equals(s);
}

public void capturingIntanceMethod() {
    Predicate&amp;lt;String&amp;gt; c = stri::equals;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯ä»–ä»¬æ•è·çš„å¼•ç”¨å´ä¸ä¸€æ ·ï¼Œ&lt;strong&gt;ä¸Šæ–‡å¯çŸ¥ lambda è¡¨è¾¾å¼æ•è·çš„æ˜¯éšå¼å£°æ˜çš„ &lt;code&gt;this&lt;/code&gt;ï¼Œè€Œæ–¹æ³•å¼•ç”¨æ•è·çš„å´æ˜¯ç›´æ¥æ¥æ”¶è€…&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;final class LambdaTest$$Lambda$8 implements Predicate {
  private final String arg$1;

  private LambdaTest$$Lambda$8(String var1) {
    this.arg$1 = var1;
  }

  static Predicate get$Lambda(String var0) {
    return new LambdaTest$$Lambda$8(var0);
  }

  public boolean test(Object var1) {
    return this.arg$1.equals((String)var1);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç‚¹ï¼Œä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œå› ä¸ºæ–¹æ³•å·²ç»æ˜¯ç°æˆçš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µå°±æ²¡å¿…è¦é‡æ–°ç”Ÿæˆä¸€ä¸ª desugar æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æœ‰ä¾‹å¤–ï¼Œsuper å’Œå¯å˜å‚æ•°ï¼Œéœ€è¦ä¸€ä¸ªæ¡¥æ¥æ–¹æ³•ã€‚å¯¹äº super æ¥è¯´ï¼Œlambda å¯¹è±¡æ˜¯æ— æ³•ä¸ä¼šå½“å‰ç±»çš„ super å¼•ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦å€Ÿç”±å½“å‰ç±»çš„å®ä¾‹æ–¹æ³•æ¥å®ç°å¯¹ super çš„å¼•ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ¥æ”¶è€…ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; Predicate&amp;lt;String&amp;gt; c = (stri.equals(&quot;abc&quot;) ? &quot;abc&quot; : &quot;bcd&quot;)::equals;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨è¿™é‡Œæ•è·çš„æ˜¯è¡¨è¾¾å¼æ±‚å€¼çš„ç»“æœè€Œä¸æ˜¯è¡¨è¾¾å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ‰€ä»¥å¯¹äº Activity æ¥è¯´ï¼Œè¦æ ¼å¤–æ³¨æ„ä¸‹é¢å‡ ç§æƒ…å†µå¯èƒ½å¯¼è‡´å¼•ç”¨æ³„éœ²&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;this&lt;/code&gt; å…³é”®å­—çš„æ–¹æ³•å¼•ç”¨&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;super&lt;/code&gt; å…³é”®å­—çš„æ–¹æ³•å¼•ç”¨&lt;/li&gt;
  &lt;li&gt;éé™æ€å†…éƒ¨ç±»çš„æ„é€ å™¨å¼•ç”¨&lt;/li&gt;
  &lt;li&gt;Activity æˆ–å…¶å®ä¾‹å˜é‡å¯å˜å‚æ•°æ–¹æ³•å¼•ç”¨&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯å‚è€ƒ  &lt;a href=&quot;http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html&quot;&gt;Translation of Lambda Expressions&lt;/a&gt;ã€‚&lt;/p&gt;</content><author><name></name></author><summary type="html">Android å¦‚ä½•å®ç°æ”¯æŒ lambda è¡¨è¾¾å¼ lambda è¡¨è¾¾å¼æ˜¯ java 8 æ–°å¼•å…¥çš„è¯­è¨€ç‰¹æ€§ï¼Œä½¿ç”¨äº†é€šè¿‡ java 7 æ–°å¼•å…¥çš„å­—èŠ‚ç æŒ‡ä»¤ invokedynamic æ¥å®ç°çš„ï¼ˆå‚è€ƒ Goetz-jvmls-lambda.pdfï¼‰ã€‚ä½†åœ¨ dalvik ä¸­å¹¶æ²¡æœ‰ç›¸åº”çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥ç›´æ¥å°† java 8 çš„å­—èŠ‚ç ç¿»è¯‘ä¸º dalvik å­—èŠ‚ç ç›®å‰æ˜¯æ˜¯ä¸å¯è¡Œçš„ã€‚ä¸è¿‡ä» java lambda çš„å®ç°ä¸Šæ¥è®²ï¼Œå®é™…ä¸Šå°±æ˜¯å†…éƒ¨åŒ¿åç±»çš„è¯­æ³•ç³–ã€‚ æ—¢ç„¶æ˜¯è¯­æ³•ç³–ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªä»£ç è½¬æ¢çš„äº‹ï¼ŒæŠŠè¿™ä¸ªè¿‡ç¨‹æŠ½ç¦»å‡ºæ¥å¦å¤–å®ç°ï¼Œå°±å¯ä»¥åœ¨ä½ç‰ˆæœ¬çš„ jdk ä¸­å®ç°å¯¹ lambda çš„æ”¯æŒã€‚retrolambdaï¼Œå°±æ˜¯åœ¨å­—èŠ‚ç å±‚é¢å®ç°è¿™ä¸ªè½¬æ¢ã€‚retrolambda çš„å…·ä½“å®ç°æ˜¯åŸºäº java 8 å¯¹ lambda çš„åº•å±‚å®ç°æ¥åšçš„ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œjava ä¸»è¦ä¸ºå½“å‰ç±»ï¼ˆlambda è¡¨è¾¾å¼æ‰€åœ¨çš„ç±»ï¼‰ç”Ÿæˆä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä½“ï¼ˆmethod bodyï¼‰å°±æ˜¯ lambda bodyï¼Œè¿™ä¸ªæ–¹æ³•ç§°ä¸º desugar æ–¹æ³•ã€‚è¿è¡Œæ—¶ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°è¿™æ¡ lambda è¯­å¥çš„æ—¶å€™ï¼Œinvokedynamic è°ƒç”¨å¼•å¯¼æ–¹æ³•ï¼ˆBSMï¼‰ï¼Œå¼•å¯¼æ–¹æ³•ç”Ÿæˆä¸€ä¸ªå®ç°äº†å…·ä½“å‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼Œåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼‰çš„ VM åŒ¿åç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºæ•è· lambda æ‰€éœ€è¦çš„å˜é‡ã€‚ç¬¬äºŒæ­¥ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°å’Œ invokdynamic ç»‘å®šèµ·æ¥ï¼Œæœ€åè°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°è¿”å›è¿™ä¸ªåŒ¿åç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ lambda objectï¼ˆä»¥åå†æ‰§è¡Œè¿™æ¡ invokedynamic æŒ‡ä»¤å°±æ˜¯ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°è¿”å›å®ä¾‹äº†ï¼‰ã€‚è°ƒç”¨çš„æ—¶å€™ï¼Œå†æŠŠæ¥å£æ–¹æ³•éœ€è¦çš„å‚æ•°å’Œæ•è·çš„å˜é‡ä¼ é€’ç»™ desugar æ–¹æ³•æ¥å®Œæˆ lambda çš„åº”ç”¨ï¼ˆå¯å‚è€ƒç†è§£ invokedynamicï¼‰ã€‚ retrolambda çš„åšæ³•æ˜¯ï¼Œæºæ–‡ä»¶å…ˆç”¨ java 8 ç¼–è¯‘ï¼Œlambda body è½¬æ¢ä¸ºå½“å‰ç±»çš„ desugar æ–¹æ³•ç¼–è¯‘å™¨å·²ç»å¤„ç†å¥½äº†ã€‚æ¥ç€è§£æç¼–è¯‘åçš„ class æ–‡ä»¶ï¼Œé‡åˆ°ä¸€æ¡ invokedynamic æŒ‡ä»¤ï¼Œå°±æ¨¡ä»¿å®ƒè°ƒç”¨å®ƒçš„å¼•å¯¼æ–¹æ³•ï¼ˆLambdaReifier.reifyLambdaClassï¼‰ï¼ŒæŠŠå¼•å¯¼æ–¹æ³•ç”Ÿæˆçš„åŒ¿åç±»ä½œä¸ºå½“å‰ç±»çš„åŒ¿åç±»ä¿å­˜ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥è¿˜ä¼šå¯¹è¿™äº›ç±»å†åšä¸€äº›å˜æ¢ï¼ŒåŒ…æ‹¬ç”¨å•ä¾‹ä¼˜åŒ–æ— çŠ¶æ€çš„ lambda å¯¹è±¡ï¼Œå°†æ„é€ å‡½æ•°æ›¿æ¢ä¸ºå·¥å‚æ–¹æ³•ï¼ˆBackportLambdaClass#visitEndï¼‰ã€‚æœ€åæŠŠ invokedynamic æ›¿æ¢ä¸ºå¯¹è¯¥åŒ¿åç±»çš„å®ä¾‹åŒ–è¯­å¥ï¼Œå°±æ˜¯è¿™æ ·æŠŠ invokedynamic æ›¿æ¢ä¸ºç­‰ä»·çš„å…¼å®¹ä»£ç ã€‚ä¸è¿‡ï¼Œ retrolambda çš„å®ç°ä¾èµ–äº java å¯¹ lambda çš„å…·ä½“å®ç°ï¼Œåç»­çš„ java ç‰ˆæœ¬ä¸ç”¨åŒ¿åç±»äº†ï¼Œé‚£ä¹ˆ retrolambda ä¹Ÿå°±ä¸èƒ½ç”¨äº†ã€‚ åœ¨ Android Studio 3.0 ä¹‹å‰ï¼Œè¦åœ¨åŸºäº java çš„ Android å¼€å‘ä¸­ä½¿ç”¨ lambda è¡¨è¾¾ä¸€èˆ¬éƒ½æ˜¯ç”¨ retrolambda æ¥è½¬æ¢ä¸º dex èƒ½å¤„ç†çš„å­—èŠ‚ç æ¥å®ç°çš„ï¼ˆå°±ä¸æå¤­æŠ˜çš„ Jack äº†ï¼‰ã€‚ ä¸è¿‡ Android Studio 3.0 åï¼ŒIDE å·²ç»æ”¯æŒå®ç°è¿™ä¸ªè½¬æ¢äº†ï¼Œç®€ç§° desugarã€‚å…·ä½“å¦‚ä½•å¼€å¯å¯å‚çœ‹å®˜æ–¹æ–‡æ¡£ï¼šUse Java 8 language featuresã€‚IDE çš„ desugar è¿‡ç¨‹æ¯” retrolamda çš„ä¸»è¦åŒºåˆ«å°±æ˜¯æ—¶æœºä¸åŒï¼ŒåŸç†ä¸Šå¤§è‡´æ˜¯ä¸€æ ·çš„ï¼ŒIDE çš„å®ç°å¯è§ LambdaDesugaring#visitInvokeDynamicInsnã€‚ retrolambda åªèƒ½å¯¹å½“å‰é¡¹ç›®è¿›è¡Œè½¬æ¢ï¼ŒIDE æ˜¯åœ¨è½¬æ¢ä¸º dex ä¹‹å‰åšçš„è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´ IDE è¿˜æ”¯æŒç¬¬ä¸‰æ–¹ç”¨ java 8 ç¼–è¯‘çš„åº“ã€‚ åŸå›¾è§ Build Workflow - Android Studio Project Site æ€»ä¹‹ï¼ŒAndroid å¯¹ lambda çš„å®ç°ä¸ java 8 å¹¶æœªå¤ªå¤§åŒºåˆ«ï¼Œæœ€ä¸»è¦çš„åŒºåˆ« java 8 çš„åŒ¿åç±»åœ¨è¿è¡Œæ—¶ç”Ÿæˆï¼Œè€Œ Android æ˜¯åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼ˆè¿™æ ·è¿˜å¯ä»¥é¿å…äº†å¯¹ serializable lambda çš„ç‰¹æ®Šå¯¹å¾…ï¼‰ã€‚ lambda è¡¨è¾¾å¼ lambda è¡¨è¾¾å¼åœ¨ java ä¸­å°±æ˜¯ç”¨äºåˆ›å»ºå‡½æ•°å¼æ¥å£å®ä¾‹ï¼ˆlambda objectï¼‰çš„è¡¨è¾¾å¼ï¼Œlambda çš„å®é™…ä½¿ç”¨ä¸­ï¼Œä¸»è¦å°†å…¶åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œå…¶ä¸€ï¼Œæ— çŠ¶æ€çš„ï¼ˆstatelessï¼‰ lambda è¡¨è¾¾å¼ï¼ŒæŒ‡çš„å°±æ˜¯æ²¡æœ‰è‡ªç”±å˜é‡çš„ lambda è¡¨è¾¾å¼ã€‚ç›¸å¯¹çš„ï¼Œå¦ä¸€ç±»å°±æ˜¯æœ‰è‡ªç”±å˜é‡çš„ lambda è¡¨è¾¾å¼ã€‚ ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡ï¼ŒæŠŠä¸€é“ lambda è¡¨è¾¾å¼ä»å…¶ä¸Šä¸‹æ–‡æŠ½ç¦»å‡ºæ¥çœ‹ä¸€ä¸‹ï¼šL1 = s -&amp;gt; Integer.valueOf(s)ã€‚è¡¨è¾¾å¼ä¸­çš„ä¸¤ä¸ªé‡ Integer å’Œ sï¼ŒInteger æ˜¯å¸¸é‡ï¼Œè€Œ s åœ¨å‚æ•°åˆ—è¡¨ä¸­å£°æ˜äº†ï¼ˆç±»å‹çœç•¥ï¼‰ï¼Œè¿™é‡Œç§° s æ˜¯ä¸€ä¸ªç»‘å®šå˜é‡ï¼Œæ‰€æœ‰é‡éƒ½æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥ L1 å°±æ˜¯æ— çŠ¶æ€çš„ lambda è¡¨è¾¾å¼ï¼ˆå¯ä»¥è®¤ä¸ºå®ƒçš„è°ƒç”¨ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼‰ã€‚ å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š() -&amp;gt; System.out.println(Arrays.toString(args))ã€‚args æ˜¯ä»€ä¹ˆï¼Ÿè„±ç¦»äº†ä¸Šä¸‹æ–‡å°±æ— æ³•ç¡®å®šäº†ï¼Œå¦‚æœåœ¨ä¸Šä¸‹æ–‡ä¸­çœ‹ï¼Œå°±å¾ˆæ¸…æ¥š args æ˜¯ä»€ä¹ˆäº†ï¼š public static void main(String[] args) { Runnable r = () -&amp;gt; System.out.println(Arrays.toString(args)); r.run(); } args åœ¨è¿™é‡Œå°±æ˜¯è‡ªç”±å˜é‡ã€‚è¦å¯¹ lambda è¡¨è¾¾å¼æ±‚å€¼å‰æ‰€æœ‰è‡ªç”±å˜é‡éƒ½æ˜¯å¾—å·²çŸ¥çš„ï¼Œjava ä¸­æ‰€æœ‰è‡ªç”±å˜é‡éƒ½å¿…é¡»åœ¨ç¼–è¯‘æœŸç¡®è®¤ï¼ˆå¦å¤–ä¸€ç§ä¸åŒçš„å®ç°å¯å‚è€ƒ Groovyï¼‰ï¼Œä¸ºè‡ªç”±å˜é‡ç¡®å®šå€¼çš„è¿‡ç¨‹ç§°ä¸ºå˜é‡æ•è·ï¼ˆcapturingï¼‰ï¼ŒæŠŠå˜é‡æ•è·åå’Œ lambda è¡¨è¾¾å¼ç»‘å®šåœ¨ä¸€èµ·çš„ç»“æ„å°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ï¼Œlambda å¯¹è±¡å®ä¾‹å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚java ä¸­å°±æ˜¯é€šè¿‡åŒ¿åç±»æ¥å­˜æ”¾è¿™äº›æ•è·è¿™äº›å˜é‡ï¼Œè€Œä¸”æ˜¯ä»¥ final å¼•ç”¨çš„å½¢å¼ï¼Œæ‰€ä»¥æ›´åº”è¯¥è¯´æ˜¯å€¼è€Œä¸æ˜¯å˜é‡ã€‚ å…ˆçœ‹ä¸€ä¸‹æœ€ç®€å•çš„æ— çŠ¶æ€ lambdaï¼š public class LambdaTest { public void testStateless() { Runnable r = (() -&amp;gt; System.out.println(&quot;pure&quot;)); r.run(); } } ç¼–è¯‘åå†åç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå˜æˆäº†ä¸¤ä¸ªç±»ï¼ˆå¯ä»¥åœ¨ build/intermediates/transforms/desugar ä¸­æ‰¾åˆ°ï¼‰ï¼š LambdaTest: public class LambdaTest { public void testStateless() { Runnable r = LambdaTest$$Lambda$0.$instance; r.run(); } static void lambda$testPure$0$LambdaTest(){ System.out.println(&quot;pure&quot;); } } LambdaTest$$Lambda$0: final class LambdaTest$$Lambda$0 implements Runnable { static final Runnable $instance = new LambdaTest$$Lambda$0(); private LambdaTest$$Lambda$0() { } public void run() { LambdaTest.lambda$testPure$0$LambdaTest(); } } lambda body å˜æˆäº† LambdaTest ä¸­çš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ desugar æ–¹æ³•ï¼Œå¦å¤–è¿˜ç”Ÿæˆäº†ä¸€ä¸ªç±» LambdaTest$$Lambda$0 å®ç°äº†å‡½æ•°å¼æ¥å£ï¼Œåœ¨å…¶å®ç°æ–¹æ³•é‡Œå†å»è°ƒç”¨ desugar æ–¹æ³•ï¼Œæ— çŠ¶æ€ lambda å¯¹è±¡ä¸éœ€è¦ä¿å­˜é¢å¤–çš„å‚æ•°ï¼Œè¿™é‡Œç”¨å•ä¾‹è¿›è¡Œä¼˜åŒ–ã€‚ å¦‚æœæ•è·äº†å˜é‡ï¼Œä»¥å±€éƒ¨å˜é‡å’Œå½¢å¼å‚æ•°ä¸ºä¾‹ï¼Œæ— è®ºæ˜¯å±€éƒ¨å˜é‡è¿˜æ˜¯ä¸Šä¸‹æ–‡æ–¹æ³•çš„å½¢å¼å‚æ•°ï¼Œå®ƒä»¬çš„å€¼å’Œç±»å‹éƒ½æ˜¯ç¼–è¯‘æ—¶ç¡®å®šçš„ï¼š public void capturingLocal(String strp) { String str = &quot;lexical&quot;; Runnable r = () -&amp;gt; System.out.println(str + strp); r.run(); } LambdaTest$$Lambda$1ï¼š final class LambdaTest$$Lambda$1 implements Runnable { private final String arg$1; private final String arg$2; LambdaTest$$Lambda$1(String var1, String var2) { this.arg$1 = var1; this.arg$2 = var2; } public void run() { LambdaTest.lambda$capturingLocal$1$LambdaTest(this.arg$1, this.arg$2); } } åŸå…ˆçš„ lambda è¡¨è¾¾å¼èµ‹å€¼è¯­å¥å˜æˆäº† Runnable r = new LambdaTest$$Lambda$1(str, strp)ï¼Œè‡ªç”±å˜é‡éƒ½é€šè¿‡ lambda å¯¹è±¡æ„é€ å™¨è¿›è¡Œæ•è·å¹¶ä¿å­˜èµ·æ¥ï¼Œå¯¹ lambda æ±‚å€¼çš„æ—¶å€™å†ä¼ é€’ç»™ desugar æ–¹æ³•ï¼Œè¿™é‡Œ Runnable çš„æ–¹æ³•æ²¡æœ‰å½¢å¼å‚æ•°ï¼Œå¦‚æœæœ‰å½¢å¼å‚æ•°çš„è¯ï¼Œè¿™äº›æ•è·çš„å˜é‡ä¼šæ’åœ¨å½¢å¼å‚æ•°åé¢å†ä¼ é€’ç»™ desugar æ–¹æ³•ã€‚ å¦‚æœåœ¨ lambda ä¸­å¼•ç”¨äº†å¯¹è±¡å­—æ®µï¼š private String stri = &quot;instance&quot;; public void capturingInstance() { Runnable r = () -&amp;gt; System.out.println(stri); r.run(); } LambdaTest$$Lambda$4: final class LambdaTest$$Lambda$4 implements Runnable { private final LambdaTest arg$1; LambdaTest$$Lambda$4(LambdaTest var1) { this.arg$1 = var1; } public void run() { this.arg$1.lambda$capturingInstance$4$LambdaTest(); } } å¯ä»¥çœ‹åˆ° lambda å¯¹è±¡ä¿å­˜äº†ä¸Šä¸‹æ–‡ç±»çš„å¼•ç”¨ï¼Œæ— è®ºæ˜¯å®ä¾‹å˜é‡è¿˜æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå®é™…ä¸Šéƒ½æœ‰ä¸€ä¸ªéšæ€§çš„æ¥æ”¶è€…å°±æ˜¯ thisï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¾æ€§çš„å£°æ˜ï¼Œåœ¨ lambda body ä¸­çš„ this å¼•ç”¨æŒ‡å‘çš„å°±æ˜¯å…¶ä¸Šä¸‹æ–‡çš„ç±»ï¼Œè€Œä¸æ˜¯ lambda å¯¹è±¡ï¼ˆä¸åŒ¿åç±»çš„åŒºåˆ«ï¼‰ã€‚åœ¨è¿™é‡Œ lambda è¡¨è¾¾æ•è·çš„å˜é‡å°±æ˜¯å®ä¾‹å˜é‡çš„æ¥æ”¶è€… this è€Œä¸æ˜¯å®ä¾‹å˜é‡æœ¬èº«ã€‚è€Œä¸”å¯ä»¥çœ‹åˆ° lambda çš„ desugar æ–¹æ³•å˜æˆäº†å®ä¾‹æ–¹æ³•ï¼Œç”¨è¿™ç§æ–¹å¼ï¼Œlambda body å‡ ä¹ä¸ç”¨åšä»»ä½•è½¬æ¢åªéœ€ç…§æ¬è¿›æ–¹æ³•ä½“å°±è¡Œã€‚è¿˜åŒ…æ‹¬å¯¹ super çš„å¤„ç†ï¼Œlambda å¯¹è±¡æ— æ³•æ•è· superï¼Œåªèƒ½é€šè¿‡è°ƒç”¨ this çš„å®ä¾‹æ–¹æ³•æ¥å®ç°å¯¹ super çš„è°ƒç”¨ï¼Œå¯è§ç”¨ desugar æ–¹æ³•æ¥å®ç°æ˜¯ååˆ†ä¾¿åˆ©çš„ã€‚ this çš„æ•è·ï¼Œå¯¹äº Android å¼€å‘æ¥è¯´ç‰¹åˆ«è¦æ³¨æ„ï¼Œåœ¨ Activity ä¸­ä½¿ç”¨ lambda è¡¨è¾¾å¼çš„è¯ï¼Œæ„å‘³ç€ä¼šé€šè¿‡ final å¼•ç”¨çš„å½¢è±¡å°†å½“å‰ Activity å®ä¾‹ä¼ é€’åˆ°å¤–éƒ¨å»ï¼Œç¨ä¸æ³¨æ„ä¾¿ä¼šå¼•èµ·æ³„éœ²ã€‚ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„æŠ€å·§ï¼Œå°†å®ä¾‹å­—æ®µèµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œå°±ä¸ä¼šæ•è· this å¼•ç”¨äº†ã€‚å½“ç„¶å¯¹äºç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å¯¹è±¡æ¥è¯´è¿˜æ˜¯ä¸å®‰å…¨çš„ï¼Œæ¯”å¦‚ Viewã€‚ æ–¹æ³•å¼•ç”¨ æ–¹æ³•å¼•ç”¨åŸºæœ¬å¯ä»¥å½“æˆæ˜¯ lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œæ–¹æ³•å¼•ç”¨éƒ½å¯ä»¥ç”¨ç›¸åº”çš„ lambda è¡¨è¾¾å¼æ¥ä»£æ›¿ï¼Œæœ‰ä¸€ä¸ªä¾‹å¤–å°±æ˜¯å¸¦æœ‰ç±»å‹å‚æ•°æ–¹æ³•çš„å‡½æ•°å¼æ¥å£ï¼Œèƒ½ç”¨æ–¹æ³•å¼•ç”¨ä½†ä¸èƒ½ç”¨ lambda è¡¨è¾¾å¼ï¼Œè§ java - Lambda Expression and generic method - Stack Overflowã€‚æ–¹æ³•å¼•ç”¨ä¹Ÿåˆ†ä¸ºæ•è·ä¸éæ•è·ï¼Œå¯¹äºæ— é¡»æ•è·æ¥çš„æ–¹æ³•å¼•ç”¨ä¸»è¦æœ‰ï¼š é™æ€æ–¹æ³• æ„é€ å™¨ æœªç»‘å®šçš„å®ä¾‹æ–¹æ³• ä»€ä¹ˆæ˜¯æœªç»‘å®šçš„å®ä¾‹æ–¹æ³•ï¼Ÿæ–¹æ³•å¼•ç”¨è¯­æ³•å¯ä»¥å¤§è‡´è®¤ä¸ºæ˜¯æ¥æ”¶è€…::æ–¹æ³•åè¿™æ ·çš„å½¢å¼ï¼Œæ–¹æ³•å¯ä»¥æ˜¯å®ä¾‹æ–¹æ³•æˆ–è€…æ˜¯é™æ€æ–¹æ³•ï¼Œå½“æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•è€Œæ¥æ”¶è€…æ˜¯ç±»å¼•ç”¨æ—¶ï¼Œè¿™æ—¶æ¥æ”¶è€…å°±æ˜¯ä¸€ä¸ªæœªç»‘å®šçš„æ¥æ”¶è€…ï¼š list.filter(String::isEmpty) isEmpty æ˜¯å®ä¾‹æ–¹æ³•ï¼Œè€Œæ¥æ”¶è€…æ˜¯ç±»å¼•ç”¨ï¼Œåœ¨è¿™é‡Œæ¥æ”¶è€…åœ¨è¿è¡Œä¼šè¢«æ›¿æ¢ä¸ºè¢«æ›¿æ¢ä¸º list å†…çš„å…ƒç´ ï¼Œç­‰ä»·äºè¿™æ ·çš„ lambda è¡¨è¾¾å¼ï¼š list.filter(s -&amp;gt; s.isEmpty()) æ³¨æ„éç»‘å®šçš„å®ä¾‹æ–¹æ³•å¼•ç”¨æ˜¯æœ‰äºŒä¹‰æ€§çš„ï¼Œjava æ ¹æ®æ–¹æ³•çš„å£°æ˜å»æ¨å®š isEmpty æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œä»¥ä¸‹é¢çš„ç±»ä¸ºä¾‹ï¼š public class C{ public static boolean isEmpty(C c); public boolean isEmpty(); } å¦‚ä¸Šé¢çš„æ–¹æ³•å£°æ˜ä¸¤ä¸ªæ–¹æ³•å¯¹äºè¡¨è¾¾å¼ list.filter(C::isEmpty) æ¥è¯´éƒ½æ˜¯åˆæ³•çš„ï¼Œjava ä¹Ÿå°±æ— æ³•æ¨æ–­å‡ºè¿™é‡Œæ˜¯æŒ‡å“ªä¸ªæ–¹æ³•å¼•ç”¨ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥é”™ã€‚ éœ€è¦æ•è·çš„æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å·²ç»‘å®šå®ä¾‹çš„æ–¹æ³•å¼•ç”¨ï¼ŒåŒ…æ‹¬å®ä¾‹æ–¹æ³•ï¼Œå†…éƒ¨ç±»ï¼ˆæ•°ç»„ï¼‰çš„æ„é€ å™¨ï¼Œsuper æ–¹æ³•ã€‚æ¥æ”¶è€…å°±æ˜¯é—­åŒ…æ‰€è¦æ•è·çš„å˜é‡ã€‚ä½†è¦æ³¨æ„ä¸€ç‚¹æ–¹æ³•å¼•ç”¨æ˜¯æ²¡æœ‰éšå¼å£°æ˜çš„ this å¼•ç”¨çš„ã€‚æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼Œä»è¯­ä¹‰ä¸Šæ¥è¯´æ˜¯ç­‰ä»·çš„ï¼Œ public void capturingInstance() { Predicate&amp;lt;String&amp;gt; c = s -&amp;gt; stri.equals(s); } public void capturingIntanceMethod() { Predicate&amp;lt;String&amp;gt; c = stri::equals; } ä½†æ˜¯ä»–ä»¬æ•è·çš„å¼•ç”¨å´ä¸ä¸€æ ·ï¼Œä¸Šæ–‡å¯çŸ¥ lambda è¡¨è¾¾å¼æ•è·çš„æ˜¯éšå¼å£°æ˜çš„ thisï¼Œè€Œæ–¹æ³•å¼•ç”¨æ•è·çš„å´æ˜¯ç›´æ¥æ¥æ”¶è€…ï¼š final class LambdaTest$$Lambda$8 implements Predicate { private final String arg$1; private LambdaTest$$Lambda$8(String var1) { this.arg$1 = var1; } static Predicate get$Lambda(String var0) { return new LambdaTest$$Lambda$8(var0); } public boolean test(Object var1) { return this.arg$1.equals((String)var1); } } è¿˜æœ‰ä¸€ç‚¹ï¼Œä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œå› ä¸ºæ–¹æ³•å·²ç»æ˜¯ç°æˆçš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µå°±æ²¡å¿…è¦é‡æ–°ç”Ÿæˆä¸€ä¸ª desugar æ–¹æ³•ã€‚ ä½†æœ‰ä¾‹å¤–ï¼Œsuper å’Œå¯å˜å‚æ•°ï¼Œéœ€è¦ä¸€ä¸ªæ¡¥æ¥æ–¹æ³•ã€‚å¯¹äº super æ¥è¯´ï¼Œlambda å¯¹è±¡æ˜¯æ— æ³•ä¸ä¼šå½“å‰ç±»çš„ super å¼•ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦å€Ÿç”±å½“å‰ç±»çš„å®ä¾‹æ–¹æ³•æ¥å®ç°å¯¹ super çš„å¼•ç”¨ã€‚ æ¥æ”¶è€…ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼š Predicate&amp;lt;String&amp;gt; c = (stri.equals(&quot;abc&quot;) ? &quot;abc&quot; : &quot;bcd&quot;)::equals; åœ¨è¿™é‡Œæ•è·çš„æ˜¯è¡¨è¾¾å¼æ±‚å€¼çš„ç»“æœè€Œä¸æ˜¯è¡¨è¾¾å¼ã€‚ æ‰€ä»¥å¯¹äº Activity æ¥è¯´ï¼Œè¦æ ¼å¤–æ³¨æ„ä¸‹é¢å‡ ç§æƒ…å†µå¯èƒ½å¯¼è‡´å¼•ç”¨æ³„éœ²ï¼š this å…³é”®å­—çš„æ–¹æ³•å¼•ç”¨ super å…³é”®å­—çš„æ–¹æ³•å¼•ç”¨ éé™æ€å†…éƒ¨ç±»çš„æ„é€ å™¨å¼•ç”¨ Activity æˆ–å…¶å®ä¾‹å˜é‡å¯å˜å‚æ•°æ–¹æ³•å¼•ç”¨ å¯å‚è€ƒ Translation of Lambda Expressionsã€‚</summary></entry><entry><title type="html">ç†è§£ invokedynamic</title><link href="http://dourok.info/2017/10/08/understanding-invokedynamic/" rel="alternate" type="text/html" title="ç†è§£ invokedynamic" /><published>2017-10-08T00:00:00+00:00</published><updated>2017-11-30T15:56:47+00:00</updated><id>http://dourok.info/2017/10/08/understanding-invokedynamic</id><content type="html" xml:base="http://dourok.info/2017/10/08/understanding-invokedynamic/">&lt;p&gt;inDyï¼ˆinvokedynamicï¼‰æ˜¯ java 7 å¼•å…¥çš„ä¸€æ¡æ–°çš„è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œè¿™æ˜¯è‡ª 1.0 ä»¥æ¥ç¬¬ä¸€æ¬¡å¼•å…¥æ–°çš„è™šæ‹ŸæœºæŒ‡ä»¤ã€‚åˆ°äº† java 8 è¿™æ¡æŒ‡ä»¤æ‰ç¬¬ä¸€æ¬¡åœ¨ java åº”ç”¨ï¼Œç”¨åœ¨ lambda è¡¨è¾¾å¼ä¸­ã€‚ indy ä¸å…¶ä»– invoke æŒ‡ä»¤ä¸åŒçš„æ˜¯å®ƒå…è®¸ç”±åº”ç”¨çº§çš„ä»£ç æ¥å†³å®šæ–¹æ³•è§£æã€‚æ‰€è°“åº”ç”¨çº§çš„ä»£ç å…¶å®æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œè¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸ºå¼•å¯¼æ–¹æ³•ï¼ˆBootstrap Methodï¼‰ï¼Œç®€ç§° BSMã€‚BSM è¿”å›ä¸€ä¸ª CallSiteï¼ˆè°ƒç”¨ç‚¹ï¼‰ å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±å’Œ inDy é“¾æ¥åœ¨ä¸€èµ·äº†ã€‚ä»¥åå†æ‰§è¡Œè¿™æ¡ inDy æŒ‡ä»¤éƒ½ä¸ä¼šåˆ›å»ºæ–°çš„ CallSite å¯¹è±¡ã€‚CallSite å°±æ˜¯ä¸€ä¸ª MethodHandleï¼ˆæ–¹æ³•å¥æŸ„ï¼‰çš„ holderã€‚æ–¹æ³•å¥æŸ„æŒ‡å‘ä¸€ä¸ªè°ƒç”¨ç‚¹çœŸæ­£æ‰§è¡Œçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ç†è§£ &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html&quot;&gt;MethodHandle&lt;/a&gt;ï¼ˆæ–¹æ³•å¥æŸ„ï¼‰çš„ä¸€ç§æ–¹å¼å°±æ˜¯å°†å…¶è§†ä¸ºä»¥å®‰å…¨ã€ç°ä»£çš„æ–¹å¼æ¥å®ç°åå°„çš„æ ¸å¿ƒåŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ª java æ–¹æ³•çš„å®ä½“æœ‰å››ä¸ªæ„æˆï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ–¹æ³•å&lt;/li&gt;
  &lt;li&gt;ç­¾åâ€“å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼&lt;/li&gt;
  &lt;li&gt;å®šä¹‰æ–¹æ³•çš„ç±»&lt;/li&gt;
  &lt;li&gt;æ–¹æ³•ä½“ï¼ˆä»£ç ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒï¼Œç­¾åä¸åŒï¼ŒJVM ä¼šè§†ä¸ºä¸åŒçš„æ–¹æ³•ï¼Œä¸è¿‡åœ¨ Java ä¸­åªæ”¯æŒç­¾åçš„å‚æ•°åˆ—è¡¨éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯é‡è½½å¤šæ€ã€‚ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼Œé™¤äº†è¦æ–¹æ³•çš„å®ä½“å¤–ï¼Œè¿˜è¦è°ƒç”¨è€…ï¼ˆcallerï¼‰å’Œæ¥æ”¶è€…ï¼ˆreceiverï¼‰ï¼Œè°ƒç”¨è€…ä¹Ÿå°±æ˜¯æ–¹æ³•è°ƒç”¨è¯­å¥æ‰€åœ¨çš„ç±»ã€‚æ¥æ”¶è€…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªæ–¹æ³•è°ƒç”¨éƒ½è¦ä¸€ä¸ªæ¥æ”¶è€…ï¼Œå®ƒå¯ä»¥æ˜¯éšè—çš„ï¼ˆthisï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç±»æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š &lt;code&gt;String.valueOf&lt;/code&gt;ï¼Œç±»ä¹Ÿæ˜¯ Class çš„ä¸€ä¸ªå®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodType.html&quot;&gt;MethodType&lt;/a&gt; è¡¨ç¤ºæ–¹æ³•ç­¾åã€‚&lt;/p&gt;

&lt;p&gt;ç”¨ MethodHandle å®ç°çš„æ–¹æ³•è°ƒç”¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ–¹æ³•çš„å››ä¸ªæ„æˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Object rcvr = &quot;a&quot;;
try {
    MethodType mt = MethodType.methodType(int.class); // æ–¹æ³•ç­¾å
    MethodHandles.Lookup l = MethodHandles.lookup(); // è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç±»ã€‚è°ƒç”¨è€…å†³å®šæœ‰æ²¡æœ‰æƒé™èƒ½è®¿é—®åˆ°æ–¹æ³•
    MethodHandle mh = l.findVirtual(rcvr.getClass(), &quot;hashCode&quot;, mt); //åˆ†åˆ«æ˜¯å®šä¹‰æ–¹æ³•çš„ç±»ï¼Œæ–¹æ³•åï¼Œç­¾å

    int ret;
    try {
        ret = (int)mh.invoke(rcvr); // ä»£ç ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ¥æ”¶è€…
        System.out.println(ret);
    } catch (Throwable t) {
        t.printStackTrace();
    }
} catch (IllegalArgumentException | NoSuchMethodException | SecurityException e) {
    e.printStackTrace();
} catch (IllegalAccessException x) {
    x.printStackTrace();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¯¦ç»†å¯å‚è€ƒï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.com/articles/Invokedynamic-Javas-secret-weapon&quot;&gt;Invokedynamic - Javaâ€™s Secret Weapon&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å’Œè¯‘æ–‡ &lt;a href=&quot;https://zhuanlan.zhihu.com/p/28124632&quot;&gt;Invokedynamicï¼šJavaçš„ç§˜å¯†æ­¦å™¨ - çŸ¥ä¹ä¸“æ &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;java8-lambda-è¡¨è¾¾å¼&quot;&gt;java8 lambda è¡¨è¾¾å¼&lt;/h3&gt;

&lt;p&gt;lambda è¡¨è¾¾å¼ æ˜¯æ€ä¹ˆä½¿ç”¨ inDy å‘¢ï¼Ÿä»¥ä¸€æ®µç®€å•çš„ä»£ç ä¸ºä¾‹&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class LambdaTest {
    public static void main(String[] args) {
        Runnable r = () -&amp;gt; System.out.println(Arrays.toString(args));
        r.run();
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”¨ &lt;code&gt;javap -v -p LambdaTest&lt;/code&gt; æŸ¥çœ‹å­—èŠ‚ç ï¼Œå¯ä»¥å‘ç°å¯¥å¯¥å‡ è¡Œ java ä»£ç ç”Ÿæˆçš„å­—èŠ‚ç å´ä¸å°‘ï¼Œå•å•å¸¸é‡æ± å¸¸é‡å°±æœ‰ 66 ä¸ªä¹‹å¤šã€‚è¾“å‡ºè§ &lt;a href=&quot;https://gist.github.com/douo/05550163c8f40ffa38232084b800332c&quot;&gt;LambdaTest.class&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥å‘ç°å¤šå‡ºäº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œæ–¹æ³•ä½“å°±æ˜¯ lambda ä½“ï¼ˆlambda bodyï¼‰ï¼Œè½¬æ¢ä¸ºæºç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private static void lambda$main$0(java.lang.String[] args){
    System.out.println(Arrays.toString(args));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸»è¦çœ‹ä¸€ä¸‹ main æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œè€Œæ˜¯å‡ºç°ä¸€æ¡ inDy æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=2, args_size=1
         0: aload_0
         1: invokedynamic #2,  0              // InvokeDynamic #0:run:([Ljava/lang/String;)Ljava/lang/Runnable;
         6: astore_1
         7: aload_1
         8: invokeinterface #3,  1            // InterfaceMethod java/lang/Runnable.run:()V
        13: return
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ° inDy æŒ‡å‘ä¸€ä¸ªç±»å‹ä¸º [CONSTANT_InvokeDynamic_info][] çš„å¸¸é‡é¡¹ &lt;code&gt;#2&lt;/code&gt;ï¼Œå¦å¤– &lt;code&gt;0&lt;/code&gt; æ˜¯é¢„ç•™å‚æ•°ï¼Œæš‚æ—¶æ²¡æœ‰ä½œç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#2 = InvokeDynamic      #0:#30         // #0:run:([Ljava/lang/String;)Ljava/lang/Runnable;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;#0&lt;/code&gt; è¡¨ç¤ºåœ¨ &lt;a href=&quot;http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.21&quot;&gt;Bootstrap methods è¡¨&lt;/a&gt;ä¸­çš„ç´¢å¼•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;BootstrapMethods:
  0: #27 invokestatic java/lang/invoke/LambdaMetafactory.metafactory:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;
    Method arguments:
      #28 ()V
      #29 invokestatic com/company/LambdaTest.lambda$main$0:([Ljava/lang/String;)V
      #28 ()V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;#30&lt;/code&gt; åˆ™æ˜¯ä¸€ä¸ª [CONSTANT_NameAndType_info][]ï¼Œè¡¨ç¤ºæ–¹æ³•åå’Œæ–¹æ³•ç±»å‹ï¼ˆè¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨ï¼‰ï¼Œè¿™ä¸ªä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ BSMã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#30 = NameAndType        #43:#44        // run:([Ljava/lang/String;)Ljava/lang/Runnable;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†çœ‹å›è¡¨ä¸­çš„ç¬¬ 0 é¡¹ï¼Œ&lt;code&gt;#27&lt;/code&gt; æ˜¯ä¸€ä¸ª [CONSTANT_MethodHandle_info][]ï¼Œå®é™…ä¸Šæ˜¯ä¸ª MethodHandleï¼ˆæ–¹æ³•å¥æŸ„ï¼‰å¯¹è±¡ï¼Œè¿™ä¸ªå¥æŸ„æŒ‡å‘çš„å°±æ˜¯ BSM æ–¹æ³•ã€‚åœ¨è¿™é‡Œå°±æ˜¯:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;java.lang.invoke.LambdaMetafactory.metafactory(MethodHandles.Lookup,String,MethodType,MethodType,MethodHandle,MethodType)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;BSM å‰ä¸‰ä¸ªå‚æ•°æ˜¯å›ºå®šçš„ï¼Œåé¢è¿˜å¯ä»¥é™„åŠ ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†æ˜¯å‚æ•°çš„ç±»å‹æ˜¯æœ‰é™åˆ¶çš„ï¼Œå‚æ•°ç±»å‹åªèƒ½æ˜¯&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;String&lt;/li&gt;
  &lt;li&gt;Class&lt;/li&gt;
  &lt;li&gt;int&lt;/li&gt;
  &lt;li&gt;long&lt;/li&gt;
  &lt;li&gt;float&lt;/li&gt;
  &lt;li&gt;double&lt;/li&gt;
  &lt;li&gt;MethodHandle&lt;/li&gt;
  &lt;li&gt;MethodType&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;LambdaMetafactory.metafactory å¸¦å¤šä¸‰ä¸ªå‚æ•°ï¼Œè¿™äº›çš„å‚æ•°çš„å€¼ç”± &lt;a href=&quot;http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.21&quot;&gt;Bootstrap methods è¡¨&lt;/a&gt; æä¾›ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Method arguments:
  #25 ()V
  #26 invokestatic com/company/LambdaTest.lambda$main$0:()V
  #25 ()V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;inDy æ‰€éœ€è¦çš„æ•°æ®å¤§æ¦‚å°±æ˜¯è¿™äº›ï¼Œå¯å‚è€ƒ &lt;a href=&quot;http://blog.csdn.net/zxhoo/article/details/38387141&quot;&gt;Java8å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ â€“ InvokeDynamicæŒ‡ä»¤ - CSDNåšå®¢&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;indy-è¿è¡Œæ—¶&quot;&gt;inDy è¿è¡Œæ—¶&lt;/h4&gt;

&lt;p&gt;æ¯ä¸€ä¸ª inDy æŒ‡ä»¤éƒ½ç§°ä¸º Dynamic Call Site(åŠ¨æ€è°ƒç”¨ç‚¹)ï¼Œæ ¹æ® jvm è§„èŒƒæ‰€è¯´çš„ï¼ŒinDy å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼Œè¿™ä¸¤æ­¥éƒ¨åˆ†ä»£ç ä»£ç æ˜¯åœ¨ java å±‚çš„ï¼Œç»™ &lt;code&gt;metafactory&lt;/code&gt; æ–¹æ³•è®¾æ–­ç‚¹å¯ä»¥çœ‹åˆ°ä¸€äº›è¡Œä¸ºã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ inDy éœ€è¦ä¸€ä¸ª &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/invoke/CallSite.html&quot;&gt;CallSite&lt;/a&gt;ï¼ˆè°ƒç”¨ç‚¹å¯¹è±¡ï¼‰ï¼ŒCallSite æ˜¯ç”± BSM è¿”å›çš„ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±æ˜¯è°ƒç”¨ BSM æ–¹æ³•ã€‚ä»£ç å¯å‚è€ƒï¼š&lt;a href=&quot;https://github.com/dmlloyd/openjdk/blob/92e8b3df00eddf6c661a8a2c52339d50a358d472/jdk/src/java.base/share/classes/java/lang/invoke/CallSite.java#L300&quot;&gt;java.lang.invoke.CallSite#makeSite&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è°ƒç”¨ BSM æ–¹æ³•å¯ä»¥çœ‹ä½œ invokevirtual æŒ‡ä»¤æ‰§è¡Œä¸€ä¸ª invoke æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;invoke:(MethodHandle,Lookup,String,MethodType,/*å…¶ä»–é™„åŠ é™æ€å‚æ•°*/)CallSite
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‰å››ä¸ªå‚æ•°æ˜¯å›ºå®šçš„ï¼Œè¢«ä¾æ¬¡å‹å…¥æ“ä½œæ ˆé‡Œ&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;MethodHandleï¼Œå®é™…ä¸Šè¿™ä¸ªæ–¹æ³•å¥æŸ„å°±æ˜¯æŒ‡å‘ BSM&lt;/li&gt;
  &lt;li&gt;Lookup, ä¹Ÿå°±æ˜¯è°ƒç”¨è€…ï¼Œæ˜¯ Indy æŒ‡ä»¤æ‰€åœ¨çš„ç±»çš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;Lookup#lookupClass()&lt;/code&gt;è·å–è¿™ä¸ªç±»&lt;/li&gt;
  &lt;li&gt;name ï¼Œlambda æ‰€å®ç°çš„æ–¹æ³•åï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;&quot;run&quot;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;invokedTypeï¼Œè°ƒç”¨ç‚¹çš„æ–¹æ³•ç­¾åï¼Œè¿™é‡Œæ˜¯ &lt;code&gt;methodType(Runnable.class,String[].class)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯é™„åŠ å‚æ•°ï¼Œè¿™äº›å‚æ•°æ˜¯çµæ´»çš„ï¼Œç”±&lt;a href=&quot;http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.21&quot;&gt;Bootstrap methods è¡¨&lt;/a&gt;æä¾›ï¼Œè¿™é‡Œåˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;samMethodTypeï¼Œå…¶å®å°±æ˜¯ Runnable.run çš„æè¿°ç¬¦: &lt;code&gt;methodType(void.class)&lt;/code&gt;ã€‚sam å°± single public abstract method çš„ç¼©å†™&lt;/li&gt;
  &lt;li&gt;implMethod: ç¼–è¯‘å™¨ç»™ç”Ÿæˆçš„ desugar æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ª MethodHandleï¼š&lt;code&gt;caller.findStatic(LambdaTest.class,&quot;lambda$main$0&quot;,methodType(void.class))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;instantiatedMethodType:  Runnable.run è¿è¡Œæ—¶çš„æè¿°ç¬¦ï¼Œå¦‚æœæ–¹æ³•æ³›å‹çš„ï¼Œé‚£è¿™ä¸ªç±»å‹å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™é‡Œæ˜¯ &lt;code&gt;methodType(void.class)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸Šé¢è¯´çš„å›ºå®šå…¶å®åº”è¯¥æ˜¯æŒ‡ inDy ä¼ é€’çš„å®å‚ç±»å‹æ˜¯å›ºå®šçš„ï¼ŒBSM å½¢å‚å£°æ˜å¯ä»¥æ˜¯éšæ„ï¼Œä¿è¯ BSM èƒ½è¢«è°ƒç”¨å°±è¡Œï¼Œæ¯”å¦‚è¯´ Lookup å£°æ˜ä¸º Object ä¸å½±å“è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯æ‰§è¡Œ &lt;code&gt;LambdaMetafactory.metafactory&lt;/code&gt; æ–¹æ³•äº†ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åç±»ï¼Œè¿™ä¸ªç±»æ˜¯é€šè¿‡ &lt;a href=&quot;http://asm.ow2.org/&quot;&gt;ASM&lt;/a&gt; ç¼–ç»‡å­—èŠ‚ç åœ¨å†…å­˜ä¸­ç”Ÿæˆçš„ï¼Œç„¶åç›´æ¥é€šè¿‡ unsafe ç›´æ¥åŠ è½½è€Œä¸ä¼šå†™åˆ°æ–‡ä»¶é‡Œã€‚ä¸è¿‡å¯ä»¥é€šè¿‡ä¸‹é¢çš„è™šæ‹Ÿæœºå‚æ•°è®©å®ƒè¿è¡Œçš„æ—¶å€™è¾“å‡ºåˆ°æ–‡ä»¶&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;-Djdk.internal.lambda.dumpProxyClasses=&amp;lt;path&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªç±»æ˜¯æ ¹æ® lambda çš„ç‰¹ç‚¹ç”Ÿæˆçš„ï¼Œè¾“å‡ºåå¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import java.lang.invoke.LambdaForm.Hidden;

// $FF: synthetic class
final class LambdaTest$$Lambda$1 implements Runnable {
    private final String[] arg$1;

    private LambdaTest$$Lambda$1(String[] var1) {
        this.arg$1 = var1;
    }

    private static Runnable get$Lambda(String[] var0) {
        return new LambdaTest$$Lambda$1(var0);
    }

    @Hidden
    public void run() {
        LambdaTest.lambda$main$0(this.arg$1);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åå°±æ˜¯åˆ›å»ºä¸€ä¸ª CallSiteï¼Œç»‘å®šä¸€ä¸ª MethodHandleï¼ŒæŒ‡å‘çš„æ–¹æ³•å…¶å®å°±æ˜¯ç”Ÿæˆçš„ç±»ä¸­çš„é™æ€æ–¹æ³• &lt;code&gt;LambdaTest$$Lambda$1.get$Lambda(String[])Runnable&lt;/code&gt;ã€‚ç„¶åæŠŠè°ƒç”¨ç‚¹å¯¹è±¡è¿”å›ï¼Œåˆ°è¿™é‡Œ BSM æ–¹æ³•æ‰§è¡Œå®Œæ¯•ã€‚&lt;/p&gt;

&lt;p&gt;æ›´è¯¦ç»†çš„å¯å‚è€ƒï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/0251fef3211c&quot;&gt;æµ…è°ˆLambda Expression - ç®€ä¹¦&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/27159693&quot;&gt;[Java] å…³äºOpenJDKå¯¹Java 8 lambdaè¡¨è¾¾å¼çš„è¿è¡Œæ—¶å®ç°çš„æŸ¥çœ‹æ–¹å¼ - çŸ¥ä¹ä¸“æ &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼Œå°±æ˜¯æ‰§è¡Œè¿™ä¸ªæ–¹æ³•å¥æŸ„äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒ &lt;code&gt;invokevirtual&lt;/code&gt; æŒ‡ä»¤æ‰§è¡Œ &lt;code&gt;MethodHandle#invokeExact&lt;/code&gt; ä¸€æ ·ï¼Œ&lt;/p&gt;

&lt;p&gt;åŠ ä¸Š inDy ä¸Šé¢é‚£ä¸€æ¡ &lt;code&gt;aload_0&lt;/code&gt; æŒ‡ä»¤ï¼Œè¿™æ˜¯æ“ä½œæ•°æ ˆæœ‰ä¸¤ä¸ªåˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;args[]ï¼Œlambda é‡Œé¢è°ƒç”¨äº† main æ–¹æ³•çš„å‚æ•°&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨ç‚¹å¯¹è±¡ï¼ˆCallSiteï¼‰ï¼Œå®é™…ä¸Šæ˜¯æ–¹æ³•å¥æŸ„ã€‚å¦‚æœæ˜¯ CostantCallSite çš„æ—¶å€™ï¼ŒinDy ä¼šç›´æ¥è·Ÿä»–çš„æ–¹æ³•å¥æŸ„é“¾æ¥ã€‚è§ä»£ç ï¼š&lt;a href=&quot;https://github.com/dmlloyd/openjdk/blob/77d7cb3ad9efc4edeaae7cc46e3b4a98ea617679/jdk/src/java.base/share/classes/java/lang/invoke/MethodHandleNatives.java#L255&quot;&gt;MethodHandleNatives.java#L255&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¼ å…¥ argsï¼Œæ‰§è¡Œæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª Runnable å¯¹è±¡ï¼Œå‹å…¥æ ˆé¡¶ã€‚åˆ°è¿™é‡Œ inDy å°±æ‰§è¡Œå®Œæ¯•ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥çš„æŒ‡ä»¤å°±å¾ˆå¥½ç†è§£ï¼Œ&lt;code&gt;astore_1&lt;/code&gt; æŠŠæ ˆé¡¶çš„ Runnable å¯¹è±¡æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨çš„æ§½ä½1ï¼Œä¹Ÿæ˜¯å˜é‡ &lt;code&gt;r&lt;/code&gt;ã€‚å‰©ä¸‹çš„å°±æ˜¯å†æ‹¿å‡ºæ¥è°ƒç”¨ &lt;code&gt;run&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h3 id=&quot;groovy&quot;&gt;Groovy&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ groovy æ˜¯å¦‚ä½•ä½¿ç”¨ inDy æŒ‡ä»¤çš„ã€‚å…ˆå¤ä¹ ä¸€é groovy çš„æ–¹æ³•æ´¾å‘ã€‚&lt;/p&gt;

&lt;p&gt;æ¯å½“ Groovy è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¸ä¼šç›´æ¥è°ƒç”¨å®ƒï¼Œè€Œæ˜¯è¦æ±‚ä¸€ä¸ªä¸­é—´å±‚æ¥ä»£æ›¿å®ƒã€‚ ä¸­é—´å±‚é€šè¿‡é’©å­æ–¹æ³•å…è®¸æˆ‘ä»¬æ›´æ”¹æ–¹æ³•è°ƒç”¨çš„è¡Œä¸ºã€‚è¿™ä¸ªä¸­é—´å±‚å°±æ˜¯ MOPï¼ˆmeta object proctolï¼‰ï¼ŒMOP ä¸»è¦æ‰¿è½½çš„ç±»å°±æ˜¯ &lt;a href=&quot;https://github.com/groovy/groovy-core/blob/master/src/main/groovy/lang/MetaClass.java&quot;&gt;MetaClass&lt;/a&gt; ã€‚ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ MOP ä¸»è¦æœ‰è¿™äº›æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;invokeMethod(String methodName, Object args)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;methodMissing(String name, Object arguments)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;getProperty(String propertyName)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;setProperty(String propertyName, Object newValue)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;propertyMissing(String name)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯ä»¥å¤§è‡´è®¤ä¸ºåœ¨ Groovy ä¸­çš„æ¯ä¸ªæ–¹æ³•å’Œå±æ€§è®¿é—®è°ƒç”¨éƒ½ä¼šè½¬åŒ–ä¸Šé¢çš„æ–¹æ³•è°ƒç”¨ã€‚è€Œè¿™äº›æ–¹æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡é‡å†™ä¿®æ”¹å®ƒçš„é»˜è®¤è¡Œä¸ºï¼ŒMOP ä½œä¸ºæ–¹æ³•æ´¾å‘çš„ä¸­å¿ƒæ¢çº½ä¸º Groovy æä¾›äº†éå¸¸çµæ´»çš„åŠ¨æ€ç¼–ç¨‹çš„èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨æ¥çœ‹ä¸€ä¸‹ä¸€æ®µç®€çŸ­çš„ groovy ä»£ç ï¼Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class Test{
  int a = 0;
  static void main(args){
      Test wtf = new Test()
      wtf.a
      wtf.doSomething()
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šè¿‡ &lt;code&gt;groovyc -indy Test.groovy&lt;/code&gt; æŠŠå®ƒç¼–è¯‘æˆå­—èŠ‚ç ã€‚ &lt;code&gt;indy&lt;/code&gt; é€‰é¡¹çš„æ„æ€å°±æ˜¯å¯ç”¨  invokedynamic æ”¯æŒã€‚&lt;/p&gt;

&lt;p&gt;çœ‹ä¸€ä¸‹ç¼–è¯‘åçš„ main æ–¹æ³•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public static void main(java.lang.String...);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS
    Code:
      stack=1, locals=2, args_size=1
         0: ldc           #2                  // class Test
         2: invokedynamic #44,  0             // InvokeDynamic #0:init:(Ljava/lang/Class;)Ljava/lang/Object;
         7: invokedynamic #50,  0             // InvokeDynamic #1:cast:(Ljava/lang/Object;)LTest;
        12: astore_1
        13: aload_1
        14: pop
        15: aload_1
        16: invokedynamic #56,  0             // InvokeDynamic #2:getProperty:(LTest;)Ljava/lang/Object;
        21: pop
        22: aload_1
        23: invokedynamic #61,  0             // InvokeDynamic #3:invoke:(LTest;)Ljava/lang/Object;
        28: pop
        29: return
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ä¸€å…±æœ‰ 4 æ¡ inDy æŒ‡ä»¤ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°ï¼Œè®¿é—®æˆå‘˜å˜é‡ï¼Œå’Œä¸å­˜åœ¨çš„æ–¹æ³•è°ƒç”¨éƒ½æ˜¯ é€šè¿‡ invokedynamic å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;å†çœ‹ä¸€ä¸‹å¼•å¯¼æ–¹æ³•è¡¨&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;BootstrapMethods:
  0: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite;
    Method arguments:
      #39 &amp;lt;init&amp;gt;
      #40 0
  1: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite;
    Method arguments:
      #46 ()
      #40 0
  2: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite;
    Method arguments:
      #51 a
      #52 4
  3: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite;
    Method arguments:
      #58 doSomething
      #40 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥å‘ç°æ‰€æœ‰ inDy æŒ‡ä»¤çš„å¼•å¯¼æ–¹æ³•éƒ½æ˜¯ &lt;a href=&quot;https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/vmplugin/v7/IndyInterface.java#L132&quot;&gt;IndyInterface.bootstrap&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä»¥æ–¹æ³•è°ƒç”¨çš„ inDy æŒ‡ä»¤ä¸ºä¾‹ï¼Œå®ƒçš„æ–¹æ³•åç§°æ˜¯ â€œinvokeâ€ï¼Œæ–¹æ³•ç­¾åæ˜¯ &lt;code&gt;methodType(Object.class,Test.class)&lt;/code&gt;ï¼ŒBSM æ–¹æ³•è¿˜é™„å¸¦ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å®é™…çš„æ–¹æ³•åï¼š&lt;code&gt;&quot;doSomething&quot;&lt;/code&gt; å’Œä¸€ä¸ªæ ‡å¿—ï¼š0&lt;/p&gt;

&lt;p&gt;BSM æ–¹æ³•æœ€ç»ˆè°ƒç”¨çš„æ˜¯ &lt;code&gt;realBootstrap&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private static CallSite realBootstrap(Lookup caller, String name, int callID, MethodType type, boolean safe, boolean thisCall, boolean spreadCall) {
    MutableCallSite mc = new MutableCallSite(type); //è¿™é‡Œæ˜¯ MutableCallSiteï¼Œlambda è¡¨è¾¾å¼ç”¨çš„æ˜¯ ConstantCallSite
    MethodHandle mh = makeFallBack(mc,caller.lookupClass(),name,callID,type,safe,thisCall,spreadCall);
    mc.setTarget(mh);
    return mc;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸»è¦çš„ä»£ç æ˜¯è°ƒç”¨ &lt;code&gt;makeFallBack&lt;/code&gt; æ¥è·å–ä¸€ä¸ªä¸´æ—¶çš„ MethodHandleã€‚å› ä¸ºåœ¨ç¬¬ä¸€æ­¥ groovy æ— æ³•ç¡®å®šæ¥æ”¶è€…ï¼ˆreceiverï¼‰ï¼Œä¹Ÿæ˜¯å°±æ˜¯ invoke æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå®å‚ï¼ˆTest å®ä¾‹ï¼‰ï¼Œå¿…é¡»è¦åœ¨ç¬¬äºŒæ­¥ç¡®å®š CallSite åæ‰ä¼šä¼ é€’è¿‡æ¥ã€‚æ‰€ä»¥æ–¹æ³•è§£æè¦æ”¾åœ¨ç¬¬äºŒæ­¥ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;protected static MethodHandle makeFallBack(MutableCallSite mc, Class&amp;lt;?&amp;gt; sender, String name, int callID, MethodType type, boolean safeNavigation, boolean thisCall, boolean spreadCall) {
    MethodHandle mh = MethodHandles.insertArguments(SELECT_METHOD, 0, mc, sender, name, callID, safeNavigation, thisCall, spreadCall, /*dummy receiver:*/ 1); //MethodHandle(Object.class,Object[].class)
    mh =    mh.asCollector(Object[].class, type.parameterCount()).
            asType(type);
    return mh;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ª fallback æ–¹æ³•å…¶å®å°±æ˜¯ &lt;code&gt;selectMethod&lt;/code&gt;ã€‚&lt;code&gt;insertArguments&lt;/code&gt; åœ¨è¿™é‡Œä¸»è¦åšäº†ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„æ“ä½œï¼Œå› ä¸º&lt;code&gt;selectMethod&lt;/code&gt; çš„æ–¹æ³•ç­¾åæ˜¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;methodType(Object.class, MutableCallSite.class, Class.class, String.class, int.class, Boolean.class, Boolean.class, Boolean.class, Object.class, Object[].class)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è€Œ inDy è¦æ±‚çš„æ–¹æ³•ç­¾åå´æ˜¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;methodType(Object.class,Test.class)ã€‚
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥å¾—ç»è¿‡ &lt;code&gt;insertArguments&lt;/code&gt; çš„å˜æ¢ï¼ŒæŠŠç¡®å®šçš„å€¼å¡«å……è¿›å»ï¼Œç”¨æœ€åçš„æ•°ç»„å‚æ•°æ¥æ¥æ”¶ inDy ä¼ é€’çš„å‚æ•°ã€‚è¿™æ ·è¿™ä¸ªæ–¹æ³•å°±èƒ½å¤Ÿè¢« inDy è°ƒç”¨äº†ã€‚ç¬¬ä¸€æ­¥åˆ›å»º CallSite åˆ°è¿™é‡Œå°±ç»“æŸã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼Œå°±æ˜¯ selectMethod æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™æ—¶å€™ groovy å·²ç»çŸ¥é“æ–¹æ³•çš„æ¥æ”¶è€… &lt;code&gt;arguments[0]&lt;/code&gt;ï¼Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public static Object selectMethod(MutableCallSite callSite, Class sender, String methodName, int callID, Boolean safeNavigation, Boolean thisCall, Boolean spreadCall, Object dummyReceiver, Object[] arguments) throws Throwable {
    Selector selector = Selector.getSelector(callSite, sender, methodName, callID, safeNavigation, thisCall, spreadCall, arguments); 
    selector.setCallSiteTarget();

    MethodHandle call = selector.handle.asSpreader(Object[].class, arguments.length);
    call = call.asType(MethodType.methodType(Object.class,Object[].class));
    return call.invokeExact(arguments);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–¹æ³•è§£æå™¨ï¼Œåœ¨è¿™é‡Œæ˜¯ &lt;code&gt;MethodSelector&lt;/code&gt;ã€‚æ¥ç€è°ƒç”¨ &lt;code&gt;setCallSiteTarget()&lt;/code&gt;ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥è§£æå®é™…çš„æ–¹æ³•ã€‚å…·ä½“çš„è¿‡ç¨‹è¿˜æ˜¯å¾ˆå¤æ‚çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æ³•è¯´æ¸…æ¥šï¼Œå¤§ä½“æ¥è¯´å°±æ˜¯ç¡®å®šæ¥æ”¶è€…çš„ &lt;code&gt;MetaClass&lt;/code&gt;ï¼Œå†³å®šè¿™ä¸ªæ–¹æ³•æ˜¯å®é™…çš„æ–¹æ³•ï¼Œè¿˜æ˜¯äº¤ç»™ &lt;code&gt;MetaClass&lt;/code&gt; çš„é’©å­æ–¹æ³•ï¼Œç„¶åå°±æ˜¯åˆ›å»ºè¿™ä¸ªæ–¹æ³•çš„ MethodHandleï¼Œç„¶åæŠŠè¿™ä¸ª MethodHandle çš„ç­¾åè½¬åŒ–ä¸ºè¦æ±‚çš„ç­¾åã€‚è¿™æ—¶ selecor.handle å°±æ˜¯æœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•å¥æŸ„äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æœ€ç»ˆçš„æ–¹æ³•è°ƒç”¨äº†ï¼Œåˆ°è¿™é‡Œ inDy æŒ‡ä»¤å°±æ‰§è¡Œå®Œæ¯•äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å€¼å¾—ç•™æ„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public void doCallSiteTargetSet() {
    if (!cache) {
        if (LOG_ENABLED) LOG.info(&quot;call site stays uncached&quot;);
    } else {
        callSite.setTarget(handle);
        if (LOG_ENABLED) LOG.info(&quot;call site target set, preparing outside invocation&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç”¨ &lt;code&gt;MutableCallSite&lt;/code&gt; çš„åŸå› ï¼Œå¦‚æœç¼–è¯‘å™¨è®¤ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯å¯ä»¥ç¼“å­˜ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ª CallSite ç»‘å®šåˆ°å®é™…çš„ MethodHandleï¼Œåç»­çš„è°ƒç”¨å°±ä¸ç”¨å†é‡æ–°è§£æäº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æœ€å&quot;&gt;æœ€å&lt;/h3&gt;

&lt;p&gt;æ²¡æœ‰ç›¸å…³ç»éªŒï¼ŒinDy è¿˜æ˜¯å¾ˆä¸å¥½ç†è§£çš„ï¼Œå­¦ä¹ äº† java 8 å’Œ groovy å¯¹ inDy çš„åº”ç”¨æ‰æœ‰ä¸€ç‚¹å¤§è‡´çš„è®¤è¯†ï¼Œæ–‡ä¸­å¦‚æœæœ‰ä»€ä¹ˆé”™è¯¯ï¼Œè¿˜è¯·å¸®å¿™æŒ‡å‡ºã€‚&lt;/p&gt;</content><author><name></name></author><category term="coder" /><category term="JVM" /><category term="groovy" /><category term="java" /><category term="lambda" /><category term="invokedynamic" /><summary type="html">inDyï¼ˆinvokedynamicï¼‰æ˜¯ java 7 å¼•å…¥çš„ä¸€æ¡æ–°çš„è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œè¿™æ˜¯è‡ª 1.0 ä»¥æ¥ç¬¬ä¸€æ¬¡å¼•å…¥æ–°çš„è™šæ‹ŸæœºæŒ‡ä»¤ã€‚åˆ°äº† java 8 è¿™æ¡æŒ‡ä»¤æ‰ç¬¬ä¸€æ¬¡åœ¨ java åº”ç”¨ï¼Œç”¨åœ¨ lambda è¡¨è¾¾å¼ä¸­ã€‚ indy ä¸å…¶ä»– invoke æŒ‡ä»¤ä¸åŒçš„æ˜¯å®ƒå…è®¸ç”±åº”ç”¨çº§çš„ä»£ç æ¥å†³å®šæ–¹æ³•è§£æã€‚æ‰€è°“åº”ç”¨çº§çš„ä»£ç å…¶å®æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œè¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸ºå¼•å¯¼æ–¹æ³•ï¼ˆBootstrap Methodï¼‰ï¼Œç®€ç§° BSMã€‚BSM è¿”å›ä¸€ä¸ª CallSiteï¼ˆè°ƒç”¨ç‚¹ï¼‰ å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±å’Œ inDy é“¾æ¥åœ¨ä¸€èµ·äº†ã€‚ä»¥åå†æ‰§è¡Œè¿™æ¡ inDy æŒ‡ä»¤éƒ½ä¸ä¼šåˆ›å»ºæ–°çš„ CallSite å¯¹è±¡ã€‚CallSite å°±æ˜¯ä¸€ä¸ª MethodHandleï¼ˆæ–¹æ³•å¥æŸ„ï¼‰çš„ holderã€‚æ–¹æ³•å¥æŸ„æŒ‡å‘ä¸€ä¸ªè°ƒç”¨ç‚¹çœŸæ­£æ‰§è¡Œçš„æ–¹æ³•ã€‚ ç†è§£ MethodHandleï¼ˆæ–¹æ³•å¥æŸ„ï¼‰çš„ä¸€ç§æ–¹å¼å°±æ˜¯å°†å…¶è§†ä¸ºä»¥å®‰å…¨ã€ç°ä»£çš„æ–¹å¼æ¥å®ç°åå°„çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ ä¸€ä¸ª java æ–¹æ³•çš„å®ä½“æœ‰å››ä¸ªæ„æˆï¼š æ–¹æ³•å ç­¾åâ€“å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ å®šä¹‰æ–¹æ³•çš„ç±» æ–¹æ³•ä½“ï¼ˆä»£ç ï¼‰ åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒï¼Œç­¾åä¸åŒï¼ŒJVM ä¼šè§†ä¸ºä¸åŒçš„æ–¹æ³•ï¼Œä¸è¿‡åœ¨ Java ä¸­åªæ”¯æŒç­¾åçš„å‚æ•°åˆ—è¡¨éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯é‡è½½å¤šæ€ã€‚ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼Œé™¤äº†è¦æ–¹æ³•çš„å®ä½“å¤–ï¼Œè¿˜è¦è°ƒç”¨è€…ï¼ˆcallerï¼‰å’Œæ¥æ”¶è€…ï¼ˆreceiverï¼‰ï¼Œè°ƒç”¨è€…ä¹Ÿå°±æ˜¯æ–¹æ³•è°ƒç”¨è¯­å¥æ‰€åœ¨çš„ç±»ã€‚æ¥æ”¶è€…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªæ–¹æ³•è°ƒç”¨éƒ½è¦ä¸€ä¸ªæ¥æ”¶è€…ï¼Œå®ƒå¯ä»¥æ˜¯éšè—çš„ï¼ˆthisï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç±»æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š String.valueOfï¼Œç±»ä¹Ÿæ˜¯ Class çš„ä¸€ä¸ªå®ä¾‹ã€‚ MethodType è¡¨ç¤ºæ–¹æ³•ç­¾åã€‚ ç”¨ MethodHandle å®ç°çš„æ–¹æ³•è°ƒç”¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ–¹æ³•çš„å››ä¸ªæ„æˆï¼š Object rcvr = &quot;a&quot;; try { MethodType mt = MethodType.methodType(int.class); // æ–¹æ³•ç­¾å MethodHandles.Lookup l = MethodHandles.lookup(); // è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç±»ã€‚è°ƒç”¨è€…å†³å®šæœ‰æ²¡æœ‰æƒé™èƒ½è®¿é—®åˆ°æ–¹æ³• MethodHandle mh = l.findVirtual(rcvr.getClass(), &quot;hashCode&quot;, mt); //åˆ†åˆ«æ˜¯å®šä¹‰æ–¹æ³•çš„ç±»ï¼Œæ–¹æ³•åï¼Œç­¾å int ret; try { ret = (int)mh.invoke(rcvr); // ä»£ç ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ¥æ”¶è€… System.out.println(ret); } catch (Throwable t) { t.printStackTrace(); } } catch (IllegalArgumentException | NoSuchMethodException | SecurityException e) { e.printStackTrace(); } catch (IllegalAccessException x) { x.printStackTrace(); } è¯¦ç»†å¯å‚è€ƒï¼š Invokedynamic - Javaâ€™s Secret Weapon å’Œè¯‘æ–‡ Invokedynamicï¼šJavaçš„ç§˜å¯†æ­¦å™¨ - çŸ¥ä¹ä¸“æ  java8 lambda è¡¨è¾¾å¼ lambda è¡¨è¾¾å¼ æ˜¯æ€ä¹ˆä½¿ç”¨ inDy å‘¢ï¼Ÿä»¥ä¸€æ®µç®€å•çš„ä»£ç ä¸ºä¾‹ public class LambdaTest { public static void main(String[] args) { Runnable r = () -&amp;gt; System.out.println(Arrays.toString(args)); r.run(); } } ç”¨ javap -v -p LambdaTest æŸ¥çœ‹å­—èŠ‚ç ï¼Œå¯ä»¥å‘ç°å¯¥å¯¥å‡ è¡Œ java ä»£ç ç”Ÿæˆçš„å­—èŠ‚ç å´ä¸å°‘ï¼Œå•å•å¸¸é‡æ± å¸¸é‡å°±æœ‰ 66 ä¸ªä¹‹å¤šã€‚è¾“å‡ºè§ LambdaTest.classã€‚ å¯ä»¥å‘ç°å¤šå‡ºäº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œæ–¹æ³•ä½“å°±æ˜¯ lambda ä½“ï¼ˆlambda bodyï¼‰ï¼Œè½¬æ¢ä¸ºæºç å¦‚ä¸‹ï¼š private static void lambda$main$0(java.lang.String[] args){ System.out.println(Arrays.toString(args)); } ä¸»è¦çœ‹ä¸€ä¸‹ main æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œè€Œæ˜¯å‡ºç°ä¸€æ¡ inDy æŒ‡ä»¤ï¼š public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=1, locals=2, args_size=1 0: aload_0 1: invokedynamic #2, 0 // InvokeDynamic #0:run:([Ljava/lang/String;)Ljava/lang/Runnable; 6: astore_1 7: aload_1 8: invokeinterface #3, 1 // InterfaceMethod java/lang/Runnable.run:()V 13: return å¯ä»¥çœ‹åˆ° inDy æŒ‡å‘ä¸€ä¸ªç±»å‹ä¸º [CONSTANT_InvokeDynamic_info][] çš„å¸¸é‡é¡¹ #2ï¼Œå¦å¤– 0 æ˜¯é¢„ç•™å‚æ•°ï¼Œæš‚æ—¶æ²¡æœ‰ä½œç”¨ã€‚ #2 = InvokeDynamic #0:#30 // #0:run:([Ljava/lang/String;)Ljava/lang/Runnable; #0 è¡¨ç¤ºåœ¨ Bootstrap methods è¡¨ä¸­çš„ç´¢å¼•ï¼š BootstrapMethods: 0: #27 invokestatic java/lang/invoke/LambdaMetafactory.metafactory:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite; Method arguments: #28 ()V #29 invokestatic com/company/LambdaTest.lambda$main$0:([Ljava/lang/String;)V #28 ()V #30 åˆ™æ˜¯ä¸€ä¸ª [CONSTANT_NameAndType_info][]ï¼Œè¡¨ç¤ºæ–¹æ³•åå’Œæ–¹æ³•ç±»å‹ï¼ˆè¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨ï¼‰ï¼Œè¿™ä¸ªä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ BSMã€‚ #30 = NameAndType #43:#44 // run:([Ljava/lang/String;)Ljava/lang/Runnable; å†çœ‹å›è¡¨ä¸­çš„ç¬¬ 0 é¡¹ï¼Œ#27 æ˜¯ä¸€ä¸ª [CONSTANT_MethodHandle_info][]ï¼Œå®é™…ä¸Šæ˜¯ä¸ª MethodHandleï¼ˆæ–¹æ³•å¥æŸ„ï¼‰å¯¹è±¡ï¼Œè¿™ä¸ªå¥æŸ„æŒ‡å‘çš„å°±æ˜¯ BSM æ–¹æ³•ã€‚åœ¨è¿™é‡Œå°±æ˜¯: java.lang.invoke.LambdaMetafactory.metafactory(MethodHandles.Lookup,String,MethodType,MethodType,MethodHandle,MethodType) BSM å‰ä¸‰ä¸ªå‚æ•°æ˜¯å›ºå®šçš„ï¼Œåé¢è¿˜å¯ä»¥é™„åŠ ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†æ˜¯å‚æ•°çš„ç±»å‹æ˜¯æœ‰é™åˆ¶çš„ï¼Œå‚æ•°ç±»å‹åªèƒ½æ˜¯ String Class int long float double MethodHandle MethodType LambdaMetafactory.metafactory å¸¦å¤šä¸‰ä¸ªå‚æ•°ï¼Œè¿™äº›çš„å‚æ•°çš„å€¼ç”± Bootstrap methods è¡¨ æä¾›ï¼š Method arguments: #25 ()V #26 invokestatic com/company/LambdaTest.lambda$main$0:()V #25 ()V inDy æ‰€éœ€è¦çš„æ•°æ®å¤§æ¦‚å°±æ˜¯è¿™äº›ï¼Œå¯å‚è€ƒ Java8å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ â€“ InvokeDynamicæŒ‡ä»¤ - CSDNåšå®¢ inDy è¿è¡Œæ—¶ æ¯ä¸€ä¸ª inDy æŒ‡ä»¤éƒ½ç§°ä¸º Dynamic Call Site(åŠ¨æ€è°ƒç”¨ç‚¹)ï¼Œæ ¹æ® jvm è§„èŒƒæ‰€è¯´çš„ï¼ŒinDy å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼Œè¿™ä¸¤æ­¥éƒ¨åˆ†ä»£ç ä»£ç æ˜¯åœ¨ java å±‚çš„ï¼Œç»™ metafactory æ–¹æ³•è®¾æ–­ç‚¹å¯ä»¥çœ‹åˆ°ä¸€äº›è¡Œä¸ºã€‚ ç¬¬ä¸€æ­¥ inDy éœ€è¦ä¸€ä¸ª CallSiteï¼ˆè°ƒç”¨ç‚¹å¯¹è±¡ï¼‰ï¼ŒCallSite æ˜¯ç”± BSM è¿”å›çš„ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å°±æ˜¯è°ƒç”¨ BSM æ–¹æ³•ã€‚ä»£ç å¯å‚è€ƒï¼šjava.lang.invoke.CallSite#makeSite è°ƒç”¨ BSM æ–¹æ³•å¯ä»¥çœ‹ä½œ invokevirtual æŒ‡ä»¤æ‰§è¡Œä¸€ä¸ª invoke æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š invoke:(MethodHandle,Lookup,String,MethodType,/*å…¶ä»–é™„åŠ é™æ€å‚æ•°*/)CallSite å‰å››ä¸ªå‚æ•°æ˜¯å›ºå®šçš„ï¼Œè¢«ä¾æ¬¡å‹å…¥æ“ä½œæ ˆé‡Œ MethodHandleï¼Œå®é™…ä¸Šè¿™ä¸ªæ–¹æ³•å¥æŸ„å°±æ˜¯æŒ‡å‘ BSM Lookup, ä¹Ÿå°±æ˜¯è°ƒç”¨è€…ï¼Œæ˜¯ Indy æŒ‡ä»¤æ‰€åœ¨çš„ç±»çš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥é€šè¿‡ Lookup#lookupClass()è·å–è¿™ä¸ªç±» name ï¼Œlambda æ‰€å®ç°çš„æ–¹æ³•åï¼Œä¹Ÿå°±æ˜¯&quot;run&quot; invokedTypeï¼Œè°ƒç”¨ç‚¹çš„æ–¹æ³•ç­¾åï¼Œè¿™é‡Œæ˜¯ methodType(Runnable.class,String[].class) æ¥ä¸‹æ¥å°±æ˜¯é™„åŠ å‚æ•°ï¼Œè¿™äº›å‚æ•°æ˜¯çµæ´»çš„ï¼Œç”±Bootstrap methods è¡¨æä¾›ï¼Œè¿™é‡Œåˆ†åˆ«æ˜¯ï¼š samMethodTypeï¼Œå…¶å®å°±æ˜¯ Runnable.run çš„æè¿°ç¬¦: methodType(void.class)ã€‚sam å°± single public abstract method çš„ç¼©å†™ implMethod: ç¼–è¯‘å™¨ç»™ç”Ÿæˆçš„ desugar æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ª MethodHandleï¼šcaller.findStatic(LambdaTest.class,&quot;lambda$main$0&quot;,methodType(void.class)) instantiatedMethodType: Runnable.run è¿è¡Œæ—¶çš„æè¿°ç¬¦ï¼Œå¦‚æœæ–¹æ³•æ³›å‹çš„ï¼Œé‚£è¿™ä¸ªç±»å‹å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™é‡Œæ˜¯ methodType(void.class) ä¸Šé¢è¯´çš„å›ºå®šå…¶å®åº”è¯¥æ˜¯æŒ‡ inDy ä¼ é€’çš„å®å‚ç±»å‹æ˜¯å›ºå®šçš„ï¼ŒBSM å½¢å‚å£°æ˜å¯ä»¥æ˜¯éšæ„ï¼Œä¿è¯ BSM èƒ½è¢«è°ƒç”¨å°±è¡Œï¼Œæ¯”å¦‚è¯´ Lookup å£°æ˜ä¸º Object ä¸å½±å“è°ƒç”¨ã€‚ æ¥ä¸‹æ¥å°±æ˜¯æ‰§è¡Œ LambdaMetafactory.metafactory æ–¹æ³•äº†ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åç±»ï¼Œè¿™ä¸ªç±»æ˜¯é€šè¿‡ ASM ç¼–ç»‡å­—èŠ‚ç åœ¨å†…å­˜ä¸­ç”Ÿæˆçš„ï¼Œç„¶åç›´æ¥é€šè¿‡ unsafe ç›´æ¥åŠ è½½è€Œä¸ä¼šå†™åˆ°æ–‡ä»¶é‡Œã€‚ä¸è¿‡å¯ä»¥é€šè¿‡ä¸‹é¢çš„è™šæ‹Ÿæœºå‚æ•°è®©å®ƒè¿è¡Œçš„æ—¶å€™è¾“å‡ºåˆ°æ–‡ä»¶ -Djdk.internal.lambda.dumpProxyClasses=&amp;lt;path&amp;gt; è¿™ä¸ªç±»æ˜¯æ ¹æ® lambda çš„ç‰¹ç‚¹ç”Ÿæˆçš„ï¼Œè¾“å‡ºåå¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯è¿™æ ·çš„ï¼š import java.lang.invoke.LambdaForm.Hidden; // $FF: synthetic class final class LambdaTest$$Lambda$1 implements Runnable { private final String[] arg$1; private LambdaTest$$Lambda$1(String[] var1) { this.arg$1 = var1; } private static Runnable get$Lambda(String[] var0) { return new LambdaTest$$Lambda$1(var0); } @Hidden public void run() { LambdaTest.lambda$main$0(this.arg$1); } } ç„¶åå°±æ˜¯åˆ›å»ºä¸€ä¸ª CallSiteï¼Œç»‘å®šä¸€ä¸ª MethodHandleï¼ŒæŒ‡å‘çš„æ–¹æ³•å…¶å®å°±æ˜¯ç”Ÿæˆçš„ç±»ä¸­çš„é™æ€æ–¹æ³• LambdaTest$$Lambda$1.get$Lambda(String[])Runnableã€‚ç„¶åæŠŠè°ƒç”¨ç‚¹å¯¹è±¡è¿”å›ï¼Œåˆ°è¿™é‡Œ BSM æ–¹æ³•æ‰§è¡Œå®Œæ¯•ã€‚ æ›´è¯¦ç»†çš„å¯å‚è€ƒï¼š æµ…è°ˆLambda Expression - ç®€ä¹¦ [Java] å…³äºOpenJDKå¯¹Java 8 lambdaè¡¨è¾¾å¼çš„è¿è¡Œæ—¶å®ç°çš„æŸ¥çœ‹æ–¹å¼ - çŸ¥ä¹ä¸“æ  ç¬¬äºŒæ­¥ï¼Œå°±æ˜¯æ‰§è¡Œè¿™ä¸ªæ–¹æ³•å¥æŸ„äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒ invokevirtual æŒ‡ä»¤æ‰§è¡Œ MethodHandle#invokeExact ä¸€æ ·ï¼Œ åŠ ä¸Š inDy ä¸Šé¢é‚£ä¸€æ¡ aload_0 æŒ‡ä»¤ï¼Œè¿™æ˜¯æ“ä½œæ•°æ ˆæœ‰ä¸¤ä¸ªåˆ†åˆ«æ˜¯ï¼š args[]ï¼Œlambda é‡Œé¢è°ƒç”¨äº† main æ–¹æ³•çš„å‚æ•° è°ƒç”¨ç‚¹å¯¹è±¡ï¼ˆCallSiteï¼‰ï¼Œå®é™…ä¸Šæ˜¯æ–¹æ³•å¥æŸ„ã€‚å¦‚æœæ˜¯ CostantCallSite çš„æ—¶å€™ï¼ŒinDy ä¼šç›´æ¥è·Ÿä»–çš„æ–¹æ³•å¥æŸ„é“¾æ¥ã€‚è§ä»£ç ï¼šMethodHandleNatives.java#L255 ä¼ å…¥ argsï¼Œæ‰§è¡Œæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª Runnable å¯¹è±¡ï¼Œå‹å…¥æ ˆé¡¶ã€‚åˆ°è¿™é‡Œ inDy å°±æ‰§è¡Œå®Œæ¯•ã€‚ æ¥ä¸‹æ¥çš„æŒ‡ä»¤å°±å¾ˆå¥½ç†è§£ï¼Œastore_1 æŠŠæ ˆé¡¶çš„ Runnable å¯¹è±¡æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨çš„æ§½ä½1ï¼Œä¹Ÿæ˜¯å˜é‡ rã€‚å‰©ä¸‹çš„å°±æ˜¯å†æ‹¿å‡ºæ¥è°ƒç”¨ run æ–¹æ³•ã€‚ Groovy æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ groovy æ˜¯å¦‚ä½•ä½¿ç”¨ inDy æŒ‡ä»¤çš„ã€‚å…ˆå¤ä¹ ä¸€é groovy çš„æ–¹æ³•æ´¾å‘ã€‚ æ¯å½“ Groovy è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¸ä¼šç›´æ¥è°ƒç”¨å®ƒï¼Œè€Œæ˜¯è¦æ±‚ä¸€ä¸ªä¸­é—´å±‚æ¥ä»£æ›¿å®ƒã€‚ ä¸­é—´å±‚é€šè¿‡é’©å­æ–¹æ³•å…è®¸æˆ‘ä»¬æ›´æ”¹æ–¹æ³•è°ƒç”¨çš„è¡Œä¸ºã€‚è¿™ä¸ªä¸­é—´å±‚å°±æ˜¯ MOPï¼ˆmeta object proctolï¼‰ï¼ŒMOP ä¸»è¦æ‰¿è½½çš„ç±»å°±æ˜¯ MetaClass ã€‚ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ MOP ä¸»è¦æœ‰è¿™äº›æ–¹æ³•ï¼š invokeMethod(String methodName, Object args) methodMissing(String name, Object arguments) getProperty(String propertyName) setProperty(String propertyName, Object newValue) propertyMissing(String name) å¯ä»¥å¤§è‡´è®¤ä¸ºåœ¨ Groovy ä¸­çš„æ¯ä¸ªæ–¹æ³•å’Œå±æ€§è®¿é—®è°ƒç”¨éƒ½ä¼šè½¬åŒ–ä¸Šé¢çš„æ–¹æ³•è°ƒç”¨ã€‚è€Œè¿™äº›æ–¹æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡é‡å†™ä¿®æ”¹å®ƒçš„é»˜è®¤è¡Œä¸ºï¼ŒMOP ä½œä¸ºæ–¹æ³•æ´¾å‘çš„ä¸­å¿ƒæ¢çº½ä¸º Groovy æä¾›äº†éå¸¸çµæ´»çš„åŠ¨æ€ç¼–ç¨‹çš„èƒ½åŠ›ã€‚ ç°åœ¨æ¥çœ‹ä¸€ä¸‹ä¸€æ®µç®€çŸ­çš„ groovy ä»£ç ï¼Œ class Test{ int a = 0; static void main(args){ Test wtf = new Test() wtf.a wtf.doSomething() } } é€šè¿‡ groovyc -indy Test.groovy æŠŠå®ƒç¼–è¯‘æˆå­—èŠ‚ç ã€‚ indy é€‰é¡¹çš„æ„æ€å°±æ˜¯å¯ç”¨ invokedynamic æ”¯æŒã€‚ çœ‹ä¸€ä¸‹ç¼–è¯‘åçš„ main æ–¹æ³•ã€‚ public static void main(java.lang.String...); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS Code: stack=1, locals=2, args_size=1 0: ldc #2 // class Test 2: invokedynamic #44, 0 // InvokeDynamic #0:init:(Ljava/lang/Class;)Ljava/lang/Object; 7: invokedynamic #50, 0 // InvokeDynamic #1:cast:(Ljava/lang/Object;)LTest; 12: astore_1 13: aload_1 14: pop 15: aload_1 16: invokedynamic #56, 0 // InvokeDynamic #2:getProperty:(LTest;)Ljava/lang/Object; 21: pop 22: aload_1 23: invokedynamic #61, 0 // InvokeDynamic #3:invoke:(LTest;)Ljava/lang/Object; 28: pop 29: return å¯ä»¥çœ‹åˆ°ä¸€å…±æœ‰ 4 æ¡ inDy æŒ‡ä»¤ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°ï¼Œè®¿é—®æˆå‘˜å˜é‡ï¼Œå’Œä¸å­˜åœ¨çš„æ–¹æ³•è°ƒç”¨éƒ½æ˜¯ é€šè¿‡ invokedynamic å®ç°çš„ã€‚ å†çœ‹ä¸€ä¸‹å¼•å¯¼æ–¹æ³•è¡¨ BootstrapMethods: 0: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite; Method arguments: #39 &amp;lt;init&amp;gt; #40 0 1: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite; Method arguments: #46 () #40 0 2: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite; Method arguments: #51 a #52 4 3: #38 invokestatic org/codehaus/groovy/vmplugin/v7/IndyInterface.bootstrap:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;I)Ljava/lang/invoke/CallSite; Method arguments: #58 doSomething #40 0 å¯ä»¥å‘ç°æ‰€æœ‰ inDy æŒ‡ä»¤çš„å¼•å¯¼æ–¹æ³•éƒ½æ˜¯ IndyInterface.bootstrap ä»¥æ–¹æ³•è°ƒç”¨çš„ inDy æŒ‡ä»¤ä¸ºä¾‹ï¼Œå®ƒçš„æ–¹æ³•åç§°æ˜¯ â€œinvokeâ€ï¼Œæ–¹æ³•ç­¾åæ˜¯ methodType(Object.class,Test.class)ï¼ŒBSM æ–¹æ³•è¿˜é™„å¸¦ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å®é™…çš„æ–¹æ³•åï¼š&quot;doSomething&quot; å’Œä¸€ä¸ªæ ‡å¿—ï¼š0 BSM æ–¹æ³•æœ€ç»ˆè°ƒç”¨çš„æ˜¯ realBootstrap æ–¹æ³•ï¼š private static CallSite realBootstrap(Lookup caller, String name, int callID, MethodType type, boolean safe, boolean thisCall, boolean spreadCall) { MutableCallSite mc = new MutableCallSite(type); //è¿™é‡Œæ˜¯ MutableCallSiteï¼Œlambda è¡¨è¾¾å¼ç”¨çš„æ˜¯ ConstantCallSite MethodHandle mh = makeFallBack(mc,caller.lookupClass(),name,callID,type,safe,thisCall,spreadCall); mc.setTarget(mh); return mc; } ä¸»è¦çš„ä»£ç æ˜¯è°ƒç”¨ makeFallBack æ¥è·å–ä¸€ä¸ªä¸´æ—¶çš„ MethodHandleã€‚å› ä¸ºåœ¨ç¬¬ä¸€æ­¥ groovy æ— æ³•ç¡®å®šæ¥æ”¶è€…ï¼ˆreceiverï¼‰ï¼Œä¹Ÿæ˜¯å°±æ˜¯ invoke æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå®å‚ï¼ˆTest å®ä¾‹ï¼‰ï¼Œå¿…é¡»è¦åœ¨ç¬¬äºŒæ­¥ç¡®å®š CallSite åæ‰ä¼šä¼ é€’è¿‡æ¥ã€‚æ‰€ä»¥æ–¹æ³•è§£æè¦æ”¾åœ¨ç¬¬äºŒæ­¥ã€‚ protected static MethodHandle makeFallBack(MutableCallSite mc, Class&amp;lt;?&amp;gt; sender, String name, int callID, MethodType type, boolean safeNavigation, boolean thisCall, boolean spreadCall) { MethodHandle mh = MethodHandles.insertArguments(SELECT_METHOD, 0, mc, sender, name, callID, safeNavigation, thisCall, spreadCall, /*dummy receiver:*/ 1); //MethodHandle(Object.class,Object[].class) mh = mh.asCollector(Object[].class, type.parameterCount()). asType(type); return mh; } è¿™ä¸ª fallback æ–¹æ³•å…¶å®å°±æ˜¯ selectMethodã€‚insertArguments åœ¨è¿™é‡Œä¸»è¦åšäº†ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„æ“ä½œï¼Œå› ä¸ºselectMethod çš„æ–¹æ³•ç­¾åæ˜¯ methodType(Object.class, MutableCallSite.class, Class.class, String.class, int.class, Boolean.class, Boolean.class, Boolean.class, Object.class, Object[].class) è€Œ inDy è¦æ±‚çš„æ–¹æ³•ç­¾åå´æ˜¯ methodType(Object.class,Test.class)ã€‚ æ‰€ä»¥å¾—ç»è¿‡ insertArguments çš„å˜æ¢ï¼ŒæŠŠç¡®å®šçš„å€¼å¡«å……è¿›å»ï¼Œç”¨æœ€åçš„æ•°ç»„å‚æ•°æ¥æ¥æ”¶ inDy ä¼ é€’çš„å‚æ•°ã€‚è¿™æ ·è¿™ä¸ªæ–¹æ³•å°±èƒ½å¤Ÿè¢« inDy è°ƒç”¨äº†ã€‚ç¬¬ä¸€æ­¥åˆ›å»º CallSite åˆ°è¿™é‡Œå°±ç»“æŸã€‚ ç¬¬äºŒæ­¥ï¼Œå°±æ˜¯ selectMethod æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™æ—¶å€™ groovy å·²ç»çŸ¥é“æ–¹æ³•çš„æ¥æ”¶è€… arguments[0]ï¼Œ public static Object selectMethod(MutableCallSite callSite, Class sender, String methodName, int callID, Boolean safeNavigation, Boolean thisCall, Boolean spreadCall, Object dummyReceiver, Object[] arguments) throws Throwable { Selector selector = Selector.getSelector(callSite, sender, methodName, callID, safeNavigation, thisCall, spreadCall, arguments); selector.setCallSiteTarget(); MethodHandle call = selector.handle.asSpreader(Object[].class, arguments.length); call = call.asType(MethodType.methodType(Object.class,Object[].class)); return call.invokeExact(arguments); } é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–¹æ³•è§£æå™¨ï¼Œåœ¨è¿™é‡Œæ˜¯ MethodSelectorã€‚æ¥ç€è°ƒç”¨ setCallSiteTarget()ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥è§£æå®é™…çš„æ–¹æ³•ã€‚å…·ä½“çš„è¿‡ç¨‹è¿˜æ˜¯å¾ˆå¤æ‚çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æ³•è¯´æ¸…æ¥šï¼Œå¤§ä½“æ¥è¯´å°±æ˜¯ç¡®å®šæ¥æ”¶è€…çš„ MetaClassï¼Œå†³å®šè¿™ä¸ªæ–¹æ³•æ˜¯å®é™…çš„æ–¹æ³•ï¼Œè¿˜æ˜¯äº¤ç»™ MetaClass çš„é’©å­æ–¹æ³•ï¼Œç„¶åå°±æ˜¯åˆ›å»ºè¿™ä¸ªæ–¹æ³•çš„ MethodHandleï¼Œç„¶åæŠŠè¿™ä¸ª MethodHandle çš„ç­¾åè½¬åŒ–ä¸ºè¦æ±‚çš„ç­¾åã€‚è¿™æ—¶ selecor.handle å°±æ˜¯æœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•å¥æŸ„äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æœ€ç»ˆçš„æ–¹æ³•è°ƒç”¨äº†ï¼Œåˆ°è¿™é‡Œ inDy æŒ‡ä»¤å°±æ‰§è¡Œå®Œæ¯•äº†ã€‚ è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å€¼å¾—ç•™æ„ï¼š public void doCallSiteTargetSet() { if (!cache) { if (LOG_ENABLED) LOG.info(&quot;call site stays uncached&quot;); } else { callSite.setTarget(handle); if (LOG_ENABLED) LOG.info(&quot;call site target set, preparing outside invocation&quot;); } } è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç”¨ MutableCallSite çš„åŸå› ï¼Œå¦‚æœç¼–è¯‘å™¨è®¤ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯å¯ä»¥ç¼“å­˜ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ª CallSite ç»‘å®šåˆ°å®é™…çš„ MethodHandleï¼Œåç»­çš„è°ƒç”¨å°±ä¸ç”¨å†é‡æ–°è§£æäº†ã€‚ æœ€å æ²¡æœ‰ç›¸å…³ç»éªŒï¼ŒinDy è¿˜æ˜¯å¾ˆä¸å¥½ç†è§£çš„ï¼Œå­¦ä¹ äº† java 8 å’Œ groovy å¯¹ inDy çš„åº”ç”¨æ‰æœ‰ä¸€ç‚¹å¤§è‡´çš„è®¤è¯†ï¼Œæ–‡ä¸­å¦‚æœæœ‰ä»€ä¹ˆé”™è¯¯ï¼Œè¿˜è¯·å¸®å¿™æŒ‡å‡ºã€‚</summary></entry><entry><title type="html">Android Architecture Component â€“ Lifecycle æµ…æ</title><link href="http://dourok.info/2017/05/23/lifecycle/" rel="alternate" type="text/html" title="Android Architecture Component â€“ Lifecycle æµ…æ" /><published>2017-05-23T00:00:00+00:00</published><updated>2017-11-30T15:56:47+00:00</updated><id>http://dourok.info/2017/05/23/lifecycle</id><content type="html" xml:base="http://dourok.info/2017/05/23/lifecycle/">&lt;h3 id=&quot;lifecycle&quot;&gt;Lifecycle&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/lifecycle.html&quot;&gt;Lifecycle&lt;/a&gt; æ˜¯ &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/index.html&quot;&gt;Android Architecture Components&lt;/a&gt; çš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºå°†ç³»ç»Ÿç»„ä»¶ï¼ˆActivityã€Fragmentç­‰ç­‰ï¼‰çš„ç”Ÿå‘½å‘¨æœŸåˆ†ç¦»åˆ° &lt;code&gt;Lifecycle&lt;/code&gt; ç±»ï¼Œ&lt;code&gt;Lifecycle&lt;/code&gt; å…è®¸å…¶ä»–ç±»ä½œä¸ºè§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–ã€‚Lifecycle ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸ª &lt;code&gt;LifecycleObserver&lt;/code&gt; å¯¹è±¡ï¼Œç”¨ &lt;code&gt;@OnLifecycleEvent&lt;/code&gt; æ³¨è§£å£°æ˜ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å›è°ƒçš„æ–¹æ³•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class LifecycleObserverDemo implements LifecycleObserver {

    @OnLifecycleEvent(Lifecycle.Event.ON_ANY)
    void onAny(LifecycleOwner owner, Lifecycle.Event event) {
        System.out.println(&quot;onAny:&quot; + event.name());
    }
    @OnLifecycleEvent(Lifecycle.Event.ON_CREATE)
    void onCreate() {
        System.out.println(&quot;onCreate&quot;);
    }

    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)
    void onDestroy() {
        System.out.println(&quot;onDestroy&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶ååœ¨ &lt;code&gt;LifecycleRegistryOwner&lt;/code&gt; æ¯”å¦‚ &lt;code&gt;LifecycleActivity&lt;/code&gt; åŠ å…¥è¿™ä¹ˆä¸€è¡Œä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    getLifecycle().addObserver(new LifecycleObserverDemo());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åï¼Ÿç„¶åå°±æ²¡äº†ï¼Œè¿è¡Œèµ·æ¥å¯ä»¥çœ‹åˆ° &lt;code&gt;LifecycleActivity&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ&lt;code&gt;LifecycleObserverDemo&lt;/code&gt; æ€»èƒ½å¾—åˆ°é€šçŸ¥ã€‚è€Œ &lt;code&gt;LifecycleActivity&lt;/code&gt; åªæœ‰å¯¥å¯¥å‡ è¡Œä»£ç ï¼Œå¹¶æ²¡æœ‰è¦†ç›–ä»»ä½•å›è°ƒæ–¹æ³•ã€‚é‚£ä¹ˆ Lifecycle æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹é»‘é­”æ³•çš„æ„Ÿè§‰ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;æ³¨è§£çš„ä½œç”¨&quot;&gt;æ³¨è§£çš„ä½œç”¨&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆä»æ³¨è§£å…¥æ‰‹ï¼Œå¯ä»¥åœ¨ build ç›®å½•ä¸‹å‘ç°æ³¨è§£å¤„ç†å™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº† &lt;code&gt;LifecycleObserverDemo_LifecycleAdapter&lt;/code&gt;ï¼Œä¸è¿‡è¿™åªæ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼Œç”¨äºå°†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ´¾å‘åˆ° &lt;code&gt;LifecycleObserverDemo&lt;/code&gt; å¯¹åº”çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LifecycleObserverDemo_LifecycleAdapter&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GenericLifecycleObserver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LifecycleObserverDemo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;LifecycleObserverDemo_LifecycleAdapter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LifecycleObserverDemo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;receiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mReceiver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;receiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onStateChanged&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LifecycleOwner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Event&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onAny&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ON_CREATE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ON_START&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ON_PAUSE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ON_DESTROY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onDestroy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å¦‚ä½•ä¼ è¾¾-lifecycle-äº‹ä»¶&quot;&gt;å¦‚ä½•ä¼ è¾¾ lifecycle äº‹ä»¶&lt;/h3&gt;

&lt;p&gt;æ³¨è§£ä¹Ÿæ²¡æœ‰ç”Ÿæˆä»»ä½•ç›¸å…³çš„ä»£ç ï¼Œè€Œ Activity ä¸ç”¨å†™ä»»ä½•ä»£ç ï¼Œé‚£ä¹ˆ Lifecycle æ˜¯å¦‚ä½•æŠŠ Activity ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¼ é€’ç»™ &lt;code&gt;LifecycleObserver&lt;/code&gt;çš„ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆé€šè¿‡ç ”è¯» Lifecycle çš„ä»£ç ï¼Œå‘ç°é‡Œé¢æœ‰ä¸ªåŒ…å¯è§çš„ç±» &lt;code&gt;LifecycleDispatcher&lt;/code&gt;ï¼Œ&lt;code&gt;LifecycleDispatcher&lt;/code&gt; æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œåœ¨ &lt;code&gt;LifecycleDispatcher#init(Context)&lt;/code&gt; ä¸­ï¼Œå®ƒé€šè¿‡ &lt;code&gt;registerActivityLifecycleCallbacks&lt;/code&gt; æ–¹æ³•ï¼Œå‘å½“å‰çš„ Application æ³¨å†Œä¸€ä¸ª &lt;code&gt;DispatcherActivityCallback&lt;/code&gt;ï¼Œä½† Lifecycle å¹¶æ²¡ä½¿ç”¨ &lt;code&gt;ActivityLifecycleCallbacks&lt;/code&gt; æ¥ç›‘å¬å¹¶æ´¾å‘ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;static void init(Context context){
    ...
    ((Application)context.getApplicationContext()).registerActivityLifecycleCallbacks(new LifecycleDispatcher.DispatcherActivityCallback());
    ...
}

static class DispatcherActivityCallback extends EmptyActivityLifecycleCallbacks {
    public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
        ...
        if(manager.findFragmentByTag(&quot;android.arch.lifecycle.LifecycleDispatcher.report_fragment_tag&quot;) == null) {
            manager.beginTransaction().add(new ReportFragment(), &quot;android.arch.lifecycle.LifecycleDispatcher.report_fragment_tag&quot;).commit();
            manager.executePendingTransactions();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è€Œæ˜¯é€šè¿‡ä¸€ä¸ªæ—  UI çš„ Fragmentï¼Œåœ¨ &lt;code&gt;DispatcherActivityCallback#onActivityCreated&lt;/code&gt; å¯ä»¥çœ‹åˆ°å®ƒåœ¨ &lt;code&gt;Activity#onCreate&lt;/code&gt; æ—¶ï¼Œä¸º Activity æ·»åŠ ä¸€ä¸ª &lt;code&gt;ReportFragment&lt;/code&gt;ã€‚æœ€ç»ˆç”± &lt;code&gt;ReportFragment&lt;/code&gt; æ¥ç›‘å¬å„ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œç„¶åä¼ é€’ç»™ &lt;code&gt;LifecycleRegistry&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class ReportFragment extends Fragment {
    ...
    public void onPause() {
        super.onPause();
        dispatch(Event.ON_PAUSE);
    }
    ...
    private void dispatch(Event event) {
        if(this.getActivity() instanceof LifecycleRegistryOwner) {
            ((LifecycleRegistryOwner)this.getActivity()).getLifecycle().handleLifecycleEvent(event);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Activity çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶éƒ½ä¼šæ´¾å‘åˆ°å®ƒçš„ Fragmentsï¼Œå‘ Activity æ³¨å†Œä¸€ä¸ªæ—  UI çš„ Fragment ä¹Ÿå« Headless Fragment ç”¨äºå°†å„ç§ Activity å›è°ƒåˆ†ç¦»å‡ºæ¥æ˜¯ä¸ªå¸¸ç”¨çš„åšæ³•&lt;/em&gt;ï¼Œæ¯”å¦‚ &lt;a href=&quot;https://github.com/tbruyelle/RxPermissions&quot;&gt;RxPermissions&lt;/a&gt; ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹æ³•æ¥é¿å…å¤å†™ &lt;code&gt;Activity#onRequestPermissionsResult&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é¡ºä¾¿ä¸€æ &lt;a href=&quot;https://developer.android.com/reference/android/arch/lifecycle/Lifecycle.html&quot;&gt;Lifecycle æ–‡æ¡£&lt;/a&gt;æåˆ°ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ON_CREATE, ON_START, ON_RESUME events in this class are dispatched &lt;em&gt;after&lt;/em&gt; the LifecycleOwnerâ€™s related method returns. ON_PAUSE, ON_STOP, ON_DESTROY events in this class are dispatched &lt;em&gt;before&lt;/em&gt; the LifecycleOwnerâ€™s related method is called.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ­£å¥½æ˜¯ Fragment ç”Ÿå‘½å‘¨æœŸå›è°ƒçš„è§¦å‘é¡ºåºã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Activity&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ˜¯å¦‚ä½•ä¼ é€’åˆ° &lt;code&gt;LifecycleObserver&lt;/code&gt; æœ‰äº†æ¸…æ™°çš„å›¾è¡¨ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/64766-e57813cb987f6d6c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;ç”Ÿå‘½å‘¨æœŸä¼ é€’åˆ° LifecycleObserver&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;lifecycleruntimetrojanprovider&quot;&gt;LifecycleRuntimeTrojanProvider&lt;/h3&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ &lt;code&gt;LifecycleDispatcher#init(Context)&lt;/code&gt; å¹¶ä¸æ˜¯å…¥å£ï¼Œå®ƒä¹Ÿéœ€è¦è¢«è°ƒç”¨ã€‚é‚£ä¹ˆä»–çš„è°ƒç”¨è€…æ˜¯è°ï¼ŸGoogle è¿™é‡Œçš„åšæ³•è¿˜æ˜¯å¾ˆå·§å¦™çš„ï¼Œå¦‚æœè¿™æ—¶æŠŠ apk çš„ AndroidManifest.xml æå–å‡ºæ¥ï¼Œå°±ä¼šå‘ç°å¤šäº†ä¸€ä¸ª ContentProvider å£°æ˜ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;provider
        android:name=&quot;android.arch.lifecycle.LifecycleRuntimeTrojanProvider&quot;
        android:authorities=&quot;${applicationId}.lifecycle-trojan&quot;
        android:exported=&quot;false&quot;
        android:multiprocess=&quot;true&quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;LifecycleRuntimeTrojanProvider&lt;/code&gt;ï¼Œè¿è¡Œæ—¶æœ¨é©¬æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿå®é™…ä¸Šï¼Œå®ƒä¸æ˜¯ä¸€ä¸ª ContentProviderï¼Œè€Œæ˜¯åˆ©ç”¨ ContentProvider çš„ç‰¹ç‚¹åœ¨åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶ï¼Œå‘å…¶æ³¨å…¥ä¸¤è¡Œä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LifecycleDispatcher.init(getContext());
ProcessLifecycleOwner.init(getContext());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡Œ ContentProvider ä¹‹äº Application çš„ä½œç”¨å°±ç±»ä¼¼äº Headless Fragment ä¹‹äº Activity ä¸€æ ·ï¼Œç›®çš„éƒ½æ˜¯é¿å…ç»§æ‰¿ç³»ç»Ÿç»„ä»¶ã€‚å…³äº ContentProvider çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥çœ‹ &lt;a href=&quot;https://stackoverflow.com/questions/24047248/contentprovider-destruction-lifecycle&quot;&gt;android - ContentProvider destruction/lifecycle - Stack Overflow&lt;/a&gt;ï¼Œ&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–-lifecycleonwer&quot;&gt;å…¶ä»– LifecycleOnwer&lt;/h3&gt;

&lt;p&gt;æœ€åå†æä¸€ä¸‹ï¼ŒLifecycle è¿˜æä¾›äº†å†…ç½®äº†å¦å¤–ä¸‰ä¸ª LifecycleOnwerï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/reference/android/arch/lifecycle/LifecycleFragment.html&quot;&gt;LifecycleFragment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/reference/android/arch/lifecycle/LifecycleService.html&quot;&gt;LifecycleService&lt;/a&gt;ï¼ŒServiceLifecycleDispatcher å°†äº‹ä»¶æ´¾å‘é‡æ–°æ¨åˆ°ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºä¿è¯ç¡®ä¿å›è°ƒåœ¨ Service ç”Ÿå‘½å‘¨æœŸå›è°ƒåå†è°ƒç”¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/reference/android/arch/lifecycle/ProcessLifecycleOwner.html&quot;&gt;ProcessLifecycleOwner&lt;/a&gt;ï¼Œç”¨äºç›‘å¬æ•´ä¸ªåº”ç”¨çš„å‰åå°åˆ‡æ¢ã€‚ä¹Ÿæ˜¯åˆ©ç”¨ ActivityLifecycleCallback ç›‘å¬æ¯ä¸ª Activity çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœ onStop äº‹ä»¶åï¼Œæ²¡æœ‰ç›‘å¬åˆ°ä»»æ„çš„ onStart äº‹ä»¶ï¼Œé‚£ä¹ˆ ProcessLifecycleOwner å°±ä¼šè®¤ä¸ºæ•´ä¸ªåº”ç”¨åˆ‡æ¢åˆ°åå°ï¼ŒåŒæ—¶ç•™ä¸‹ä¸€ä¸ªæ ‡å¿—ã€‚å¦‚æœç›‘å¬åˆ° onStart äº‹ä»¶ï¼ŒåŒæ—¶æ£€æŸ¥æœ‰æ ‡å¿—é‚£ä¹ˆå°±ä¼šè®¤ä¸ºåº”ç”¨å›åˆ°å‰å°ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;lifecycle-çš„åº”ç”¨&quot;&gt;Lifecycle çš„åº”ç”¨ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;æœ‰æœ‹å‹åœ¨é—® Lifecycle æœ‰ä»€ä¹ˆåº”ç”¨ã€‚æˆ‘è§‰å¾— Lifecycle æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯åœ¨äºè§£è€¦ã€‚ä»¥å‰æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„æ¨¡å— mï¼Œå¿…é¡»å¾—åœ¨ Activity å­ç±»é‡Œé¢æ·»åŠ ç±»ä¼¼ä¸‹é¢çš„ä»£ç &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;super.onCreate()
m.init()

m.release()
super.onDestory()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ç±»ç»„ä»¶ä¹‹å¤šï¼Œç”¨èµ·æ¥ä¹‹é¢‘ç¹ã€‚ä»¥è‡´äºæˆ‘ä»¬ç»å¸¸è¦åˆ›å»ºä¸€ä¸ª &lt;code&gt;BaseActivity&lt;/code&gt; ç±»æ¥åšè¿™äº›è„æ´»ã€‚ä¸è¿‡ï¼Œä¸€æ—¦æˆ‘ä»¬å»ºç«‹äº†&lt;code&gt;BaseActivity&lt;/code&gt;ï¼Œæˆ‘ä»¬å¸¸å¸¸å°±èƒ½ä½“ä¼šåˆ° Java å•ç»§æ‰¿ä¹‹ç—›ã€‚Activityä¸æ­¢ä¸€ä¸ªå•Šï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;LifecycleActivity&lt;/code&gt;ã€&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;AppcompatActivity&lt;/code&gt;ã€&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;FragmentActivity&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;ç­‰ç­‰â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿˜æœ‰ç¬¬ä¸‰æ–¹åº“çš„ï¼Œæ¯”å¦‚ &lt;code&gt;CordovaActivity&lt;/code&gt;â€¦ ã€‚éšç€é¡¹ç›®çš„æ‰©å¤§ï¼Œä½ å¾ˆéš¾åªç”¨ä¸€ç±» Activityã€‚è€Œä¸”æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ä¸æ­¢ä¸€ä¸ªï¼Œè¿™äº›ç»„ä»¶çš„å­ç±»ä¹ŸèŠ±æ ·ç¹å¤šï¼Œæˆ‘ä»¬å»ºç«‹äº† &lt;code&gt;BaseFragment&lt;/code&gt;ã€&lt;code&gt;BaseService&lt;/code&gt;â€¦åŒæ—¶ä¹Ÿå»ºç«‹äº†æ›´å¤šç—›è‹¦ã€‚&lt;strong&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„æ¨¡å—è¦å’Œè¿™äº›å¤æ‚æ€§ç»‘å®šåœ¨ä¸€èµ·ï¼Ÿ&lt;/strong&gt;ç”Ÿå‘½å‘¨æœŸæ•æ„Ÿæ¨¡å—åº”è¯¥ä¸ç‹¬ç«‹èµ·æ¥ï¼Œå˜æˆä¸€ä¸ªå¯ä»¥åœ¨ä»»æ„æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶å®‰è£…çš„æ¨¡å—ï¼Œæ‰€ä»¥ Lifecycle å°±åœ¨å¸®æˆ‘ä»¬åšè¿™ç§äº‹æƒ…ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;getLifecycle().addObserver(new LifecycleObserverDemo());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£ä¹ˆå…·ä½“ä¸€ç‚¹è¿™ç±»ç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„ç»„ä»¶æœ‰å“ªäº›å‘¢ï¼Ÿ&lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/lifecycle.html&quot;&gt;å®˜æ–¹ä»¥ LocationManager ä¸ºä¾‹&lt;/a&gt;ï¼Œä¸»è¦ä½œç”¨é¿å… Activity éå…¥åå°åç»§ç»­å®šä½æµªè´¹ç”µé‡ã€‚è¿™é‡Œæˆ‘ä»¥ volley ä¸ºä¾‹ï¼Œä¸¾ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç»å¸¸è¦é¢å¯¹çš„é—®é¢˜ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;volleyClient.query(new Respose.Listener(){});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç æ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œ&lt;code&gt;new Respose.Listener(){}&lt;/code&gt; æ˜¯ Activity çš„ä¸€ä¸ªåŒ¿åç±»ï¼Œå®ƒæœ‰æŒ‡å‘ Activity çš„å¼•ç”¨ï¼Œè€Œ Volley æ˜¯ä¸€ä¸ªå­˜æ´»èŒƒå›´æ¯” Activity æ›´å¤§çš„å®ä¾‹ï¼Œæ¯”å¦‚å¸¸å¸¸ VolleyClient å°±æ˜¯å•ä¾‹ã€‚è¿™å°±å¯¼è‡´äº† Activity é”€æ¯åä¸èƒ½åŠæ—¶é‡Šæ”¾ï¼Œå†…å­˜æ³„æ¼ï¼å½“ç„¶ï¼Œç½‘ç»œè¯·æ±‚ç»ˆä¼šè¿”å›çš„ï¼Œè¿™ä¸ªå›è°ƒå¯¹è±¡å°±ä¼šè¢«é”€æ¯ï¼Œä»è¿™ä¸ªè§’åº¦è®²ï¼Œé—®é¢˜ä¹Ÿä¸æ˜¯å¾ˆå¤§ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯è¯·æ±‚è¿”å›çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåœ¨ onSuccess é‡Œæ“ä½œ UIï¼Œå¦‚æœ Activity å·²ç»é”€æ¯äº†ï¼Œæ²¡åšæ£€æŸ¥çš„è¯é‚£ä¹ˆå°±ä¼šå´©æºƒã€‚è¿™äº›éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œä½†æ˜¯å¾ˆçƒ¦äººã€‚æ‰€ä»¥åƒ volley è¯·æ±‚è¿™æ ·çš„å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;ç½‘ç»œè¯·æ±‚å’Œå®šä½å›è°ƒä¸€æ ·éƒ½å¯ä»¥å½’ç±»ä¸ºç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„æ•°æ®æºï¼ŒGoogle ä¸ºè¿™ç§ç±»å‹çš„æ•°æ®æºæä¾›äº† &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/livedata.html&quot;&gt;LiveData&lt;/a&gt;ã€‚è¿™å°±æ˜¯ LifecycleObserver ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ï¼Œå½“ç„¶è¿™åªæ˜¯ &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/livedata.html&quot;&gt;LiveData&lt;/a&gt; çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;éæ•°æ®æºçš„ç”Ÿå‘½å‘¨æœŸæ•æ„Ÿç»„ä»¶ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·è¡Œä¸ºæ”¶é›†æ¨¡å—ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬è€…ï¼Œåœ¨æ²¡æœ‰ &lt;code&gt;ActivityLifecycleCallback&lt;/code&gt; çš„å¹´ä»£ï¼ˆAPI&amp;lt;14ï¼‰ï¼Œå¸¸å¸¸éœ€è¦åœ¨å„ä¸ª Activity ä¸­æ‰‹åŠ¨åŠ å…¥å¼€å§‹è®°å½•å’Œåœæ­¢çºªå½•çš„ä»£ç ã€‚æœ‰äº† &lt;code&gt;ActivityLifecycleCallback&lt;/code&gt; ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±å˜æˆåœ¨ &lt;code&gt;Application#onCreate&lt;/code&gt; åŠ ä¸€å¥ä»£ç ã€‚é‚£ä¹ˆç°åœ¨æŠŠç”¨æˆ·è¡Œä¸ºæ”¶é›†æ¨¡å—å˜æˆ &lt;code&gt;LifecycleObserver&lt;/code&gt; æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¾ˆé—æ†¾ï¼Œå¯¹äºè¿™ä¸ªä¾‹å­æˆ‘æš‚æ—¶è¿˜æƒ³ä¸å‡ºæœ‰ä»€ä¹ˆç‰¹åˆ«å¥½çš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒèƒ½è¯´æ˜ LifecycleObserver ä¸€ä¸ªæœ€ä¸»è¦çš„ç‰¹ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰åä¸ª Activityï¼Œåªæœ‰ Activity1 å’Œ Activity2 éœ€è¦è®°å½•ï¼Œé‚£ä¹ˆç”¨ LifecycleObserver å°±å¯ä»¥é¿å…ç”¨é…ç½®å»å£°æ˜å“ªäº› Activity éœ€è¦è®°å½•ã€‚ç›´æ¥åœ¨éœ€è¦è®°å½•çš„ ActivityåŠ å…¥å¦‚ä¸‹ä»£ç &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;getLifecycle().addObserver(new OpRecorder());
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™å°±æ˜¯è§£è€¦çš„å¥½å¤„ã€‚èƒ½è®©ä¸€ä¸ªä¸ç”Ÿå‘½å‘¨æœŸæ·±åº¦è€¦åˆçš„ç»„ä»¶å˜æˆä¸€ä¸ªéšå¤„å¯å®‰è£…çš„ç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œè¿˜æ˜¯è¦å›åˆ°è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬ä» Lifecycle çš„ä»£ç å¯ä»¥å­¦åˆ°ä¸€ä¸ªæ›´å¤§çš„æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;Activity ä¸åªæœ‰ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œè¿˜æœ‰æƒé™ï¼ŒonActivityResult ç­‰ç­‰ã€‚é‚£äº›éœ€è¦ä¸è¿™äº›å›è°ƒæ·±åº¦è€¦åˆçš„æ¨¡å—ï¼Œåˆ©ç”¨ Lifecycle ç”¨çš„æŠ€æœ¯ Headless Fragments æ¥è§£è€¦æ˜¯ä¸ªä¸é”™çš„æ–¹æ³•ã€‚å¯¹äºæ•´ä¸ª Application æ¥è¯´é‚£å°±å¯ä»¥ç”¨æ›´ tricky çš„ Headless ContentProviderã€‚&lt;/p&gt;</content><author><name></name></author><category term="coder" /><category term="Android" /><category term="ç”Ÿå‘½å‘¨æœŸ" /><category term="Android Architecture Components" /><summary type="html">Lifecycle Lifecycle æ˜¯ Android Architecture Components çš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºå°†ç³»ç»Ÿç»„ä»¶ï¼ˆActivityã€Fragmentç­‰ç­‰ï¼‰çš„ç”Ÿå‘½å‘¨æœŸåˆ†ç¦»åˆ° Lifecycle ç±»ï¼ŒLifecycle å…è®¸å…¶ä»–ç±»ä½œä¸ºè§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–ã€‚Lifecycle ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œé¦–å…ˆå£°æ˜ä¸€ä¸ª LifecycleObserver å¯¹è±¡ï¼Œç”¨ @OnLifecycleEvent æ³¨è§£å£°æ˜ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å›è°ƒçš„æ–¹æ³•ï¼š public class LifecycleObserverDemo implements LifecycleObserver { @OnLifecycleEvent(Lifecycle.Event.ON_ANY) void onAny(LifecycleOwner owner, Lifecycle.Event event) { System.out.println(&quot;onAny:&quot; + event.name()); } @OnLifecycleEvent(Lifecycle.Event.ON_CREATE) void onCreate() { System.out.println(&quot;onCreate&quot;); } @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY) void onDestroy() { System.out.println(&quot;onDestroy&quot;); } } ç„¶ååœ¨ LifecycleRegistryOwner æ¯”å¦‚ LifecycleActivity åŠ å…¥è¿™ä¹ˆä¸€è¡Œä»£ç ï¼š getLifecycle().addObserver(new LifecycleObserverDemo()); ç„¶åï¼Ÿç„¶åå°±æ²¡äº†ï¼Œè¿è¡Œèµ·æ¥å¯ä»¥çœ‹åˆ° LifecycleActivity çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒLifecycleObserverDemo æ€»èƒ½å¾—åˆ°é€šçŸ¥ã€‚è€Œ LifecycleActivity åªæœ‰å¯¥å¯¥å‡ è¡Œä»£ç ï¼Œå¹¶æ²¡æœ‰è¦†ç›–ä»»ä½•å›è°ƒæ–¹æ³•ã€‚é‚£ä¹ˆ Lifecycle æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹é»‘é­”æ³•çš„æ„Ÿè§‰ï¼Ÿ æ³¨è§£çš„ä½œç”¨ é¦–å…ˆä»æ³¨è§£å…¥æ‰‹ï¼Œå¯ä»¥åœ¨ build ç›®å½•ä¸‹å‘ç°æ³¨è§£å¤„ç†å™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº† LifecycleObserverDemo_LifecycleAdapterï¼Œä¸è¿‡è¿™åªæ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼Œç”¨äºå°†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ´¾å‘åˆ° LifecycleObserverDemo å¯¹åº”çš„æ–¹æ³•ã€‚ public class LifecycleObserverDemo_LifecycleAdapter implements GenericLifecycleObserver { final LifecycleObserverDemo mReceiver; LifecycleObserverDemo_LifecycleAdapter(LifecycleObserverDemo receiver) { this.mReceiver = receiver; } @Override public void onStateChanged(LifecycleOwner owner, Lifecycle.Event event) { mReceiver.onAny(owner,event); if (event == Lifecycle.Event.ON_CREATE) { mReceiver.onCreate(); } if (event == Lifecycle.Event.ON_START) { mReceiver.onStart(); } if (event == Lifecycle.Event.ON_PAUSE) { mReceiver.onPause(); } if (event == Lifecycle.Event.ON_DESTROY) { mReceiver.onDestroy(); } } public Object getReceiver() { return mReceiver; } } å¦‚ä½•ä¼ è¾¾ lifecycle äº‹ä»¶ æ³¨è§£ä¹Ÿæ²¡æœ‰ç”Ÿæˆä»»ä½•ç›¸å…³çš„ä»£ç ï¼Œè€Œ Activity ä¸ç”¨å†™ä»»ä½•ä»£ç ï¼Œé‚£ä¹ˆ Lifecycle æ˜¯å¦‚ä½•æŠŠ Activity ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¼ é€’ç»™ LifecycleObserverçš„ï¼Ÿ æœ€ç»ˆé€šè¿‡ç ”è¯» Lifecycle çš„ä»£ç ï¼Œå‘ç°é‡Œé¢æœ‰ä¸ªåŒ…å¯è§çš„ç±» LifecycleDispatcherï¼ŒLifecycleDispatcher æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œåœ¨ LifecycleDispatcher#init(Context) ä¸­ï¼Œå®ƒé€šè¿‡ registerActivityLifecycleCallbacks æ–¹æ³•ï¼Œå‘å½“å‰çš„ Application æ³¨å†Œä¸€ä¸ª DispatcherActivityCallbackï¼Œä½† Lifecycle å¹¶æ²¡ä½¿ç”¨ ActivityLifecycleCallbacks æ¥ç›‘å¬å¹¶æ´¾å‘ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚ static void init(Context context){ ... ((Application)context.getApplicationContext()).registerActivityLifecycleCallbacks(new LifecycleDispatcher.DispatcherActivityCallback()); ... } static class DispatcherActivityCallback extends EmptyActivityLifecycleCallbacks { public void onActivityCreated(Activity activity, Bundle savedInstanceState) { ... if(manager.findFragmentByTag(&quot;android.arch.lifecycle.LifecycleDispatcher.report_fragment_tag&quot;) == null) { manager.beginTransaction().add(new ReportFragment(), &quot;android.arch.lifecycle.LifecycleDispatcher.report_fragment_tag&quot;).commit(); manager.executePendingTransactions(); } } } è€Œæ˜¯é€šè¿‡ä¸€ä¸ªæ—  UI çš„ Fragmentï¼Œåœ¨ DispatcherActivityCallback#onActivityCreated å¯ä»¥çœ‹åˆ°å®ƒåœ¨ Activity#onCreate æ—¶ï¼Œä¸º Activity æ·»åŠ ä¸€ä¸ª ReportFragmentã€‚æœ€ç»ˆç”± ReportFragment æ¥ç›‘å¬å„ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œç„¶åä¼ é€’ç»™ LifecycleRegistryã€‚ public class ReportFragment extends Fragment { ... public void onPause() { super.onPause(); dispatch(Event.ON_PAUSE); } ... private void dispatch(Event event) { if(this.getActivity() instanceof LifecycleRegistryOwner) { ((LifecycleRegistryOwner)this.getActivity()).getLifecycle().handleLifecycleEvent(event); } } } Activity çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶éƒ½ä¼šæ´¾å‘åˆ°å®ƒçš„ Fragmentsï¼Œå‘ Activity æ³¨å†Œä¸€ä¸ªæ—  UI çš„ Fragment ä¹Ÿå« Headless Fragment ç”¨äºå°†å„ç§ Activity å›è°ƒåˆ†ç¦»å‡ºæ¥æ˜¯ä¸ªå¸¸ç”¨çš„åšæ³•ï¼Œæ¯”å¦‚ RxPermissions ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹æ³•æ¥é¿å…å¤å†™ Activity#onRequestPermissionsResultã€‚ é¡ºä¾¿ä¸€æ Lifecycle æ–‡æ¡£æåˆ°ï¼š ON_CREATE, ON_START, ON_RESUME events in this class are dispatched after the LifecycleOwnerâ€™s related method returns. ON_PAUSE, ON_STOP, ON_DESTROY events in this class are dispatched before the LifecycleOwnerâ€™s related method is called. æ­£å¥½æ˜¯ Fragment ç”Ÿå‘½å‘¨æœŸå›è°ƒçš„è§¦å‘é¡ºåºã€‚ Activity çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ˜¯å¦‚ä½•ä¼ é€’åˆ° LifecycleObserver æœ‰äº†æ¸…æ™°çš„å›¾è¡¨ï¼š LifecycleRuntimeTrojanProvider è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ LifecycleDispatcher#init(Context) å¹¶ä¸æ˜¯å…¥å£ï¼Œå®ƒä¹Ÿéœ€è¦è¢«è°ƒç”¨ã€‚é‚£ä¹ˆä»–çš„è°ƒç”¨è€…æ˜¯è°ï¼ŸGoogle è¿™é‡Œçš„åšæ³•è¿˜æ˜¯å¾ˆå·§å¦™çš„ï¼Œå¦‚æœè¿™æ—¶æŠŠ apk çš„ AndroidManifest.xml æå–å‡ºæ¥ï¼Œå°±ä¼šå‘ç°å¤šäº†ä¸€ä¸ª ContentProvider å£°æ˜ï¼š &amp;lt;provider android:name=&quot;android.arch.lifecycle.LifecycleRuntimeTrojanProvider&quot; android:authorities=&quot;${applicationId}.lifecycle-trojan&quot; android:exported=&quot;false&quot; android:multiprocess=&quot;true&quot; /&amp;gt; LifecycleRuntimeTrojanProviderï¼Œè¿è¡Œæ—¶æœ¨é©¬æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿå®é™…ä¸Šï¼Œå®ƒä¸æ˜¯ä¸€ä¸ª ContentProviderï¼Œè€Œæ˜¯åˆ©ç”¨ ContentProvider çš„ç‰¹ç‚¹åœ¨åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶ï¼Œå‘å…¶æ³¨å…¥ä¸¤è¡Œä»£ç ï¼š LifecycleDispatcher.init(getContext()); ProcessLifecycleOwner.init(getContext()); è¿™é‡Œ ContentProvider ä¹‹äº Application çš„ä½œç”¨å°±ç±»ä¼¼äº Headless Fragment ä¹‹äº Activity ä¸€æ ·ï¼Œç›®çš„éƒ½æ˜¯é¿å…ç»§æ‰¿ç³»ç»Ÿç»„ä»¶ã€‚å…³äº ContentProvider çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥çœ‹ android - ContentProvider destruction/lifecycle - Stack Overflowï¼Œ å…¶ä»– LifecycleOnwer æœ€åå†æä¸€ä¸‹ï¼ŒLifecycle è¿˜æä¾›äº†å†…ç½®äº†å¦å¤–ä¸‰ä¸ª LifecycleOnwerï¼š LifecycleFragment LifecycleServiceï¼ŒServiceLifecycleDispatcher å°†äº‹ä»¶æ´¾å‘é‡æ–°æ¨åˆ°ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºä¿è¯ç¡®ä¿å›è°ƒåœ¨ Service ç”Ÿå‘½å‘¨æœŸå›è°ƒåå†è°ƒç”¨ã€‚ ProcessLifecycleOwnerï¼Œç”¨äºç›‘å¬æ•´ä¸ªåº”ç”¨çš„å‰åå°åˆ‡æ¢ã€‚ä¹Ÿæ˜¯åˆ©ç”¨ ActivityLifecycleCallback ç›‘å¬æ¯ä¸ª Activity çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœ onStop äº‹ä»¶åï¼Œæ²¡æœ‰ç›‘å¬åˆ°ä»»æ„çš„ onStart äº‹ä»¶ï¼Œé‚£ä¹ˆ ProcessLifecycleOwner å°±ä¼šè®¤ä¸ºæ•´ä¸ªåº”ç”¨åˆ‡æ¢åˆ°åå°ï¼ŒåŒæ—¶ç•™ä¸‹ä¸€ä¸ªæ ‡å¿—ã€‚å¦‚æœç›‘å¬åˆ° onStart äº‹ä»¶ï¼ŒåŒæ—¶æ£€æŸ¥æœ‰æ ‡å¿—é‚£ä¹ˆå°±ä¼šè®¤ä¸ºåº”ç”¨å›åˆ°å‰å°ã€‚ Lifecycle çš„åº”ç”¨ï¼Ÿ æœ‰æœ‹å‹åœ¨é—® Lifecycle æœ‰ä»€ä¹ˆåº”ç”¨ã€‚æˆ‘è§‰å¾— Lifecycle æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯åœ¨äºè§£è€¦ã€‚ä»¥å‰æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„æ¨¡å— mï¼Œå¿…é¡»å¾—åœ¨ Activity å­ç±»é‡Œé¢æ·»åŠ ç±»ä¼¼ä¸‹é¢çš„ä»£ç  super.onCreate() m.init() m.release() super.onDestory() è¿™ç±»ç»„ä»¶ä¹‹å¤šï¼Œç”¨èµ·æ¥ä¹‹é¢‘ç¹ã€‚ä»¥è‡´äºæˆ‘ä»¬ç»å¸¸è¦åˆ›å»ºä¸€ä¸ª BaseActivity ç±»æ¥åšè¿™äº›è„æ´»ã€‚ä¸è¿‡ï¼Œä¸€æ—¦æˆ‘ä»¬å»ºç«‹äº†BaseActivityï¼Œæˆ‘ä»¬å¸¸å¸¸å°±èƒ½ä½“ä¼šåˆ° Java å•ç»§æ‰¿ä¹‹ç—›ã€‚Activityä¸æ­¢ä¸€ä¸ªå•Šï¼š LifecycleActivityã€ AppcompatActivityã€ FragmentActivity ç­‰ç­‰â€¦ è¿˜æœ‰ç¬¬ä¸‰æ–¹åº“çš„ï¼Œæ¯”å¦‚ CordovaActivityâ€¦ ã€‚éšç€é¡¹ç›®çš„æ‰©å¤§ï¼Œä½ å¾ˆéš¾åªç”¨ä¸€ç±» Activityã€‚è€Œä¸”æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ä¸æ­¢ä¸€ä¸ªï¼Œè¿™äº›ç»„ä»¶çš„å­ç±»ä¹ŸèŠ±æ ·ç¹å¤šï¼Œæˆ‘ä»¬å»ºç«‹äº† BaseFragmentã€BaseServiceâ€¦åŒæ—¶ä¹Ÿå»ºç«‹äº†æ›´å¤šç—›è‹¦ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„æ¨¡å—è¦å’Œè¿™äº›å¤æ‚æ€§ç»‘å®šåœ¨ä¸€èµ·ï¼Ÿç”Ÿå‘½å‘¨æœŸæ•æ„Ÿæ¨¡å—åº”è¯¥ä¸ç‹¬ç«‹èµ·æ¥ï¼Œå˜æˆä¸€ä¸ªå¯ä»¥åœ¨ä»»æ„æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶å®‰è£…çš„æ¨¡å—ï¼Œæ‰€ä»¥ Lifecycle å°±åœ¨å¸®æˆ‘ä»¬åšè¿™ç§äº‹æƒ…ã€‚ getLifecycle().addObserver(new LifecycleObserverDemo()); é‚£ä¹ˆå…·ä½“ä¸€ç‚¹è¿™ç±»ç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„ç»„ä»¶æœ‰å“ªäº›å‘¢ï¼Ÿå®˜æ–¹ä»¥ LocationManager ä¸ºä¾‹ï¼Œä¸»è¦ä½œç”¨é¿å… Activity éå…¥åå°åç»§ç»­å®šä½æµªè´¹ç”µé‡ã€‚è¿™é‡Œæˆ‘ä»¥ volley ä¸ºä¾‹ï¼Œä¸¾ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç»å¸¸è¦é¢å¯¹çš„é—®é¢˜ï¼š volleyClient.query(new Respose.Listener(){}); ä¸Šé¢çš„ä»£ç æ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œnew Respose.Listener(){} æ˜¯ Activity çš„ä¸€ä¸ªåŒ¿åç±»ï¼Œå®ƒæœ‰æŒ‡å‘ Activity çš„å¼•ç”¨ï¼Œè€Œ Volley æ˜¯ä¸€ä¸ªå­˜æ´»èŒƒå›´æ¯” Activity æ›´å¤§çš„å®ä¾‹ï¼Œæ¯”å¦‚å¸¸å¸¸ VolleyClient å°±æ˜¯å•ä¾‹ã€‚è¿™å°±å¯¼è‡´äº† Activity é”€æ¯åä¸èƒ½åŠæ—¶é‡Šæ”¾ï¼Œå†…å­˜æ³„æ¼ï¼å½“ç„¶ï¼Œç½‘ç»œè¯·æ±‚ç»ˆä¼šè¿”å›çš„ï¼Œè¿™ä¸ªå›è°ƒå¯¹è±¡å°±ä¼šè¢«é”€æ¯ï¼Œä»è¿™ä¸ªè§’åº¦è®²ï¼Œé—®é¢˜ä¹Ÿä¸æ˜¯å¾ˆå¤§ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯è¯·æ±‚è¿”å›çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåœ¨ onSuccess é‡Œæ“ä½œ UIï¼Œå¦‚æœ Activity å·²ç»é”€æ¯äº†ï¼Œæ²¡åšæ£€æŸ¥çš„è¯é‚£ä¹ˆå°±ä¼šå´©æºƒã€‚è¿™äº›éƒ½ä¸æ˜¯å¤§é—®é¢˜ï¼Œä½†æ˜¯å¾ˆçƒ¦äººã€‚æ‰€ä»¥åƒ volley è¯·æ±‚è¿™æ ·çš„å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„åŠŸèƒ½ã€‚ ç½‘ç»œè¯·æ±‚å’Œå®šä½å›è°ƒä¸€æ ·éƒ½å¯ä»¥å½’ç±»ä¸ºç”Ÿå‘½å‘¨æœŸæ•æ„Ÿçš„æ•°æ®æºï¼ŒGoogle ä¸ºè¿™ç§ç±»å‹çš„æ•°æ®æºæä¾›äº† LiveDataã€‚è¿™å°±æ˜¯ LifecycleObserver ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ï¼Œå½“ç„¶è¿™åªæ˜¯ LiveData çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ã€‚ éæ•°æ®æºçš„ç”Ÿå‘½å‘¨æœŸæ•æ„Ÿç»„ä»¶ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·è¡Œä¸ºæ”¶é›†æ¨¡å—ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬è€…ï¼Œåœ¨æ²¡æœ‰ ActivityLifecycleCallback çš„å¹´ä»£ï¼ˆAPI&amp;lt;14ï¼‰ï¼Œå¸¸å¸¸éœ€è¦åœ¨å„ä¸ª Activity ä¸­æ‰‹åŠ¨åŠ å…¥å¼€å§‹è®°å½•å’Œåœæ­¢çºªå½•çš„ä»£ç ã€‚æœ‰äº† ActivityLifecycleCallback ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±å˜æˆåœ¨ Application#onCreate åŠ ä¸€å¥ä»£ç ã€‚é‚£ä¹ˆç°åœ¨æŠŠç”¨æˆ·è¡Œä¸ºæ”¶é›†æ¨¡å—å˜æˆ LifecycleObserver æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ å¾ˆé—æ†¾ï¼Œå¯¹äºè¿™ä¸ªä¾‹å­æˆ‘æš‚æ—¶è¿˜æƒ³ä¸å‡ºæœ‰ä»€ä¹ˆç‰¹åˆ«å¥½çš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒèƒ½è¯´æ˜ LifecycleObserver ä¸€ä¸ªæœ€ä¸»è¦çš„ç‰¹ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰åä¸ª Activityï¼Œåªæœ‰ Activity1 å’Œ Activity2 éœ€è¦è®°å½•ï¼Œé‚£ä¹ˆç”¨ LifecycleObserver å°±å¯ä»¥é¿å…ç”¨é…ç½®å»å£°æ˜å“ªäº› Activity éœ€è¦è®°å½•ã€‚ç›´æ¥åœ¨éœ€è¦è®°å½•çš„ ActivityåŠ å…¥å¦‚ä¸‹ä»£ç  getLifecycle().addObserver(new OpRecorder()); è¿™å°±æ˜¯è§£è€¦çš„å¥½å¤„ã€‚èƒ½è®©ä¸€ä¸ªä¸ç”Ÿå‘½å‘¨æœŸæ·±åº¦è€¦åˆçš„ç»„ä»¶å˜æˆä¸€ä¸ªéšå¤„å¯å®‰è£…çš„ç»„ä»¶ã€‚ æœ€åï¼Œè¿˜æ˜¯è¦å›åˆ°è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬ä» Lifecycle çš„ä»£ç å¯ä»¥å­¦åˆ°ä¸€ä¸ªæ›´å¤§çš„æ¨¡å¼ã€‚ Activity ä¸åªæœ‰ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œè¿˜æœ‰æƒé™ï¼ŒonActivityResult ç­‰ç­‰ã€‚é‚£äº›éœ€è¦ä¸è¿™äº›å›è°ƒæ·±åº¦è€¦åˆçš„æ¨¡å—ï¼Œåˆ©ç”¨ Lifecycle ç”¨çš„æŠ€æœ¯ Headless Fragments æ¥è§£è€¦æ˜¯ä¸ªä¸é”™çš„æ–¹æ³•ã€‚å¯¹äºæ•´ä¸ª Application æ¥è¯´é‚£å°±å¯ä»¥ç”¨æ›´ tricky çš„ Headless ContentProviderã€‚</summary></entry><entry><title type="html">è§£å†³ ViewPager åµŒå¥—å¯¼è‡´çš„ Fragment èœå•é”™ä¹±</title><link href="http://dourok.info/2016/12/24/hierarchy-fragment-pager-adapter/" rel="alternate" type="text/html" title="è§£å†³ ViewPager åµŒå¥—å¯¼è‡´çš„ Fragment èœå•é”™ä¹±" /><published>2016-12-24T00:00:00+00:00</published><updated>2017-11-30T15:56:47+00:00</updated><id>http://dourok.info/2016/12/24/hierarchy-fragment-pager-adapter</id><content type="html" xml:base="http://dourok.info/2016/12/24/hierarchy-fragment-pager-adapter/">&lt;p&gt;ä»¥ä¸‹å›¾åµŒå¥—çš„ ViewPager ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸¤å±‚åµŒå¥—çš„ ViewPagerï¼Œä¹Ÿå°±æ˜¯è¯´ ViewPager é‡Œé¢æ˜¯ Fragment ï¼Œæ¯ä¸ª Fragment é‡Œé¢åˆæ˜¯ä¸€ä¸ª ViewPagerã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ¯ä¸ª Fragment éƒ½æœ‰ä¸€ä¸ªç›¸åŒåå­—çš„èœå•é¡¹ï¼Œå¯ä»¥çœ‹åˆ°ä¸åœ¨å½“å‰é¡µæ˜¾ç¤ºçš„ Fragment å®ƒçš„èœå•é¡¹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚ç”¨æˆ·æ»‘åŠ¨åˆ° B ï¼ŒViewPager èƒ½æ­£ç¡®å¤„ç†ç¬¬ä¸€å±‚çš„èœå•ï¼Œæ˜¾ç¤º B çš„æ—¶å€™åŒæ—¶é¢„åŠ è½½ Aã€C ä¸¤ä¸ª Fragmentï¼Œè€Œèœå•é‡Œåªæ˜¾ç¤º B çš„èœå•é¡¹ã€‚åˆ°ç¬¬äºŒå±‚å°±æœ‰é—®é¢˜äº†ï¼Œ BA æ˜¯ç¬¬äºŒå±‚å½“å‰çš„ Fragmentï¼Œå®ƒçš„èœå•é¡¹ä¹Ÿèƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ²¡é—®é¢˜ã€‚ä½†å´å¤šå‡ºæ¥ AA å’Œ CAï¼Œè¿™æ˜¯å› ä¸º ViewPager é¢„åŠ è½½äº† Aï¼ŒA é‡Œé¢çš„ ViewPager æŠŠ AA å½“æˆæ˜¯å½“å‰ Fragmentï¼ŒæŠŠå®ƒçš„èœå•é¡¹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚CA ä¹Ÿæ˜¯åŒæ ·é“ç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;b_aa_ba_ca.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å†³å®šæ˜¯å¦æ˜¾ç¤ºèœå•çš„ä»£ç æ˜¯ç”± &lt;code&gt;PagerAdapter#setPrimaryItem&lt;/code&gt; å®ç°çš„ï¼Œå±äºä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ fragment æ‰ä¼šæ˜¾ç¤ºèœå•é¡¹ã€‚ä»¥ FragmentPagerState ä¸ºä¾‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Fragment fragment = (Fragment)object;
if (fragment != mCurrentPrimaryItem) {
    if (mCurrentPrimaryItem != null) {
        mCurrentPrimaryItem.setMenuVisibility(false);
        mCurrentPrimaryItem.setUserVisibleHint(false);
    }
    if (fragment != null) {
        fragment.setMenuVisibility(true);
        fragment.setUserVisibleHint(true);
    }
    mCurrentPrimaryItem = fragment;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;AAã€CA çš„æ˜¾ç¤ºå°±å¾ˆå¥½ç†è§£äº†ï¼Œå› ä¸ºå®ƒä»¬å„è‡ªæ˜¯ A å’Œ C çš„ä¸»é¡¹ï¼ˆprimary itemï¼‰ï¼Œæ‰€ä»¥éƒ½è°ƒç”¨äº† &lt;code&gt;setMenuVisibility(true)&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯è¦†ç›–çˆ¶ fragment çš„ &lt;code&gt;setMenuVisibility&lt;/code&gt; æ–¹æ³•ï¼ŒæŠŠå€¼ä¼ é€’åˆ°å½“å‰å­ fragment&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@Override public void setMenuVisibility(boolean menuVisible) {
    if (isAdded() &amp;amp;&amp;amp; getChildFragmentManager().getFragments() != null) {
      Fragment f = getChildFragmentManager().findFragmentByTag(
          &quot;android:switcher:&quot; + mPager.getId() + &quot;:&quot; + mPager.getCurrentItem());// ä¸æ”¯æŒ FragmentStatePagerAdapter
      if (f != null) {
        f.setMenuVisibility(menuVisible);
      }
    }
    super.setMenuVisibility(menuVisible);
  }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·ä» A æ»‘åˆ° B æ—¶ï¼ŒAA èƒ½éšè—äº†ã€‚ä½†ä»ç„¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œä» A æ»‘åˆ° B æ—¶ç¦»å±åŠ è½½ Cï¼Œå¹¶è®¾ç½® C çš„ MenuVisibility ä¸º falseã€‚FragmentPagerAdapter å‡ æ¬¡ setMenuVisibility éƒ½åœ¨ finishUpdate ä¹‹å‰ï¼Œæ‰€ä»¥æ­¤æ—¶ C è¿˜æœªæ·»åŠ åˆ° Activityï¼ŒCA æ›´ä¸å­˜åœ¨ã€‚ç­‰åˆ° CA åŠ è½½æ—¶ï¼Œå·²ç»ä¸ä¼šå†è§¦å‘ C çš„ MenuVisibility äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;b_ba_ca.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è€ƒè™‘è‡ªå®šä¹‰ FragmentPagerAdapterï¼Œä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ fragment çš„ menuVisibility åŒæ­¥çˆ¶ Fragment çš„çŠ¶æ€ï¼Œ&lt;code&gt;mParent&lt;/code&gt; æ˜¯é€‚é…å™¨æ„é€ å‡½æ•°ä¼ å…¥çš„ ViewPager å®¿ä¸» Fragmentã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;@Override public void setPrimaryItem(ViewGroup container, int position, Object object) {
  super.setPrimaryItem(container, position, object);
  if (mParent != null) ((Fragment) object).setMenuVisibility(mParent.isMenuVisible());
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·çš„é—®é¢˜æ˜¯ï¼Œä» A æ»‘åˆ° B æ—¶ï¼Œåªæ˜¯æ ¹ ViewPager çš„å½“å‰ä¸»é¡¹ï¼ˆprimary itemï¼‰å‘ç”Ÿå˜åŒ–ï¼ŒA é€‚é…å™¨å’Œ B é€‚é…å™¨çš„ä¸»é¡¹ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ setPrimaryItem ä¸ä¼šè¢«è§¦å‘ï¼ŒAA çš„èœå•ä»ç„¶å¯è§ï¼Œè€Œ BA çš„èœå•åˆ™ä»ç„¶ä¸å¯è§ã€‚&lt;/p&gt;

&lt;p&gt;å¹¸è¿çš„æ˜¯æŠŠä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹åˆå¹¶èµ·æ¥ï¼Œè¿™æ ·å°±è¦†ç›–äº†å„ç§å¯èƒ½äº†ã€‚ä½†æœªå…è¿‡äºç¹çï¼ŒæŠŠé—®é¢˜é‡æ–°æ•´ç†ä¸€éï¼Œå»ºç«‹æ¨¡å‹ï¼Œæ‰æ˜¯ä¼˜é›…çš„è§£å†³æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ç»™é€‚é…å™¨ï¼ˆAdapterï¼‰å¼•å…¥æ˜¯å¦å¯è§†ï¼ˆvisible)å±æ€§ï¼Œä¸å†æ˜¯ä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ Fragment å°±æ˜¾ç¤ºèœå•ï¼Œè€Œæ˜¯åªæœ‰å½“å‰é€‚é…å™¨æ˜¯å¯è§†çš„æƒ…å†µä¸‹æ‰å¯ä»¥æ˜¾ç¤ºèœå•ã€‚&lt;/li&gt;
  &lt;li&gt;æ˜¯å¦å¯è§†çš„é€’å½’å®šä¹‰ï¼šçˆ¶é€‚é…å™¨ï¼ˆç®¡ç†&lt;strong&gt;å®¿ä¸» Fragment&lt;/strong&gt; çš„ Adapterï¼‰æ˜¯å¯è§†çš„ ï¼Œä¸”&lt;strong&gt;å®¿ä¸» Fragment&lt;/strong&gt; æ˜¯ä¸»é¡¹ï¼Œé€‚é…å™¨æ‰æ˜¯å¯è§†çš„ã€‚&lt;/li&gt;
  &lt;li&gt;çˆ¶é€‚é…å™¨çš„å¯è§†çŠ¶æ€å’Œ&lt;strong&gt;å®¿ä¸» Fragment&lt;/strong&gt; ä¸»é¡¹çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè¦ä¼ é€’åˆ°å…¶å­é€‚é…å™¨ã€‚&lt;/li&gt;
  &lt;li&gt;å­é€‚é…å™¨åˆå§‹åŒ–è¦æ­£ç¡®åˆå§‹åŒ–ä»–çš„å¯è§†çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™æ ·å°±èƒ½è®¾è®¡ä¸€ä¸ªæ–°çš„ PagerAdapterï¼ŒæŠŠæ£˜æ‰‹çš„é—®é¢˜éƒ½æ”¾åœ¨ PagerAdapter æ¥åšã€‚&lt;/p&gt;

&lt;p&gt;è¦å®ç°ç¬¬ä¸‰ç‚¹ï¼Œé€‚é…å™¨éœ€è¦è·å¾—æŒ‡å‘å…¶å­é€‚é…å™¨çš„å¼•ç”¨ï¼Œé€‚é…å™¨æ˜¯ Fragments çš„ç®¡ç†è€…ï¼Œè¿™äº› Fragments åˆæ˜¯å­é€‚é…å™¨çš„å®¿ä¸»ï¼Œåªè¦è®© Fragment å®ç°æ¥å£æ¥è·å–å…¶å†…éƒ¨çš„é€‚é…å™¨ä¾¿è¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public interface AdapterHolder {
    HierarchyFragmentPagerAdapter getAdapter();
  }

/**
 * é€šçŸ¥å­ Adapterï¼ˆå®¿ä¸»æ˜¯ holderï¼‰ ï¼Œçˆ¶ Adapter(å½“å‰çš„ Adapter) visible å‘ç”Ÿäº†å˜åŒ–ã€‚
 * æˆ–è€…é€šçŸ¥å­ Adapterï¼Œçˆ¶ Adapter å¸Œæœ›å®ƒçš„ visible å‘ç”Ÿå˜åŒ–
 */
private void notifyChildVisibleChanged(boolean visible, Fragment holder) {
  if (holder instanceof AdapterHolder) {
    HierarchyFragmentPagerAdapter adapter = ((AdapterHolder) holder).getAdapter();
    if (adapter != null) {
      adapter.setVisible(visible);
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ²¡æœ‰ç»§æ‰¿ AdapterHolder éƒ½ä¼šè¢«é€‚é…å™¨å½“æˆæ²¡æœ‰å­ Adapterã€‚&lt;/p&gt;

&lt;p&gt;ç›¸æ¯”ç¬¬ä¸‰ç‚¹ï¼Œç¬¬å››ç‚¹åè€Œæ›´éº»çƒ¦ã€‚åœ¨ finishUpdate ä¹‹å‰ï¼ŒFragment æ˜¯ä¸çŸ¥é“å®ƒåœ¨æ ‘ä¸­çš„ä½ç½®çš„ã€‚è¿™æ—¶å¦‚æœå°è¯•ç”¨ &lt;code&gt;getParentFragment()&lt;/code&gt; æ˜¯è¿”å›ç©ºï¼Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    Fragment parent = fragment.getParentFragment();
    if (parent == null || !(parent instanceof AdapterHolder)) {
      // æ‹¿ä¸åˆ° parent æœ‰ä¸¤ç§æƒ…å†µ
      // Adapter åœ¨æ ¹ Pager é‡Œ
      // ä¹Ÿæœ‰å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ï¼Œå½“å‰ Fragment è¿˜æœªå’Œå…¶çˆ¶ Fragment å»ºç«‹é“¾æ¥
      setVisible(isVisible());
    } else {
      // å¦åˆ™ï¼Œåªæœ‰çˆ¶ Adapter æ˜¯ visible primaryï¼Œå½“å‰ primary item æ‰å¯èƒ½æ˜¯ visible primary.
      setVisible(((AdapterHolder) parent).getAdapter().isVisible());
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®åˆå§‹åŒ–ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°åšä¸ª hackã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public HierarchyFragmentPagerAdapter(PagerAdapter adapter, AdapterHolder holder) {
   mAdapter = adapter;
   mVisible = true;
   if (holder != null) {
     if (holder instanceof Fragment) {
       // ä¸€ä¸ª hackï¼Œåˆå§‹åŒ– çš„ visible çŠ¶æ€
       // holder ä¸æ˜¯ Fragment è¡¨ç¤º Adapter ä¸ºæ ¹ Adapter
       // menu visible ä¸º trueï¼Œä¾¿æ–­è¨€å®¿ä¸» Fragment æ˜¯ primary item.
       mVisible = ((Fragment) holder).isMenuVisible();
     }
   }
 }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‰©ä¸‹çš„ä¾¿æ²¡ä»€ä¹ˆï¼Œé‰´äº PagerAdapter æœ‰ä¸¤ä¸ª, FragmentPagerAdapter å’Œ FragmentStatePagerAdapterã€‚æ‰€ä»¥é€‚é…å™¨çš„è®¾è®¡ä¾¿ç”¨ä»£ç†æ¨¡å¼æ¯”è¾ƒåˆé€‚ï¼Œå®ç°èµ·æ¥æ¯”æƒ³è±¡ä¸­çš„ç®€æ´ï¼Œç”¨èµ·æ¥ä¹Ÿç®€å•ï¼Œåªéœ€å°†å®é™…çš„ PagerAdapter å¤–é¢åŒ…ä¸€å±‚ &lt;code&gt;HierarchyFragmentPagerAdapter&lt;/code&gt; å°±è¡Œï¼Œå…·ä½“çš„ä»£ç è§ï¼š&lt;a href=&quot;https://github.com/douo/android-demo/blob/master/app/src/main/java/info/dourok/android/demo/pager/HierarchyFragmentPagerAdapter.java&quot;&gt;HierarchyFragmentPagerAdapter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;b_ba_baa_baaa.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="coder" /><category term="Android" /><category term="ViewPager" /><summary type="html">ä»¥ä¸‹å›¾åµŒå¥—çš„ ViewPager ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸¤å±‚åµŒå¥—çš„ ViewPagerï¼Œä¹Ÿå°±æ˜¯è¯´ ViewPager é‡Œé¢æ˜¯ Fragment ï¼Œæ¯ä¸ª Fragment é‡Œé¢åˆæ˜¯ä¸€ä¸ª ViewPagerã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ¯ä¸ª Fragment éƒ½æœ‰ä¸€ä¸ªç›¸åŒåå­—çš„èœå•é¡¹ï¼Œå¯ä»¥çœ‹åˆ°ä¸åœ¨å½“å‰é¡µæ˜¾ç¤ºçš„ Fragment å®ƒçš„èœå•é¡¹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚ç”¨æˆ·æ»‘åŠ¨åˆ° B ï¼ŒViewPager èƒ½æ­£ç¡®å¤„ç†ç¬¬ä¸€å±‚çš„èœå•ï¼Œæ˜¾ç¤º B çš„æ—¶å€™åŒæ—¶é¢„åŠ è½½ Aã€C ä¸¤ä¸ª Fragmentï¼Œè€Œèœå•é‡Œåªæ˜¾ç¤º B çš„èœå•é¡¹ã€‚åˆ°ç¬¬äºŒå±‚å°±æœ‰é—®é¢˜äº†ï¼Œ BA æ˜¯ç¬¬äºŒå±‚å½“å‰çš„ Fragmentï¼Œå®ƒçš„èœå•é¡¹ä¹Ÿèƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ²¡é—®é¢˜ã€‚ä½†å´å¤šå‡ºæ¥ AA å’Œ CAï¼Œè¿™æ˜¯å› ä¸º ViewPager é¢„åŠ è½½äº† Aï¼ŒA é‡Œé¢çš„ ViewPager æŠŠ AA å½“æˆæ˜¯å½“å‰ Fragmentï¼ŒæŠŠå®ƒçš„èœå•é¡¹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚CA ä¹Ÿæ˜¯åŒæ ·é“ç†ã€‚ å†³å®šæ˜¯å¦æ˜¾ç¤ºèœå•çš„ä»£ç æ˜¯ç”± PagerAdapter#setPrimaryItem å®ç°çš„ï¼Œå±äºä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ fragment æ‰ä¼šæ˜¾ç¤ºèœå•é¡¹ã€‚ä»¥ FragmentPagerState ä¸ºä¾‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹: Fragment fragment = (Fragment)object; if (fragment != mCurrentPrimaryItem) { if (mCurrentPrimaryItem != null) { mCurrentPrimaryItem.setMenuVisibility(false); mCurrentPrimaryItem.setUserVisibleHint(false); } if (fragment != null) { fragment.setMenuVisibility(true); fragment.setUserVisibleHint(true); } mCurrentPrimaryItem = fragment; } AAã€CA çš„æ˜¾ç¤ºå°±å¾ˆå¥½ç†è§£äº†ï¼Œå› ä¸ºå®ƒä»¬å„è‡ªæ˜¯ A å’Œ C çš„ä¸»é¡¹ï¼ˆprimary itemï¼‰ï¼Œæ‰€ä»¥éƒ½è°ƒç”¨äº† setMenuVisibility(true)ã€‚ è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯è¦†ç›–çˆ¶ fragment çš„ setMenuVisibility æ–¹æ³•ï¼ŒæŠŠå€¼ä¼ é€’åˆ°å½“å‰å­ fragment @Override public void setMenuVisibility(boolean menuVisible) { if (isAdded() &amp;amp;&amp;amp; getChildFragmentManager().getFragments() != null) { Fragment f = getChildFragmentManager().findFragmentByTag( &quot;android:switcher:&quot; + mPager.getId() + &quot;:&quot; + mPager.getCurrentItem());// ä¸æ”¯æŒ FragmentStatePagerAdapter if (f != null) { f.setMenuVisibility(menuVisible); } } super.setMenuVisibility(menuVisible); } è¿™æ ·ä» A æ»‘åˆ° B æ—¶ï¼ŒAA èƒ½éšè—äº†ã€‚ä½†ä»ç„¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œä» A æ»‘åˆ° B æ—¶ç¦»å±åŠ è½½ Cï¼Œå¹¶è®¾ç½® C çš„ MenuVisibility ä¸º falseã€‚FragmentPagerAdapter å‡ æ¬¡ setMenuVisibility éƒ½åœ¨ finishUpdate ä¹‹å‰ï¼Œæ‰€ä»¥æ­¤æ—¶ C è¿˜æœªæ·»åŠ åˆ° Activityï¼ŒCA æ›´ä¸å­˜åœ¨ã€‚ç­‰åˆ° CA åŠ è½½æ—¶ï¼Œå·²ç»ä¸ä¼šå†è§¦å‘ C çš„ MenuVisibility äº†ã€‚ è€ƒè™‘è‡ªå®šä¹‰ FragmentPagerAdapterï¼Œä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ fragment çš„ menuVisibility åŒæ­¥çˆ¶ Fragment çš„çŠ¶æ€ï¼ŒmParent æ˜¯é€‚é…å™¨æ„é€ å‡½æ•°ä¼ å…¥çš„ ViewPager å®¿ä¸» Fragmentã€‚ @Override public void setPrimaryItem(ViewGroup container, int position, Object object) { super.setPrimaryItem(container, position, object); if (mParent != null) ((Fragment) object).setMenuVisibility(mParent.isMenuVisible()); } è¿™æ ·çš„é—®é¢˜æ˜¯ï¼Œä» A æ»‘åˆ° B æ—¶ï¼Œåªæ˜¯æ ¹ ViewPager çš„å½“å‰ä¸»é¡¹ï¼ˆprimary itemï¼‰å‘ç”Ÿå˜åŒ–ï¼ŒA é€‚é…å™¨å’Œ B é€‚é…å™¨çš„ä¸»é¡¹ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ setPrimaryItem ä¸ä¼šè¢«è§¦å‘ï¼ŒAA çš„èœå•ä»ç„¶å¯è§ï¼Œè€Œ BA çš„èœå•åˆ™ä»ç„¶ä¸å¯è§ã€‚ å¹¸è¿çš„æ˜¯æŠŠä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹åˆå¹¶èµ·æ¥ï¼Œè¿™æ ·å°±è¦†ç›–äº†å„ç§å¯èƒ½äº†ã€‚ä½†æœªå…è¿‡äºç¹çï¼ŒæŠŠé—®é¢˜é‡æ–°æ•´ç†ä¸€éï¼Œå»ºç«‹æ¨¡å‹ï¼Œæ‰æ˜¯ä¼˜é›…çš„è§£å†³æ–¹æ³•ï¼š ç»™é€‚é…å™¨ï¼ˆAdapterï¼‰å¼•å…¥æ˜¯å¦å¯è§†ï¼ˆvisible)å±æ€§ï¼Œä¸å†æ˜¯ä¸»é¡¹ï¼ˆprimary itemï¼‰çš„ Fragment å°±æ˜¾ç¤ºèœå•ï¼Œè€Œæ˜¯åªæœ‰å½“å‰é€‚é…å™¨æ˜¯å¯è§†çš„æƒ…å†µä¸‹æ‰å¯ä»¥æ˜¾ç¤ºèœå•ã€‚ æ˜¯å¦å¯è§†çš„é€’å½’å®šä¹‰ï¼šçˆ¶é€‚é…å™¨ï¼ˆç®¡ç†å®¿ä¸» Fragment çš„ Adapterï¼‰æ˜¯å¯è§†çš„ ï¼Œä¸”å®¿ä¸» Fragment æ˜¯ä¸»é¡¹ï¼Œé€‚é…å™¨æ‰æ˜¯å¯è§†çš„ã€‚ çˆ¶é€‚é…å™¨çš„å¯è§†çŠ¶æ€å’Œå®¿ä¸» Fragment ä¸»é¡¹çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè¦ä¼ é€’åˆ°å…¶å­é€‚é…å™¨ã€‚ å­é€‚é…å™¨åˆå§‹åŒ–è¦æ­£ç¡®åˆå§‹åŒ–ä»–çš„å¯è§†çŠ¶æ€ã€‚ è¿™æ ·å°±èƒ½è®¾è®¡ä¸€ä¸ªæ–°çš„ PagerAdapterï¼ŒæŠŠæ£˜æ‰‹çš„é—®é¢˜éƒ½æ”¾åœ¨ PagerAdapter æ¥åšã€‚ è¦å®ç°ç¬¬ä¸‰ç‚¹ï¼Œé€‚é…å™¨éœ€è¦è·å¾—æŒ‡å‘å…¶å­é€‚é…å™¨çš„å¼•ç”¨ï¼Œé€‚é…å™¨æ˜¯ Fragments çš„ç®¡ç†è€…ï¼Œè¿™äº› Fragments åˆæ˜¯å­é€‚é…å™¨çš„å®¿ä¸»ï¼Œåªè¦è®© Fragment å®ç°æ¥å£æ¥è·å–å…¶å†…éƒ¨çš„é€‚é…å™¨ä¾¿è¡Œã€‚ public interface AdapterHolder { HierarchyFragmentPagerAdapter getAdapter(); } /** * é€šçŸ¥å­ Adapterï¼ˆå®¿ä¸»æ˜¯ holderï¼‰ ï¼Œçˆ¶ Adapter(å½“å‰çš„ Adapter) visible å‘ç”Ÿäº†å˜åŒ–ã€‚ * æˆ–è€…é€šçŸ¥å­ Adapterï¼Œçˆ¶ Adapter å¸Œæœ›å®ƒçš„ visible å‘ç”Ÿå˜åŒ– */ private void notifyChildVisibleChanged(boolean visible, Fragment holder) { if (holder instanceof AdapterHolder) { HierarchyFragmentPagerAdapter adapter = ((AdapterHolder) holder).getAdapter(); if (adapter != null) { adapter.setVisible(visible); } } } æ²¡æœ‰ç»§æ‰¿ AdapterHolder éƒ½ä¼šè¢«é€‚é…å™¨å½“æˆæ²¡æœ‰å­ Adapterã€‚ ç›¸æ¯”ç¬¬ä¸‰ç‚¹ï¼Œç¬¬å››ç‚¹åè€Œæ›´éº»çƒ¦ã€‚åœ¨ finishUpdate ä¹‹å‰ï¼ŒFragment æ˜¯ä¸çŸ¥é“å®ƒåœ¨æ ‘ä¸­çš„ä½ç½®çš„ã€‚è¿™æ—¶å¦‚æœå°è¯•ç”¨ getParentFragment() æ˜¯è¿”å›ç©ºï¼Œ Fragment parent = fragment.getParentFragment(); if (parent == null || !(parent instanceof AdapterHolder)) { // æ‹¿ä¸åˆ° parent æœ‰ä¸¤ç§æƒ…å†µ // Adapter åœ¨æ ¹ Pager é‡Œ // ä¹Ÿæœ‰å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ï¼Œå½“å‰ Fragment è¿˜æœªå’Œå…¶çˆ¶ Fragment å»ºç«‹é“¾æ¥ setVisible(isVisible()); } else { // å¦åˆ™ï¼Œåªæœ‰çˆ¶ Adapter æ˜¯ visible primaryï¼Œå½“å‰ primary item æ‰å¯èƒ½æ˜¯ visible primary. setVisible(((AdapterHolder) parent).getAdapter().isVisible()); } ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®åˆå§‹åŒ–ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°åšä¸ª hackã€‚ public HierarchyFragmentPagerAdapter(PagerAdapter adapter, AdapterHolder holder) { mAdapter = adapter; mVisible = true; if (holder != null) { if (holder instanceof Fragment) { // ä¸€ä¸ª hackï¼Œåˆå§‹åŒ– çš„ visible çŠ¶æ€ // holder ä¸æ˜¯ Fragment è¡¨ç¤º Adapter ä¸ºæ ¹ Adapter // menu visible ä¸º trueï¼Œä¾¿æ–­è¨€å®¿ä¸» Fragment æ˜¯ primary item. mVisible = ((Fragment) holder).isMenuVisible(); } } } å‰©ä¸‹çš„ä¾¿æ²¡ä»€ä¹ˆï¼Œé‰´äº PagerAdapter æœ‰ä¸¤ä¸ª, FragmentPagerAdapter å’Œ FragmentStatePagerAdapterã€‚æ‰€ä»¥é€‚é…å™¨çš„è®¾è®¡ä¾¿ç”¨ä»£ç†æ¨¡å¼æ¯”è¾ƒåˆé€‚ï¼Œå®ç°èµ·æ¥æ¯”æƒ³è±¡ä¸­çš„ç®€æ´ï¼Œç”¨èµ·æ¥ä¹Ÿç®€å•ï¼Œåªéœ€å°†å®é™…çš„ PagerAdapter å¤–é¢åŒ…ä¸€å±‚ HierarchyFragmentPagerAdapter å°±è¡Œï¼Œå…·ä½“çš„ä»£ç è§ï¼šHierarchyFragmentPagerAdapter</summary></entry><entry><title type="html">åˆ†äº«æˆ‘çš„ Android Studio Emacs é£æ ¼å¿«æ·é”®</title><link href="http://dourok.info/2016/08/20/share-my-android-studio-emacs-keymaps/" rel="alternate" type="text/html" title="åˆ†äº«æˆ‘çš„ Android Studio Emacs é£æ ¼å¿«æ·é”®" /><published>2016-08-20T00:00:00+00:00</published><updated>2017-11-30T15:56:47+00:00</updated><id>http://dourok.info/2016/08/20/share-my-android-studio-emacs-keymaps</id><content type="html" xml:base="http://dourok.info/2016/08/20/share-my-android-studio-emacs-keymaps/">&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/3/3a/Qwerty.svg&quot; alt=&quot;QWERTY é”®ç›˜åŒºåŸŸï¼Œæ¥è‡ª wikimedia&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Emacs é£æ ¼çš„å¿«æ·é”®é€šè¿‡&lt;a href=&quot;https://www.gnu.org/software/emacs/manual/html_node/elisp/Prefix-Keys.html&quot;&gt;å‰ç¼€é”®&lt;/a&gt;æ¥æ‰©å±•æ›´å¤šæ‰“å­—åŒºçš„å¿«æ·é”®ï¼Œå°½é‡æŠŠå¿«æ·é”®æ§åˆ¶åœ¨æ‰“å­—é”®åŒºï¼Œæ˜¾è‘—å‡å°‘ç¼–ç è¿‡ç¨‹æ‰‹è…•çš„ç§»åŠ¨ï¼Œæ˜¯ä¸ªç»å¾—èµ·è€ƒéªŒçš„å¿«æ·é”®æ–¹æ¡ˆï¼ˆé emacs ç”¨æˆ·å¯èƒ½æ·±ç—›æ¶è§‰ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;è¿™å¥—å¿«æ·é”®åœ¨ Emacs keymaps çš„åŸºç¡€ä¸Šè¿›è¡Œè‡ªå®šä¹‰ï¼Œé¦–å…ˆå‡å°‘å¯¹åŠŸèƒ½é”®åŒºçš„ä½¿ç”¨ï¼Œä¸€æ¥å®¹æ˜“ä¸ç³»ç»Ÿå¿«æ·é”®å†²çªï¼ŒäºŒæ¥æ‰‹æŒ‡ç§»åŠ¨çš„å¹…åº¦è¿‡å¤§éš¾å®šä½ä¸å®¹å½¢æˆè‚Œè‚‰è®°å¿†ï¼Œæ‰€ä»¥åªä¿ç•™ç¼–è¯‘è¿è¡Œç›¸å…³çš„å¿«æ·é”®ã€‚è‡³äºç¼–è¾‘é”®åŒºåˆ™æ›´æ¬¡ï¼Œæ‰‹è…•å¿…é¡»å¾—ç§»åŠ¨ï¼Œçœ¼ç›ä¹Ÿå¾—è·Ÿç€è¾…åŠ©å®šä½ï¼Œåªä¿ç•™å°‘éƒ¨åˆ†ä¸å¸¸ç”¨çš„é»˜è®¤å¿«æ·é”®ã€‚æ•°å­—é”®åŒºæœ€ç³Ÿï¼Œæ‰‹è…•ç§»åŠ¨å¹…åº¦æœ€å¤§ï¼Œå†è¯´æˆ‘çš„ 87 é”®ç›˜éƒ½æ²¡æœ‰å°é”®ç›˜-_-ï¼Œç›´æ¥å¼ƒç”¨ã€‚è‡³äºé¼ æ ‡ï¼Œé‚£æ›´æ˜¯ä¸‡æ¶ä¹‹æºï¼Œæ•´ä¸ªæ‰‹è‡‚éƒ½å¾—ç§»åŠ¨ï¼Œè¿˜è¦çœ¼ç›é…åˆæ‰èƒ½ç”¨é¼ æ ‡å®Œæˆä¸€æ¬¡æ“ä½œï¼Œå†™ä»£ç çš„è¿‡ç¨‹å¤§å¤šæ˜¯ç”¨é¼ æ ‡è¾…åŠ©ç‚¹å‡»å‡ æ¬¡ï¼Œç„¶ååˆå›åˆ°æ‰“å­—åŒºç»§ç»­æ•²ï¼Œè¿™æ ·æ¥å›ä¸€æ¬¡åˆ‡æ¢æˆæœ¬å¤ªé«˜ã€‚ä½•å†µç¨‹åºå‘˜ç»å¸¸ç”¨é¼ æ ‡ç‚¹ç‚¹ç‚¹ï¼Ÿå¤šæ²¡ B æ ¼å•Šã€‚è™½è¯´å¦‚æ­¤ï¼Œä¸è¿‡æƒ³è¦å®Œå…¨ä¸ç”¨é¼ æ ‡è¿˜æ˜¯ä¸å¤ªå®¹æ˜“ï¼Œåªèƒ½è¯´ä¸€ä¸ªå‘½ä»¤é€šè¿‡é¼ æ ‡æ‰“å¼€å±‚å±‚èœå•æ¥æ‰§è¡Œè¶…è¿‡ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å°±åº”è¯¥ç”¨ Find Action æ¥æ‰§è¡Œï¼Œå¦‚æœä¸€å¤©è¶…è¿‡ä¸‰æ¬¡é‚£å°±åº”è¯¥ç»™å®ƒè®¾ä¸ªå¿«æ·é”®å¹¶è®°ä½ã€‚&lt;/p&gt;

&lt;p&gt;Android Studio ç›¸æ¯” Eclipse å†…ç½®çš„ Emacs keymaps å¼ºå¤§äº†è®¸å¤šï¼Œä¸è¿‡ Eclipse æœ‰ Emacs+ï¼Œ Android Studio å´æ²¡æœ‰è¿™æ–¹é¢çš„æ’ä»¶ã€‚æ‰€æœ‰ Android Studio ç›¸æ¯” Emacs å¤šäº†ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Android Studio åªæ”¯æŒä¸€ä¸ªå‰ç¼€é”®ï¼ˆprefix keyï¼‰ï¼Œæ‰€ä»¥ spacemacs é‚£æ ·çš„åŠ©è®°æ³•å¿«æ·é”® Android Studio éš¾ä»¥å®ç°&lt;/li&gt;
  &lt;li&gt;Android Studio ä¸­ Esc ä¸èƒ½ä½œä¸ºä¿®é¥°é”®ä½¿ç”¨&lt;/li&gt;
  &lt;li&gt;IntelliJ å¯ä»¥ä¸º &lt;code&gt;Escape&lt;/code&gt; å‘½ä»¤é…ç½®å¿«æ·é”®ï¼Œä½†ä¸å°‘ UI è¿˜æ˜¯ç¡¬ç¼–ç ä¸ºé”®ç›˜çš„ &lt;code&gt;Esc&lt;/code&gt; é”®ã€‚æ‰€ä»¥ä¸ºäº†é€€å‡ºæµ®çª—ï¼Œç»å¸¸è¦ &lt;code&gt;C-g&lt;/code&gt;ã€&lt;code&gt;Esc&lt;/code&gt; äº¤æ›¿ä½¿ç”¨&lt;/li&gt;
  &lt;li&gt;ä¸è¿‡çª—å£çš„æ“ä½œé€»è¾‘ä¸ä¸€è‡´ï¼Œæœ‰äº› UI å¯ä»¥ç”¨ç§»åŠ¨å…‰æ ‡å¿«æ·é”®ï¼Œæœ‰äº›åªèƒ½ç”¨æ–¹å‘é”®&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸€äº›çº¦å®šå…ˆè¯´æ˜ï¼Œç‰¹åˆ«æ˜¯é Emacs å…šï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;C = Control/Ctrlï¼Œ&lt;a href=&quot;https://www.emacswiki.org/emacs/MovingTheCtrlKey&quot;&gt;å¦‚æœå°æŒ‡è¿˜æƒ³è¦è¯·å°† CapsLock æ”¹æˆ Ctrl&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;M = Meta = Alt != Options&lt;/li&gt;
  &lt;li&gt;S = Shift&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;C-F&lt;/code&gt; ç­‰åŒäº &lt;code&gt;C-S-f&lt;/code&gt; ï¼Œæ— æ¢æ¡£å­—ç¬¦ä»ä½¿ç”¨ &lt;code&gt;C-S-key&lt;/code&gt; è¡¨ç¤º&lt;/li&gt;
  &lt;li&gt;æ–¹å‘ç”¨å›¾æ ‡è¡¨ç¤ºï¼š&lt;code&gt;â†&lt;/code&gt;ã€&lt;code&gt;â†’&lt;/code&gt;ã€&lt;code&gt;â†‘&lt;/code&gt;ã€&lt;code&gt;â†“&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;,&lt;/code&gt; ç”¨äºåˆ†éš”å‰ç¼€é”®ï¼Œè¡¨ç¤ºå…ˆæŒ‰ &lt;code&gt;,&lt;/code&gt; å‰çš„é”®ï¼Œ&lt;em&gt;æ¾å¼€&lt;/em&gt;ï¼Œå†æŒ‰ä¸‹ä¸€ä¸ªé”®&lt;/li&gt;
  &lt;li&gt;å…³äº Mac çš„ Options é”®ï¼Œå‚è€ƒï¼š&lt;a href=&quot;https://stackoverflow.com/questions/20770033/how-to-disable-option-key-to-type-greek-letter-in-mac-os&quot;&gt;osx - How to disable option key to type greek letter in Mac OS? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€ç»ˆä½¿ç”¨çš„å‰ç¼€é”®æœ‰ä¸‹é¢ä¸‰ä¸ªï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code&gt;C-x&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;Esc&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;M-g&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é¦–å…ˆï¼Œæœ€åŸºæœ¬åˆæœ€é‡è¦çš„é”®è‚¯å®šå°±æ˜¯ Find Actionï¼Œç®€ç›´å°±æ˜¯ Emacs ä¸­çš„ Run Commandï¼Œå¿…é¡»ç»‘å®šä¸º &lt;code&gt;M-x&lt;/code&gt;ã€‚åˆ«çš„å¿«æ·é”®è®°ä¸ä½ä¸è¦ç´§ï¼Œåªè¦è®°ä½è¿™ä¸ªè¿˜æ˜¯èƒ½åšåˆ°æ— é¼ æ ‡æ“ä½œï¼Œç‰¹åˆ«æ˜¯è¿˜é™„å¸¦å¿«æ·é”®æç¤ºï¼Œå¦‚æœæœ‰çš„è¯ã€‚ä¸è¿‡è¿˜æ˜¯å¾—å¯¹å‘½ä»¤çš„å…³é”®å­—æœ‰ç‚¹æ¦‚å¿µï¼Œè¡¨æ ¼ä¸­çš„å…³é”®å­—é¡¹å°±æ˜¯è¡¨ç¤ºé€šè¿‡è¯¥å…³é”®å­—åœ¨ Find Action æˆ–è€… Keymaps è®¾ç½®æœç´¢åˆ°ç›¸åº”åŠŸèƒ½ï¼›è‡ªå®šä¹‰æœ‰ &lt;code&gt;*&lt;/code&gt; è¡¨ç¤ºå¿«æ·é”®æ˜¯æˆ‘è‡ªå®šä¹‰çš„ï¼Œé Emacs Keymaps çš„é»˜è®¤é…ç½®ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-x&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ‰§è¡Œå‘½ä»¤&lt;/td&gt;
      &lt;td&gt;find Action&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-g&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å–æ¶ˆ&lt;/td&gt;
      &lt;td&gt;escape&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-s&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ‰“å¼€è®¾ç½®&lt;/td&gt;
      &lt;td&gt;settings&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;å…‰æ ‡ç§»åŠ¨move-cursor&quot;&gt;å…‰æ ‡ç§»åŠ¨ï¼ˆMove cursorï¼‰&lt;/h3&gt;

&lt;p&gt;å…‰æ ‡ç§»åŠ¨ç±»çš„å¿«æ·é”®ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯åœ¨å•ä¸€æ–‡æœ¬çš„å†…çš„å…‰æ ‡ç§»åŠ¨ï¼ŒåˆåŒ…æ‹¬è¯­æ³•æ— å…³çš„ç§»åŠ¨å’Œè¯­æ³•ç›¸å…³çš„ç§»åŠ¨ï¼Œè¯­æ³•æ— å…³çš„ç§»åŠ¨æŒ‡çš„å°±æ˜¯å…‰æ ‡çš„ä¸Šä¸‹å·¦å³ç§»åŠ¨ç­‰ç­‰ï¼Œè¿™ä¸€å—ä¸ Emacs åŸºæœ¬ä¸€è‡´ã€‚å¦å¤– &lt;code&gt;C-l&lt;/code&gt;è™½ç„¶ä¸æ˜¯ç§»åŠ¨å…‰æ ‡ï¼Œä½†ä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦&lt;/td&gt;
      &lt;td&gt;right&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-b&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦&lt;/td&gt;
      &lt;td&gt;left&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-n&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘ä¸Šç§»åŠ¨ä¸€è¡Œ&lt;/td&gt;
      &lt;td&gt;up&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-p&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ&lt;/td&gt;
      &lt;td&gt;down&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘å‰ç§»åŠ¨ä¸€ä¸ªå•è¯&lt;/td&gt;
      &lt;td&gt;next word&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-b&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‘åç§»åŠ¨ä¸€ä¸ªå•è¯&lt;/td&gt;
      &lt;td&gt;previous word&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-a&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°è¡Œå¤´&lt;/td&gt;
      &lt;td&gt;line start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-e&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°è¡Œå°¾&lt;/td&gt;
      &lt;td&gt;line end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-v&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸‹ä¸€é¡µ&lt;/td&gt;
      &lt;td&gt;page down&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-v&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸Šä¸€é¡µ&lt;/td&gt;
      &lt;td&gt;page up&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-&amp;lt;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°æ–‡æœ¬å¤´&lt;/td&gt;
      &lt;td&gt;text start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-&amp;gt;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°æ–‡æœ¬å°¾&lt;/td&gt;
      &lt;td&gt;text end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-l&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å°†å…‰æ ‡ä½ç½®æ»šåŠ¨åˆ°å±å¹•ä¸­å¤®&lt;/td&gt;
      &lt;td&gt;scroll to center&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-Pgup&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°å½“å‰é¡µçš„èµ·å§‹å¤„&lt;/td&gt;
      &lt;td&gt;Page Top&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-PgDn&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°å½“å‰é¡µçš„ç»“æŸå¤„&lt;/td&gt;
      &lt;td&gt;page end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è¯­æ³•ç›¸å…³çš„ç§»åŠ¨ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-[&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°å½“å‰ Block èµ·å§‹å¤§æ‹¬å·å¤„&lt;/td&gt;
      &lt;td&gt;Code block start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°å½“å‰ BLock ç»“æŸå¤§æ‹¬å·å¤„&lt;/td&gt;
      &lt;td&gt;Code Block End&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-a&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°å‰ä¸€ä¸ªæ–¹æ³•&lt;/td&gt;
      &lt;td&gt;previous method&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-e&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨åˆ°åä¸€ä¸ªæ–¹æ³•&lt;/td&gt;
      &lt;td&gt;next method&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Android Studio å°† &lt;code&gt;M-g&lt;/code&gt; ä½œä¸ºè·³è½¬åˆ°è¡Œæ•°ï¼Œæˆ‘æ”¹å…¶ä½œä¸ºå‰ç½®é”®ï¼ŒåŒæ—¶ä½œä¸ºè·³è½¬é«˜äº®é”™è¯¯çš„å‰ç½®é”®ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g g&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä½œä¸ºè·³è½¬åˆ°è¡Œæ•°&lt;/td&gt;
      &lt;td&gt;line&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g n&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸‹ä¸€ä¸ªé«˜äº®é—®é¢˜&lt;/td&gt;
      &lt;td&gt;next highlighted error&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g p&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸Šä¸€ä¸ªé«˜äº®é—®é¢˜&lt;/td&gt;
      &lt;td&gt;next highlighted error&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä¸å…‰æ ‡ç›¸å…³çš„è¿˜æœ‰æ–‡æœ¬é€‰æ‹©ï¼Œæˆ‘ä¿ç•™ &lt;code&gt;C-space&lt;/code&gt; æ¥åŠ å…¥é€‰æ‹©æ¨¡å¼ï¼Œä½†è¿™ä¸ªå¿«æ·é”®ä¹Ÿå¸¸è¢«æ“ä½œç³»ç»Ÿç”¨æ¥åˆ‡æ¢è¾“å…¥æ³•ï¼Œ
åœ¨ Linux ä¸‹æˆ‘æŠŠè¾“å…¥åˆ‡æ¢é…ç½®ä¸º Win-spaceï¼Œå…¶ä»–ç³»ç»Ÿæˆ‘ä¹Ÿå»ºè®®æƒ³åŠæ³•æŠŠ C-space ç•™ç»™ Android Studioã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-space&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åˆ‡æ¢é€‰æ‹©æ¨¡å¼&lt;/td&gt;
      &lt;td&gt;sticky selection&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, h&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…¨é€‰&lt;/td&gt;
      &lt;td&gt;select all&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç‰¹åˆ«æ˜¯ Android Studio ä¸åƒ emacs å¯ä»¥ç”¨ &lt;code&gt;C-F&lt;/code&gt; ç­‰è¿›è¡Œé€‰æ‹©ã€‚åªèƒ½ç”¨ä¼ ç»Ÿçš„ &lt;code&gt;S-â†’&lt;/code&gt;ã€‚æ‰€ä»¥ä¿ç•™ C-space è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œä¸‹é¢æ˜¯ä¾‹å¤–ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-{&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰ Block èµ·å§‹å¤§æ‹¬å·å¤„&lt;/td&gt;
      &lt;td&gt;Code block start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰ Block ç»“æŸå¤§æ‹¬å·å¤„&lt;/td&gt;
      &lt;td&gt;Code block end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-PgUp&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰é¡µçš„èµ·å§‹å¤„&lt;/td&gt;
      &lt;td&gt;page start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-PgDn&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰é¡µçš„ç»“æŸå¤„&lt;/td&gt;
      &lt;td&gt;page end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-Home&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰æ–‡æœ¬çš„èµ·å§‹å¤„&lt;/td&gt;
      &lt;td&gt;text start&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-End&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€‰æ‹©åˆ°å½“å‰æ–‡æœ¬çš„ç»“æŸå¤„&lt;/td&gt;
      &lt;td&gt;text end&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;å¯¼èˆªnavigate&quot;&gt;å¯¼èˆªï¼ˆNavigateï¼‰&lt;/h3&gt;

&lt;p&gt;å¯¼èˆªï¼Œåœ¨ä¸åŒæ–‡ä»¶ä¸­åˆ‡æ¢ã€‚å¸¸ç”¨çš„å¯¼èˆªæˆ‘ç”¨ä¸€æ®µå¼å¿«æ·é”®ã€‚ä¸€å®šè¦å–„ç”¨å‰ä¸‰ä¸ªï¼Œå¯¹ç¼–ç æ•ˆç‡ç»å¯¹æ˜¯å¾ˆå¤§çš„æé«˜ï¼Œèµ·ç ä¸ä¼šè®©åˆ‡æ¢æ–‡ä»¶çš„é€Ÿåº¦è„±æ…¢ä½ çš„æ€è·¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;C-M-G&lt;/code&gt; æ˜¯ &lt;code&gt;C-M-g&lt;/code&gt; çš„é«˜çº§ç‰ˆï¼Œç›´æ¥ä»å®ä¾‹åè·³è½¬åˆ°å…¶ç±»ä¸­ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸Šä¸€ä¸ªä½ç½®&lt;/td&gt;
      &lt;td&gt;forward&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-b&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸‹ä¸€ä¸ªä½ç½®&lt;/td&gt;
      &lt;td&gt;back&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-g&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è·³è½¬åˆ°å®šä¹‰å¤„&lt;/td&gt;
      &lt;td&gt;declaration&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-G&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è·³è½¬åˆ°ç±»å‹&lt;/td&gt;
      &lt;td&gt;type declaration&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-u&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è·³è½¬åˆ°çˆ¶ç±»æ–¹æ³•&lt;/td&gt;
      &lt;td&gt;super method&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-â†/â†’&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å·¦å³åˆ‡æ¢æ ‡ç­¾&lt;/td&gt;
      &lt;td&gt;select tab&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å¦‚æœå¯¹ç®€æ´æœ‰è¦æ±‚æˆ–è€…å±å¹•å¤ªå°ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œå¯ä»¥å°† Android Studio çš„æ ‡ç­¾å…³æ‰ï¼Œå…·ä½“å‚è€ƒï¼š&lt;a href=&quot;https://www.jetbrains.com/help/idea/2016.2/configuring-behavior-of-the-editor-tabs.html&quot;&gt;Configuring Behavior of the Editor Tabs&lt;/a&gt;ï¼Œé‚£ä¹ˆè¿™æ—¶ &lt;code&gt;M-â†/â†’&lt;/code&gt; å°±ä¸ä¼šèµ·ä½œç”¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤– &lt;code&gt;M-num&lt;/code&gt; éƒ½è¢« Android Studio ç»‘å®šåˆ°åˆ‡æ¢åŠŸèƒ½çª—ä½“ï¼Œå¾ˆå®ç”¨ä½†ä¸ä¸€ä¸€ç½—åˆ—äº†ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ &lt;code&gt;M-6&lt;/code&gt; æ‰“å¼€ Android Monitorã€&lt;code&gt;M-7&lt;/code&gt; æ‰“å¼€ Structureï¼Œè‡³äº Project æœ‰æ›´å¥½çš„å¿«æ·é”®æ‰“å¼€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;C-num&lt;/code&gt; ç”¨äºè·³è½¬ä¹¦ç­¾ã€‚&lt;code&gt;C-M-num&lt;/code&gt; åˆ™ç”¨äºè®¾ç½®ä¹¦ç­¾ï¼Œä¹¦ç­¾æ˜¯å…¨å±€çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Select inâ€¦&lt;/strong&gt; å¯è°“çš„é¼ æ ‡æ€æ‰‹ä¸­çš„ MVPï¼Œå¤šå°‘é¼ æ ‡æ“ä½œå°±æ˜¯ä¸ºäº†åœ¨å…¶ä»–çª—ä½“ä¸­æ“ä½œå½“å‰æ–‡ä»¶ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹å®ƒéƒ½æ˜¯æ¯” &lt;code&gt;M-num&lt;/code&gt; æ›´å¥½çš„é€‰æ‹©ã€‚é»˜è®¤çš„ &lt;code&gt;Alt+F1&lt;/code&gt; ä¸ç³»ç»Ÿå†²çªï¼Œæˆ‘ä¿®æ”¹ä¸º &lt;code&gt;Escï¼ŒS-i&lt;/code&gt;ï¼Œå¥½è®°ï¼Œä¸è¿‡éœ€è¦å‰ç¼€é”®ç¡®å®éš¾ä¸ºäº†è¿™ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc,S-i&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åœ¨å…¶å®ƒçª—ä½“ä¸­é€‰æ‹©ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®çª—ä½“å®šä½å½“å‰æ–‡ä»¶&lt;/td&gt;
      &lt;td&gt;select in..&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;S-Esc&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;éšè—å·¥å…·çª—å£ï¼Œé…åˆä¸Šä¸ªå‘½ä»¤ä½¿ç”¨æ›´ä½³ã€‚&lt;/td&gt;
      &lt;td&gt;Hide Active ToolWindow&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-Esc&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;éšè—æ‰€æœ‰å·¥å…·çª—å£&lt;/td&gt;
      &lt;td&gt;Hide All ToolWindow&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ç¼–è¾‘edit&quot;&gt;ç¼–è¾‘ï¼ˆEditï¼‰&lt;/h3&gt;

&lt;p&gt;çœ‹å¿«æ·é”®è¯´æ˜ï¼Œ Android Studio æœ‰ kill ring çš„æ¦‚å¿µï¼Œæ¯”å¦‚ &lt;code&gt;M-w&lt;/code&gt;ã€&lt;code&gt;C-w&lt;/code&gt;ã€&lt;code&gt;M-d&lt;/code&gt;ã€&lt;code&gt;M-backspace&lt;/code&gt; éƒ½æ˜¯æ“ä½œ kill ringï¼Œä½†æ˜¯å±…ç„¶æ²¡æœ‰ yank popï¼Œæ‰€ä»¥ &lt;code&gt;M-y&lt;/code&gt; åªèƒ½ç»‘å®šä¸ºä¸å¤ªå®ç”¨ &lt;strong&gt;paste from historyâ€¦&lt;/strong&gt;ï¼Œè¯è¯´ä½ æŠŠ kill ring è—åˆ°å“ªäº†ï¼Ÿ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x,C-f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ‰“å¼€æ–‡ä»¶&lt;/td&gt;
      &lt;td&gt;file&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x,b&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åˆ‡æ¢ Buffer&lt;/td&gt;
      &lt;td&gt;switcher&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x,k&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…³é—­å½“å‰æ–‡ä»¶&lt;/td&gt;
      &lt;td&gt;close&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-_&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ’¤é”€&lt;/td&gt;
      &lt;td&gt;undo&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-_&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é‡åš&lt;/td&gt;
      &lt;td&gt;redo&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-w&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å‰ªåˆ‡&lt;/td&gt;
      &lt;td&gt;kill selected&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-w&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¤åˆ¶&lt;/td&gt;
      &lt;td&gt;save to kill ring&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-y&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç²˜å¸–&lt;/td&gt;
      &lt;td&gt;paste&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-y&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç²˜å¸–å†å²é€‰æ‹©&lt;/td&gt;
      &lt;td&gt;paste from history&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-S-â†‘/â†“&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨å½“å‰è¡Œ&lt;/td&gt;
      &lt;td&gt;move line up/down&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-â†‘/â†“&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç§»åŠ¨å½“å‰è¯­å¥/ä»£ç å—&lt;/td&gt;
      &lt;td&gt;move statement up/down&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ³¨é‡Šå½“å‰è¡Œ&lt;/td&gt;
      &lt;td&gt;line comment&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ³¨é‡Šå—&lt;/td&gt;
      &lt;td&gt;block comment&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-=&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å±•å¼€&lt;/td&gt;
      &lt;td&gt;expand&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-=&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…¨éƒ¨å±•å¼€&lt;/td&gt;
      &lt;td&gt;expand all&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C--&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ”¶ç¼©&lt;/td&gt;
      &lt;td&gt;collapse&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M--)&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…¨éƒ¨æ”¶ç¼©&lt;/td&gt;
      &lt;td&gt;collapse all&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Android Studio å¯¹åˆ†å‰²çª—æ ¼çš„æ”¯æŒï¼ŒåŸºæœ¬å¯ä»¥åšåˆ°å’Œ Emacs ä¸€è‡´ï¼Œé™¤äº† &lt;code&gt;C-x, 0&lt;/code&gt;ï¼Œåœ¨ Android Studio ä¸­å®ƒçš„è¡Œä¸ºä¸ &lt;code&gt;C-x, k&lt;/code&gt; ä¸€è‡´ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, 1&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…³é—­å…¶ä»–çª—æ ¼&lt;/td&gt;
      &lt;td&gt;unsplit&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, 2&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¹³è¡Œåˆ†å‰²å½“å‰çª—æ ¼&lt;/td&gt;
      &lt;td&gt;split&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, 3&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç«–ç›´åˆ†å‰²å½“å‰çª—æ ¼&lt;/td&gt;
      &lt;td&gt;split&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, 0&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…³é—­å½“å‰çª—æ ¼&lt;/td&gt;
      &lt;td&gt;unsplit&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, o&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åˆ‡æ¢ä¸åŒçª—æ ¼&lt;/td&gt;
      &lt;td&gt;goto next spliteer&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;æŸ¥æ‰¾find&quot;&gt;æŸ¥æ‰¾ï¼ˆFindï¼‰&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;C-D&lt;/code&gt; æ˜¯ Dash æ’ä»¶çš„é»˜è®¤å¿«æ·é”®ï¼Œç”¨äºåœ¨ Dash/Velocity/Zeal ä¸­æœç´¢&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-s&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ–‡æœ¬å†…æœç´¢/ä¸‹ä¸€ä¸ªåŒ¹é…&lt;/td&gt;
      &lt;td&gt;find next&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-r&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸‹ä¸€ä¸ªåŒ¹é…&lt;/td&gt;
      &lt;td&gt;find previous&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-%&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ›¿æ¢&lt;/td&gt;
      &lt;td&gt;replace&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…¨å±€æœç´¢&lt;/td&gt;
      &lt;td&gt;find in path&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-R&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å…¨å±€æ›¿æ¢&lt;/td&gt;
      &lt;td&gt;replace in path&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-S&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŸ¥æ‰¾ä½¿ç”¨&lt;/td&gt;
      &lt;td&gt;find usage&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-D&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Dash ä¸­æœç´¢&lt;/td&gt;
      &lt;td&gt;Search in Dash&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Android Studio æ”¯æŒå®åŠŸèƒ½ï¼Œé»˜è®¤çš„å®æ“ä½œéƒ½æ²¡æœ‰é…ç½®å¿«æ·é”®ï¼Œä¸è¿‡æ²¡æœ‰ &lt;code&gt;C-u&lt;/code&gt; å®çš„å®ç”¨æ€§å¤§æ‰“æŠ˜æ‰£&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, (&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¼€å§‹å®å½•åˆ¶&lt;/td&gt;
      &lt;td&gt;start macro&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, )&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åœæ­¢å®å½•åˆ¶&lt;/td&gt;
      &lt;td&gt;stop macro&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, e&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¿è¡Œå®&lt;/td&gt;
      &lt;td&gt;play last macro&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;ç¼–ç code&quot;&gt;ç¼–ç ï¼ˆCodeï¼‰&lt;/h3&gt;

&lt;p&gt;é‡æ„çš„ Extract éƒ½è¢«ç»‘å®šä¸º &lt;code&gt;C-M-key&lt;/code&gt;ï¼Œæœ¬æ¥ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œå¯æƒœå¤ªå¤šå†²çªï¼Œæˆ‘æ”¹ä¸º &lt;code&gt;Esc,key&lt;/code&gt;ï¼Œå–é¦–å­—æ¯ç›¸åŒæ¥åŠ©è®°ã€‚å‰ç¼€é”®æˆ‘åœ¨ &lt;code&gt;Esc&lt;/code&gt; å’Œ &lt;code&gt;C-c&lt;/code&gt; é—´çŠ¹è±«äº†ä¸‹ï¼Œæ˜¾ç„¶ &lt;code&gt;C-c&lt;/code&gt; æ•ˆç‡æ›´å¥½ï¼Œä½†æˆ‘è§‰å¾—é‡æ„çš„è¯ï¼Œåœ¨æ“ä½œå‰æœ‰ä¸ªåœé¡¿æ€è€ƒä¸‹ä¹Ÿä¸æ˜¯åäº‹ã€‚æ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº† &lt;code&gt;Esc&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;C-M&lt;/code&gt; çš„é»˜è®¤åŠŸèƒ½ä¸ &lt;code&gt;C-[&lt;/code&gt;ã€&lt;code&gt;C-]&lt;/code&gt; é‡å äº†ï¼Œæ‰€ä»¥ä¸å¦‚ç»‘å®šä¸ºæ˜¾ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ï¼Œæ¯•ç«Ÿ Android Studio çš„ä»£ç è¡¥å…¨ä¸æ”¯æŒæ˜¾ç¤ºæ–¹æ³•å‚æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªåŠŸèƒ½ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-/&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä»£ç è¡¥å…¨ï¼ŒæŒ‰ä¸¤æ¬¡èƒ½æ˜¾ç¤ºæ›´å¤šé€‰é¡¹&lt;/td&gt;
      &lt;td&gt;completion&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M-/&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä»£ç è¡¥å…¨ï¼Œæ™ºèƒ½ç±»å‹&lt;/td&gt;
      &lt;td&gt;completion&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-enter&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºå»ºè®®è¡Œä¸ºï¼Œç±»æ˜¯ quick fix&lt;/td&gt;
      &lt;td&gt;show intention actions&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-q&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¿«é€Ÿæ–‡æ¡£&lt;/td&gt;
      &lt;td&gt;quick document&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-I&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¿«é€Ÿæ˜¾ç¤ºå®šä¹‰&lt;/td&gt;
      &lt;td&gt;quick definition&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-P&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºå½“å‰è¡¨è¾¾å¼è¿”å›ç±»å‹&lt;/td&gt;
      &lt;td&gt;expression type&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-M&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºæ–¹æ³•å‚æ•°ä¿¡æ¯&lt;/td&gt;
      &lt;td&gt;parameter info&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ ¼å¼åŒ–&lt;/td&gt;
      &lt;td&gt;reformat code&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, r&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é‡å‘½å&lt;/td&gt;
      &lt;td&gt;rename&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, i&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¼˜åŒ– imports&lt;/td&gt;
      &lt;td&gt;optimize imports&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, j&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ’å…¥åœ¨çº¿æ¨¡æ¿ï¼Œä»£ç è¡¥å…¨ä¹Ÿæ”¯æŒè¡¥å…¨æ¨¡æ¿&lt;/td&gt;
      &lt;td&gt;insert live template&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, g&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç”Ÿæˆä»£ç &lt;/td&gt;
      &lt;td&gt;generate&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, s&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç”ŸæˆåŒ…å›´ä»£ç &lt;/td&gt;
      &lt;td&gt;surround with&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc, f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æå–ä¸ºå­—æ®µ&lt;/td&gt;
      &lt;td&gt;field&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc, c&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æå–ä¸ºå¸¸é‡&lt;/td&gt;
      &lt;td&gt;constant&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc, m&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æå–ä¸ºæ–¹æ³•&lt;/td&gt;
      &lt;td&gt;method&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc, p&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æå–ä¸ºå‚æ•°&lt;/td&gt;
      &lt;td&gt;parameter&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Esc, v&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æå–ä¸ºå˜é‡&lt;/td&gt;
      &lt;td&gt;variable&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;è¿è¡Œmake&quot;&gt;è¿è¡Œï¼ˆMakeï¼‰&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;S-F10&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¿è¡Œå½“å‰é…ç½®&lt;/td&gt;
      &lt;td&gt;run&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;S-F9&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è°ƒè¯•å½“å‰é…ç½®&lt;/td&gt;
      &lt;td&gt;debug&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-S-F9&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¿è¡Œå½“å‰ Activity&lt;/td&gt;
      &lt;td&gt;run context configuraton&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-S-F10&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¼¹å‡ºè¿è¡Œé€‰æ‹©èœå•&lt;/td&gt;
      &lt;td&gt;run&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-S-F9&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¼¹å‡ºè°ƒè¯•é€‰æ‹©èœå•&lt;/td&gt;
      &lt;td&gt;debug&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;git&quot;&gt;Git&lt;/h3&gt;

&lt;p&gt;å¤§éƒ¨åˆ† Vcs ç›¸å…³çš„å¿«æ·é”®é»˜è®¤é…ç½®éƒ½å’Œä¸Šé¢çš„é…ç½®å†²çªäº†ï¼Œè€ƒè™‘åˆ°ç”¨äºè·³è½¬çš„ &lt;code&gt;M-g&lt;/code&gt; å‰ç¼€é”®åªç”¨äº† 3 ä¸ªï¼Œæˆ‘çš„ VCS åªç”¨ git
 ä¸€ä¸ªï¼Œæ‰€ä»¥æŠŠ git ç›¸å…³æ“ä½œç”¨ &lt;code&gt;M-g&lt;/code&gt; å‰ç¼€é”®é‡æ–°ç¼–æ’ä¸‹ã€‚å› ä¸ºå¾ˆå°‘ç”¨åˆ°ï¼Œå¯èƒ½ä¸å¤ªåˆç†ï¼Œä¸€äº› git çš„åŸºæœ¬æ“ä½œæˆ‘éƒ½æ˜¯éƒ½æ˜¯ç›´æ¥åœ¨ Shell é‡Œè¾“å…¥ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, +&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;add å½“å‰æ–‡ä»¶&lt;/td&gt;
      &lt;td&gt;add to vcs&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-c&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;commit&lt;/td&gt;
      &lt;td&gt;commit&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-z&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;revert&lt;/td&gt;
      &lt;td&gt;revert&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;fetch&lt;/td&gt;
      &lt;td&gt;fetch&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-u&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;push&lt;/td&gt;
      &lt;td&gt;push&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-a&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;annotate&lt;/td&gt;
      &lt;td&gt;annotate&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-p&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;pull&lt;/td&gt;
      &lt;td&gt;pull&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-d&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨å†å²è®°å½•çª—ä½“å¯ç›´æ¥å¯¹æ¯”&lt;/td&gt;
      &lt;td&gt;compare file/show diff&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-D&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¼¹å‡ºæ¯”è¾ƒæ–‡ä»¶æµ®çª—&lt;/td&gt;
      &lt;td&gt;compare with&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-h&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºå½“å‰æ–‡ä»¶å†å²&lt;/td&gt;
      &lt;td&gt;show history&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-g, C-H&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºå½“å‰é€‰æ‹©åŒºåŸŸå†å²&lt;/td&gt;
      &lt;td&gt;show history&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;é¼ æ ‡mouse&quot;&gt;é¼ æ ‡ï¼ˆMouseï¼‰&lt;/h3&gt;

&lt;p&gt;æŸäº›æƒ…å†µé¼ æ ‡è¿˜æ˜¯æ¯”é”®ç›˜æ›´é«˜æ•ˆ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;Button2&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;çŸ©å½¢é€‰æ‹©&lt;/td&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-S-Button1&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æ”¾ç½®å¤šä¸ªå…‰æ ‡&lt;/td&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;live-plugin&quot;&gt;Live-plugin&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/dkandalov/live-plugin&quot;&gt;live-plugin&lt;/a&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ï¼Œèƒ½ç»™ Android Studio æä¾›ç±»ä¼¼ elisp çš„è¿è¡Œç¯å¢ƒåŠè§£æå™¨ï¼Œé€šè¿‡ groovy è„šæœ¬åœ¨è¿è¡Œæ—¶æ›´æ”¹ IDE çš„è¡Œä¸ºï¼Œæ‰€è°“çš„ &lt;a href=&quot;http://martinfowler.com/bliki/InternalReprogrammability.html&quot;&gt;InternalReprogrammability&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å°†å…¶è¿è¡Œå½“å‰æ’ä»¶çš„å¿«æ·é”®æ›´æ”¹ä¸º Emacs ä¸­æ‰§è¡Œ elisp è¡¨è¾¾å¼çš„å¿«æ·é”®ã€‚å…¶ä»–çš„æˆ‘è¿˜æ²¡æœ‰æ·±å…¥ä½¿ç”¨ï¼Œåªæ˜¯å†™äº†ä¸ªè„šæœ¬ç”¨æ¥å®ç°å•è¯é¦–å­—æ¯å¤§å†™åŠŸèƒ½ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ° &lt;code&gt;M-c&lt;/code&gt;ï¼Œè§ &lt;a href=&quot;https://github.com/douo/douo_config/tree/master/android-studio/live-plugin/capitalizeWord&quot;&gt;capitalizeWord&lt;/a&gt;ã€‚åŸç†ä¸»è¦æ˜¯&lt;code&gt; registerAction&lt;/code&gt; æ¥å¢åŠ è‡ªå®šä¹‰ actionï¼Œè‡ªå®šä¹‰çš„ action èƒ½ç»‘å®šå¿«æ·é”®ï¼Œä¹Ÿèƒ½é€šè¿‡ find action æ¥æœç´¢ååˆ†æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å¿«æ·é”®&lt;/th&gt;
      &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
      &lt;th&gt;å…³é”®å­—&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è‡ªå®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, C-e&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¿è¡Œå½“å‰æ’ä»¶&lt;/td&gt;
      &lt;td&gt;run current plugin&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;C-x, C-t&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æµ‹è¯•å½“å‰æ’ä»¶&lt;/td&gt;
      &lt;td&gt;test current plugin&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;code&gt;M-c&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å•è¯é¦–å­—æ¯å¤§å†™&lt;/td&gt;
      &lt;td&gt;captilazie word&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;*&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;è¿™åªæ˜¯æˆ‘å¸¸ç”¨çš„æˆ–å¶å°”ç”¨åˆ°çš„å¿«æ·é”®çš„ç½—åˆ—ï¼Œä¸æ˜¯å®Œæ•´çš„ Android Studio å¿«æ·é”®è¯´æ˜ï¼Œè¿˜æœ‰å¾ˆå¤š Android Studio çš„åŸºæœ¬åŠŸèƒ½æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œè®°ä¸‹æ¥åªæ˜¯ä¸ºäº†å¤‡å¿˜å’Œåˆ†äº«ã€‚è¿™ä»½å¿«æ·é”®ä¼šæŒç»­å˜æ›´ï¼Œå¯åœ¨ &lt;a href=&quot;https://github.com/douo/douo_config/tree/master/android-studio&quot;&gt;douo_keymaps&lt;/a&gt; æŸ¥çœ‹æœ€æ–°çš„é…ç½®ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://spin.atomicobject.com/2014/08/07/intellij-emacs/&quot;&gt;Customizing IntelliJ for Emacs Compatibility&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="Android Studio" /><category term="Emacs" /><category term="å¿«æ·é”®" /><category term="productive" /><summary type="html">Emacs é£æ ¼çš„å¿«æ·é”®é€šè¿‡å‰ç¼€é”®æ¥æ‰©å±•æ›´å¤šæ‰“å­—åŒºçš„å¿«æ·é”®ï¼Œå°½é‡æŠŠå¿«æ·é”®æ§åˆ¶åœ¨æ‰“å­—é”®åŒºï¼Œæ˜¾è‘—å‡å°‘ç¼–ç è¿‡ç¨‹æ‰‹è…•çš„ç§»åŠ¨ï¼Œæ˜¯ä¸ªç»å¾—èµ·è€ƒéªŒçš„å¿«æ·é”®æ–¹æ¡ˆï¼ˆé emacs ç”¨æˆ·å¯èƒ½æ·±ç—›æ¶è§‰ï¼‰ã€‚ è¿™å¥—å¿«æ·é”®åœ¨ Emacs keymaps çš„åŸºç¡€ä¸Šè¿›è¡Œè‡ªå®šä¹‰ï¼Œé¦–å…ˆå‡å°‘å¯¹åŠŸèƒ½é”®åŒºçš„ä½¿ç”¨ï¼Œä¸€æ¥å®¹æ˜“ä¸ç³»ç»Ÿå¿«æ·é”®å†²çªï¼ŒäºŒæ¥æ‰‹æŒ‡ç§»åŠ¨çš„å¹…åº¦è¿‡å¤§éš¾å®šä½ä¸å®¹å½¢æˆè‚Œè‚‰è®°å¿†ï¼Œæ‰€ä»¥åªä¿ç•™ç¼–è¯‘è¿è¡Œç›¸å…³çš„å¿«æ·é”®ã€‚è‡³äºç¼–è¾‘é”®åŒºåˆ™æ›´æ¬¡ï¼Œæ‰‹è…•å¿…é¡»å¾—ç§»åŠ¨ï¼Œçœ¼ç›ä¹Ÿå¾—è·Ÿç€è¾…åŠ©å®šä½ï¼Œåªä¿ç•™å°‘éƒ¨åˆ†ä¸å¸¸ç”¨çš„é»˜è®¤å¿«æ·é”®ã€‚æ•°å­—é”®åŒºæœ€ç³Ÿï¼Œæ‰‹è…•ç§»åŠ¨å¹…åº¦æœ€å¤§ï¼Œå†è¯´æˆ‘çš„ 87 é”®ç›˜éƒ½æ²¡æœ‰å°é”®ç›˜-_-ï¼Œç›´æ¥å¼ƒç”¨ã€‚è‡³äºé¼ æ ‡ï¼Œé‚£æ›´æ˜¯ä¸‡æ¶ä¹‹æºï¼Œæ•´ä¸ªæ‰‹è‡‚éƒ½å¾—ç§»åŠ¨ï¼Œè¿˜è¦çœ¼ç›é…åˆæ‰èƒ½ç”¨é¼ æ ‡å®Œæˆä¸€æ¬¡æ“ä½œï¼Œå†™ä»£ç çš„è¿‡ç¨‹å¤§å¤šæ˜¯ç”¨é¼ æ ‡è¾…åŠ©ç‚¹å‡»å‡ æ¬¡ï¼Œç„¶ååˆå›åˆ°æ‰“å­—åŒºç»§ç»­æ•²ï¼Œè¿™æ ·æ¥å›ä¸€æ¬¡åˆ‡æ¢æˆæœ¬å¤ªé«˜ã€‚ä½•å†µç¨‹åºå‘˜ç»å¸¸ç”¨é¼ æ ‡ç‚¹ç‚¹ç‚¹ï¼Ÿå¤šæ²¡ B æ ¼å•Šã€‚è™½è¯´å¦‚æ­¤ï¼Œä¸è¿‡æƒ³è¦å®Œå…¨ä¸ç”¨é¼ æ ‡è¿˜æ˜¯ä¸å¤ªå®¹æ˜“ï¼Œåªèƒ½è¯´ä¸€ä¸ªå‘½ä»¤é€šè¿‡é¼ æ ‡æ‰“å¼€å±‚å±‚èœå•æ¥æ‰§è¡Œè¶…è¿‡ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å°±åº”è¯¥ç”¨ Find Action æ¥æ‰§è¡Œï¼Œå¦‚æœä¸€å¤©è¶…è¿‡ä¸‰æ¬¡é‚£å°±åº”è¯¥ç»™å®ƒè®¾ä¸ªå¿«æ·é”®å¹¶è®°ä½ã€‚ Android Studio ç›¸æ¯” Eclipse å†…ç½®çš„ Emacs keymaps å¼ºå¤§äº†è®¸å¤šï¼Œä¸è¿‡ Eclipse æœ‰ Emacs+ï¼Œ Android Studio å´æ²¡æœ‰è¿™æ–¹é¢çš„æ’ä»¶ã€‚æ‰€æœ‰ Android Studio ç›¸æ¯” Emacs å¤šäº†ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚ï¼š Android Studio åªæ”¯æŒä¸€ä¸ªå‰ç¼€é”®ï¼ˆprefix keyï¼‰ï¼Œæ‰€ä»¥ spacemacs é‚£æ ·çš„åŠ©è®°æ³•å¿«æ·é”® Android Studio éš¾ä»¥å®ç° Android Studio ä¸­ Esc ä¸èƒ½ä½œä¸ºä¿®é¥°é”®ä½¿ç”¨ IntelliJ å¯ä»¥ä¸º Escape å‘½ä»¤é…ç½®å¿«æ·é”®ï¼Œä½†ä¸å°‘ UI è¿˜æ˜¯ç¡¬ç¼–ç ä¸ºé”®ç›˜çš„ Esc é”®ã€‚æ‰€ä»¥ä¸ºäº†é€€å‡ºæµ®çª—ï¼Œç»å¸¸è¦ C-gã€Esc äº¤æ›¿ä½¿ç”¨ ä¸è¿‡çª—å£çš„æ“ä½œé€»è¾‘ä¸ä¸€è‡´ï¼Œæœ‰äº› UI å¯ä»¥ç”¨ç§»åŠ¨å…‰æ ‡å¿«æ·é”®ï¼Œæœ‰äº›åªèƒ½ç”¨æ–¹å‘é”® ä¸€äº›çº¦å®šå…ˆè¯´æ˜ï¼Œç‰¹åˆ«æ˜¯é Emacs å…šï¼š C = Control/Ctrlï¼Œå¦‚æœå°æŒ‡è¿˜æƒ³è¦è¯·å°† CapsLock æ”¹æˆ Ctrl M = Meta = Alt != Options S = Shift C-F ç­‰åŒäº C-S-f ï¼Œæ— æ¢æ¡£å­—ç¬¦ä»ä½¿ç”¨ C-S-key è¡¨ç¤º æ–¹å‘ç”¨å›¾æ ‡è¡¨ç¤ºï¼šâ†ã€â†’ã€â†‘ã€â†“ , ç”¨äºåˆ†éš”å‰ç¼€é”®ï¼Œè¡¨ç¤ºå…ˆæŒ‰ , å‰çš„é”®ï¼Œæ¾å¼€ï¼Œå†æŒ‰ä¸‹ä¸€ä¸ªé”® å…³äº Mac çš„ Options é”®ï¼Œå‚è€ƒï¼šosx - How to disable option key to type greek letter in Mac OS? - Stack Overflow æœ€ç»ˆä½¿ç”¨çš„å‰ç¼€é”®æœ‰ä¸‹é¢ä¸‰ä¸ªï¼š C-x Esc M-g é¦–å…ˆï¼Œæœ€åŸºæœ¬åˆæœ€é‡è¦çš„é”®è‚¯å®šå°±æ˜¯ Find Actionï¼Œç®€ç›´å°±æ˜¯ Emacs ä¸­çš„ Run Commandï¼Œå¿…é¡»ç»‘å®šä¸º M-xã€‚åˆ«çš„å¿«æ·é”®è®°ä¸ä½ä¸è¦ç´§ï¼Œåªè¦è®°ä½è¿™ä¸ªè¿˜æ˜¯èƒ½åšåˆ°æ— é¼ æ ‡æ“ä½œï¼Œç‰¹åˆ«æ˜¯è¿˜é™„å¸¦å¿«æ·é”®æç¤ºï¼Œå¦‚æœæœ‰çš„è¯ã€‚ä¸è¿‡è¿˜æ˜¯å¾—å¯¹å‘½ä»¤çš„å…³é”®å­—æœ‰ç‚¹æ¦‚å¿µï¼Œè¡¨æ ¼ä¸­çš„å…³é”®å­—é¡¹å°±æ˜¯è¡¨ç¤ºé€šè¿‡è¯¥å…³é”®å­—åœ¨ Find Action æˆ–è€… Keymaps è®¾ç½®æœç´¢åˆ°ç›¸åº”åŠŸèƒ½ï¼›è‡ªå®šä¹‰æœ‰ * è¡¨ç¤ºå¿«æ·é”®æ˜¯æˆ‘è‡ªå®šä¹‰çš„ï¼Œé Emacs Keymaps çš„é»˜è®¤é…ç½®ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ M-x æ‰§è¡Œå‘½ä»¤ find Action * C-g å–æ¶ˆ escape Â  C-M-s æ‰“å¼€è®¾ç½® settings Â  å…‰æ ‡ç§»åŠ¨ï¼ˆMove cursorï¼‰ å…‰æ ‡ç§»åŠ¨ç±»çš„å¿«æ·é”®ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯åœ¨å•ä¸€æ–‡æœ¬çš„å†…çš„å…‰æ ‡ç§»åŠ¨ï¼ŒåˆåŒ…æ‹¬è¯­æ³•æ— å…³çš„ç§»åŠ¨å’Œè¯­æ³•ç›¸å…³çš„ç§»åŠ¨ï¼Œè¯­æ³•æ— å…³çš„ç§»åŠ¨æŒ‡çš„å°±æ˜¯å…‰æ ‡çš„ä¸Šä¸‹å·¦å³ç§»åŠ¨ç­‰ç­‰ï¼Œè¿™ä¸€å—ä¸ Emacs åŸºæœ¬ä¸€è‡´ã€‚å¦å¤– C-lè™½ç„¶ä¸æ˜¯ç§»åŠ¨å…‰æ ‡ï¼Œä½†ä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-f å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ right Â  C-b å‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ left Â  C-n å‘ä¸Šç§»åŠ¨ä¸€è¡Œ up Â  C-p å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ down Â  M-f å‘å‰ç§»åŠ¨ä¸€ä¸ªå•è¯ next word Â  M-b å‘åç§»åŠ¨ä¸€ä¸ªå•è¯ previous word Â  C-a ç§»åŠ¨åˆ°è¡Œå¤´ line start Â  C-e ç§»åŠ¨åˆ°è¡Œå°¾ line end Â  C-v ä¸‹ä¸€é¡µ page down Â  M-v ä¸Šä¸€é¡µ page up Â  M-&amp;lt; ç§»åŠ¨åˆ°æ–‡æœ¬å¤´ text start Â  M-&amp;gt; ç§»åŠ¨åˆ°æ–‡æœ¬å°¾ text end Â  C-l å°†å…‰æ ‡ä½ç½®æ»šåŠ¨åˆ°å±å¹•ä¸­å¤® scroll to center Â  C-Pgup ç§»åŠ¨åˆ°å½“å‰é¡µçš„èµ·å§‹å¤„ Page Top Â  C-PgDn ç§»åŠ¨åˆ°å½“å‰é¡µçš„ç»“æŸå¤„ page end Â  è¯­æ³•ç›¸å…³çš„ç§»åŠ¨ï¼š å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-[ ç§»åŠ¨åˆ°å½“å‰ Block èµ·å§‹å¤§æ‹¬å·å¤„ Code block start Â  C-] ç§»åŠ¨åˆ°å½“å‰ BLock ç»“æŸå¤§æ‹¬å·å¤„ Code Block End Â  C-M-a ç§»åŠ¨åˆ°å‰ä¸€ä¸ªæ–¹æ³• previous method Â  C-M-e ç§»åŠ¨åˆ°åä¸€ä¸ªæ–¹æ³• next method Â  Android Studio å°† M-g ä½œä¸ºè·³è½¬åˆ°è¡Œæ•°ï¼Œæˆ‘æ”¹å…¶ä½œä¸ºå‰ç½®é”®ï¼ŒåŒæ—¶ä½œä¸ºè·³è½¬é«˜äº®é”™è¯¯çš„å‰ç½®é”®ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ M-g g ä½œä¸ºè·³è½¬åˆ°è¡Œæ•° line * M-g n ä¸‹ä¸€ä¸ªé«˜äº®é—®é¢˜ next highlighted error * M-g p ä¸Šä¸€ä¸ªé«˜äº®é—®é¢˜ next highlighted error * ä¸å…‰æ ‡ç›¸å…³çš„è¿˜æœ‰æ–‡æœ¬é€‰æ‹©ï¼Œæˆ‘ä¿ç•™ C-space æ¥åŠ å…¥é€‰æ‹©æ¨¡å¼ï¼Œä½†è¿™ä¸ªå¿«æ·é”®ä¹Ÿå¸¸è¢«æ“ä½œç³»ç»Ÿç”¨æ¥åˆ‡æ¢è¾“å…¥æ³•ï¼Œ åœ¨ Linux ä¸‹æˆ‘æŠŠè¾“å…¥åˆ‡æ¢é…ç½®ä¸º Win-spaceï¼Œå…¶ä»–ç³»ç»Ÿæˆ‘ä¹Ÿå»ºè®®æƒ³åŠæ³•æŠŠ C-space ç•™ç»™ Android Studioã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-space åˆ‡æ¢é€‰æ‹©æ¨¡å¼ sticky selection Â  C-x, h å…¨é€‰ select all Â  ç‰¹åˆ«æ˜¯ Android Studio ä¸åƒ emacs å¯ä»¥ç”¨ C-F ç­‰è¿›è¡Œé€‰æ‹©ã€‚åªèƒ½ç”¨ä¼ ç»Ÿçš„ S-â†’ã€‚æ‰€ä»¥ä¿ç•™ C-space è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œä¸‹é¢æ˜¯ä¾‹å¤–ï¼š å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-{ é€‰æ‹©åˆ°å½“å‰ Block èµ·å§‹å¤§æ‹¬å·å¤„ Code block start Â  C-} é€‰æ‹©åˆ°å½“å‰ Block ç»“æŸå¤§æ‹¬å·å¤„ Code block end Â  C-S-PgUp é€‰æ‹©åˆ°å½“å‰é¡µçš„èµ·å§‹å¤„ page start Â  C-S-PgDn é€‰æ‹©åˆ°å½“å‰é¡µçš„ç»“æŸå¤„ page end Â  C-S-Home é€‰æ‹©åˆ°å½“å‰æ–‡æœ¬çš„èµ·å§‹å¤„ text start Â  C-S-End é€‰æ‹©åˆ°å½“å‰æ–‡æœ¬çš„ç»“æŸå¤„ text end Â  å¯¼èˆªï¼ˆNavigateï¼‰ å¯¼èˆªï¼Œåœ¨ä¸åŒæ–‡ä»¶ä¸­åˆ‡æ¢ã€‚å¸¸ç”¨çš„å¯¼èˆªæˆ‘ç”¨ä¸€æ®µå¼å¿«æ·é”®ã€‚ä¸€å®šè¦å–„ç”¨å‰ä¸‰ä¸ªï¼Œå¯¹ç¼–ç æ•ˆç‡ç»å¯¹æ˜¯å¾ˆå¤§çš„æé«˜ï¼Œèµ·ç ä¸ä¼šè®©åˆ‡æ¢æ–‡ä»¶çš„é€Ÿåº¦è„±æ…¢ä½ çš„æ€è·¯ã€‚ C-M-G æ˜¯ C-M-g çš„é«˜çº§ç‰ˆï¼Œç›´æ¥ä»å®ä¾‹åè·³è½¬åˆ°å…¶ç±»ä¸­ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-M-f ä¸Šä¸€ä¸ªä½ç½® forward * C-M-b ä¸‹ä¸€ä¸ªä½ç½® back * C-M-g è·³è½¬åˆ°å®šä¹‰å¤„ declaration Â  C-M-G è·³è½¬åˆ°ç±»å‹ type declaration * C-M-u è·³è½¬åˆ°çˆ¶ç±»æ–¹æ³• super method * M-â†/â†’ å·¦å³åˆ‡æ¢æ ‡ç­¾ select tab Â  å¦‚æœå¯¹ç®€æ´æœ‰è¦æ±‚æˆ–è€…å±å¹•å¤ªå°ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œå¯ä»¥å°† Android Studio çš„æ ‡ç­¾å…³æ‰ï¼Œå…·ä½“å‚è€ƒï¼šConfiguring Behavior of the Editor Tabsï¼Œé‚£ä¹ˆè¿™æ—¶ M-â†/â†’ å°±ä¸ä¼šèµ·ä½œç”¨äº†ã€‚ å¦å¤– M-num éƒ½è¢« Android Studio ç»‘å®šåˆ°åˆ‡æ¢åŠŸèƒ½çª—ä½“ï¼Œå¾ˆå®ç”¨ä½†ä¸ä¸€ä¸€ç½—åˆ—äº†ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ M-6 æ‰“å¼€ Android Monitorã€M-7 æ‰“å¼€ Structureï¼Œè‡³äº Project æœ‰æ›´å¥½çš„å¿«æ·é”®æ‰“å¼€ã€‚ C-num ç”¨äºè·³è½¬ä¹¦ç­¾ã€‚C-M-num åˆ™ç”¨äºè®¾ç½®ä¹¦ç­¾ï¼Œä¹¦ç­¾æ˜¯å…¨å±€çš„ã€‚ Select inâ€¦ å¯è°“çš„é¼ æ ‡æ€æ‰‹ä¸­çš„ MVPï¼Œå¤šå°‘é¼ æ ‡æ“ä½œå°±æ˜¯ä¸ºäº†åœ¨å…¶ä»–çª—ä½“ä¸­æ“ä½œå½“å‰æ–‡ä»¶ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹å®ƒéƒ½æ˜¯æ¯” M-num æ›´å¥½çš„é€‰æ‹©ã€‚é»˜è®¤çš„ Alt+F1 ä¸ç³»ç»Ÿå†²çªï¼Œæˆ‘ä¿®æ”¹ä¸º Escï¼ŒS-iï¼Œå¥½è®°ï¼Œä¸è¿‡éœ€è¦å‰ç¼€é”®ç¡®å®éš¾ä¸ºäº†è¿™ä¸ªå‘½ä»¤ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ Esc,S-i åœ¨å…¶å®ƒçª—ä½“ä¸­é€‰æ‹©ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®çª—ä½“å®šä½å½“å‰æ–‡ä»¶ select in.. * S-Esc éšè—å·¥å…·çª—å£ï¼Œé…åˆä¸Šä¸ªå‘½ä»¤ä½¿ç”¨æ›´ä½³ã€‚ Hide Active ToolWindow Â  C-S-Esc éšè—æ‰€æœ‰å·¥å…·çª—å£ Hide All ToolWindow * ç¼–è¾‘ï¼ˆEditï¼‰ çœ‹å¿«æ·é”®è¯´æ˜ï¼Œ Android Studio æœ‰ kill ring çš„æ¦‚å¿µï¼Œæ¯”å¦‚ M-wã€C-wã€M-dã€M-backspace éƒ½æ˜¯æ“ä½œ kill ringï¼Œä½†æ˜¯å±…ç„¶æ²¡æœ‰ yank popï¼Œæ‰€ä»¥ M-y åªèƒ½ç»‘å®šä¸ºä¸å¤ªå®ç”¨ paste from historyâ€¦ï¼Œè¯è¯´ä½ æŠŠ kill ring è—åˆ°å“ªäº†ï¼Ÿ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-x,C-f æ‰“å¼€æ–‡ä»¶ file Â  C-x,b åˆ‡æ¢ Buffer switcher Â  C-x,k å…³é—­å½“å‰æ–‡ä»¶ close Â  C-_ æ’¤é”€ undo Â  M-_ é‡åš redo Â  C-w å‰ªåˆ‡ kill selected Â  M-w å¤åˆ¶ save to kill ring Â  C-y ç²˜å¸– paste Â  M-y ç²˜å¸–å†å²é€‰æ‹© paste from history Â  M-S-â†‘/â†“ ç§»åŠ¨å½“å‰è¡Œ move line up/down Â  C-S-â†‘/â†“ ç§»åŠ¨å½“å‰è¯­å¥/ä»£ç å— move statement up/down Â  M-; æ³¨é‡Šå½“å‰è¡Œ line comment Â  M-: æ³¨é‡Šå— block comment * C-= å±•å¼€ expand Â  C-M-= å…¨éƒ¨å±•å¼€ expand all * C-- æ”¶ç¼© collapse Â  C-M--) å…¨éƒ¨æ”¶ç¼© collapse all * Android Studio å¯¹åˆ†å‰²çª—æ ¼çš„æ”¯æŒï¼ŒåŸºæœ¬å¯ä»¥åšåˆ°å’Œ Emacs ä¸€è‡´ï¼Œé™¤äº† C-x, 0ï¼Œåœ¨ Android Studio ä¸­å®ƒçš„è¡Œä¸ºä¸ C-x, k ä¸€è‡´ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-x, 1 å…³é—­å…¶ä»–çª—æ ¼ unsplit Â  C-x, 2 å¹³è¡Œåˆ†å‰²å½“å‰çª—æ ¼ split Â  C-x, 3 ç«–ç›´åˆ†å‰²å½“å‰çª—æ ¼ split Â  C-x, 0 å…³é—­å½“å‰çª—æ ¼ unsplit Â  C-x, o åˆ‡æ¢ä¸åŒçª—æ ¼ goto next spliteer Â  æŸ¥æ‰¾ï¼ˆFindï¼‰ C-D æ˜¯ Dash æ’ä»¶çš„é»˜è®¤å¿«æ·é”®ï¼Œç”¨äºåœ¨ Dash/Velocity/Zeal ä¸­æœç´¢ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-s æ–‡æœ¬å†…æœç´¢/ä¸‹ä¸€ä¸ªåŒ¹é… find next Â  C-r ä¸‹ä¸€ä¸ªåŒ¹é… find previous Â  M-% æ›¿æ¢ replace Â  C-S å…¨å±€æœç´¢ find in path * C-R å…¨å±€æ›¿æ¢ replace in path Â  M-S æŸ¥æ‰¾ä½¿ç”¨ find usage Â  C-D Dash ä¸­æœç´¢ Search in Dash * Android Studio æ”¯æŒå®åŠŸèƒ½ï¼Œé»˜è®¤çš„å®æ“ä½œéƒ½æ²¡æœ‰é…ç½®å¿«æ·é”®ï¼Œä¸è¿‡æ²¡æœ‰ C-u å®çš„å®ç”¨æ€§å¤§æ‰“æŠ˜æ‰£ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-x, ( å¼€å§‹å®å½•åˆ¶ start macro Â  C-x, ) åœæ­¢å®å½•åˆ¶ stop macro Â  C-x, e è¿è¡Œå® play last macro Â  ç¼–ç ï¼ˆCodeï¼‰ é‡æ„çš„ Extract éƒ½è¢«ç»‘å®šä¸º C-M-keyï¼Œæœ¬æ¥ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œå¯æƒœå¤ªå¤šå†²çªï¼Œæˆ‘æ”¹ä¸º Esc,keyï¼Œå–é¦–å­—æ¯ç›¸åŒæ¥åŠ©è®°ã€‚å‰ç¼€é”®æˆ‘åœ¨ Esc å’Œ C-c é—´çŠ¹è±«äº†ä¸‹ï¼Œæ˜¾ç„¶ C-c æ•ˆç‡æ›´å¥½ï¼Œä½†æˆ‘è§‰å¾—é‡æ„çš„è¯ï¼Œåœ¨æ“ä½œå‰æœ‰ä¸ªåœé¡¿æ€è€ƒä¸‹ä¹Ÿä¸æ˜¯åäº‹ã€‚æ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº† Escã€‚ C-M çš„é»˜è®¤åŠŸèƒ½ä¸ C-[ã€C-] é‡å äº†ï¼Œæ‰€ä»¥ä¸å¦‚ç»‘å®šä¸ºæ˜¾ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ï¼Œæ¯•ç«Ÿ Android Studio çš„ä»£ç è¡¥å…¨ä¸æ”¯æŒæ˜¾ç¤ºæ–¹æ³•å‚æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªåŠŸèƒ½ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ M-/ ä»£ç è¡¥å…¨ï¼ŒæŒ‰ä¸¤æ¬¡èƒ½æ˜¾ç¤ºæ›´å¤šé€‰é¡¹ completion Â  C-M-/ ä»£ç è¡¥å…¨ï¼Œæ™ºèƒ½ç±»å‹ completion Â  M-enter æ˜¾ç¤ºå»ºè®®è¡Œä¸ºï¼Œç±»æ˜¯ quick fix show intention actions Â  C-q å¿«é€Ÿæ–‡æ¡£ quick document Â  C-I å¿«é€Ÿæ˜¾ç¤ºå®šä¹‰ quick definition Â  C-P æ˜¾ç¤ºå½“å‰è¡¨è¾¾å¼è¿”å›ç±»å‹ expression type Â  C-M æ˜¾ç¤ºæ–¹æ³•å‚æ•°ä¿¡æ¯ parameter info * C-x, f æ ¼å¼åŒ– reformat code * C-x, r é‡å‘½å rename * C-x, i ä¼˜åŒ– imports optimize imports * C-x, j æ’å…¥åœ¨çº¿æ¨¡æ¿ï¼Œä»£ç è¡¥å…¨ä¹Ÿæ”¯æŒè¡¥å…¨æ¨¡æ¿ insert live template * C-x, g ç”Ÿæˆä»£ç  generate * C-x, s ç”ŸæˆåŒ…å›´ä»£ç  surround with * Esc, f æå–ä¸ºå­—æ®µ field * Esc, c æå–ä¸ºå¸¸é‡ constant * Esc, m æå–ä¸ºæ–¹æ³• method * Esc, p æå–ä¸ºå‚æ•° parameter * Esc, v æå–ä¸ºå˜é‡ variable * è¿è¡Œï¼ˆMakeï¼‰ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ S-F10 è¿è¡Œå½“å‰é…ç½® run Â  S-F9 è°ƒè¯•å½“å‰é…ç½® debug Â  C-S-F9 è¿è¡Œå½“å‰ Activity run context configuraton Â  M-S-F10 å¼¹å‡ºè¿è¡Œé€‰æ‹©èœå• run Â  M-S-F9 å¼¹å‡ºè°ƒè¯•é€‰æ‹©èœå• debug Â  Git å¤§éƒ¨åˆ† Vcs ç›¸å…³çš„å¿«æ·é”®é»˜è®¤é…ç½®éƒ½å’Œä¸Šé¢çš„é…ç½®å†²çªäº†ï¼Œè€ƒè™‘åˆ°ç”¨äºè·³è½¬çš„ M-g å‰ç¼€é”®åªç”¨äº† 3 ä¸ªï¼Œæˆ‘çš„ VCS åªç”¨ git ä¸€ä¸ªï¼Œæ‰€ä»¥æŠŠ git ç›¸å…³æ“ä½œç”¨ M-g å‰ç¼€é”®é‡æ–°ç¼–æ’ä¸‹ã€‚å› ä¸ºå¾ˆå°‘ç”¨åˆ°ï¼Œå¯èƒ½ä¸å¤ªåˆç†ï¼Œä¸€äº› git çš„åŸºæœ¬æ“ä½œæˆ‘éƒ½æ˜¯éƒ½æ˜¯ç›´æ¥åœ¨ Shell é‡Œè¾“å…¥ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ M-g, + add å½“å‰æ–‡ä»¶ add to vcs * M-g, C-c commit commit * M-g, C-z revert revert * M-g, C-f fetch fetch * M-g, C-u push push * M-g, C-a annotate annotate * M-g, C-p pull pull * M-g, C-d æ¯”è¾ƒæ–‡ä»¶ï¼Œåœ¨å†å²è®°å½•çª—ä½“å¯ç›´æ¥å¯¹æ¯” compare file/show diff * M-g, C-D å¼¹å‡ºæ¯”è¾ƒæ–‡ä»¶æµ®çª— compare with * M-g, C-h æ˜¾ç¤ºå½“å‰æ–‡ä»¶å†å² show history * M-g, C-H æ˜¾ç¤ºå½“å‰é€‰æ‹©åŒºåŸŸå†å² show history * é¼ æ ‡ï¼ˆMouseï¼‰ æŸäº›æƒ…å†µé¼ æ ‡è¿˜æ˜¯æ¯”é”®ç›˜æ›´é«˜æ•ˆ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ Button2 çŸ©å½¢é€‰æ‹© Â  Â  M-S-Button1 æ”¾ç½®å¤šä¸ªå…‰æ ‡ Â  Â  Live-plugin live-plugin æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ï¼Œèƒ½ç»™ Android Studio æä¾›ç±»ä¼¼ elisp çš„è¿è¡Œç¯å¢ƒåŠè§£æå™¨ï¼Œé€šè¿‡ groovy è„šæœ¬åœ¨è¿è¡Œæ—¶æ›´æ”¹ IDE çš„è¡Œä¸ºï¼Œæ‰€è°“çš„ InternalReprogrammabilityã€‚ æˆ‘å°†å…¶è¿è¡Œå½“å‰æ’ä»¶çš„å¿«æ·é”®æ›´æ”¹ä¸º Emacs ä¸­æ‰§è¡Œ elisp è¡¨è¾¾å¼çš„å¿«æ·é”®ã€‚å…¶ä»–çš„æˆ‘è¿˜æ²¡æœ‰æ·±å…¥ä½¿ç”¨ï¼Œåªæ˜¯å†™äº†ä¸ªè„šæœ¬ç”¨æ¥å®ç°å•è¯é¦–å­—æ¯å¤§å†™åŠŸèƒ½ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ° M-cï¼Œè§ capitalizeWordã€‚åŸç†ä¸»è¦æ˜¯ registerAction æ¥å¢åŠ è‡ªå®šä¹‰ actionï¼Œè‡ªå®šä¹‰çš„ action èƒ½ç»‘å®šå¿«æ·é”®ï¼Œä¹Ÿèƒ½é€šè¿‡ find action æ¥æœç´¢ååˆ†æ–¹ä¾¿ã€‚ å¿«æ·é”® åŠŸèƒ½ å…³é”®å­— è‡ªå®šä¹‰ C-x, C-e è¿è¡Œå½“å‰æ’ä»¶ run current plugin * C-x, C-t æµ‹è¯•å½“å‰æ’ä»¶ test current plugin * M-c å•è¯é¦–å­—æ¯å¤§å†™ captilazie word * æ€»ç»“ è¿™åªæ˜¯æˆ‘å¸¸ç”¨çš„æˆ–å¶å°”ç”¨åˆ°çš„å¿«æ·é”®çš„ç½—åˆ—ï¼Œä¸æ˜¯å®Œæ•´çš„ Android Studio å¿«æ·é”®è¯´æ˜ï¼Œè¿˜æœ‰å¾ˆå¤š Android Studio çš„åŸºæœ¬åŠŸèƒ½æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œè®°ä¸‹æ¥åªæ˜¯ä¸ºäº†å¤‡å¿˜å’Œåˆ†äº«ã€‚è¿™ä»½å¿«æ·é”®ä¼šæŒç»­å˜æ›´ï¼Œå¯åœ¨ douo_keymaps æŸ¥çœ‹æœ€æ–°çš„é…ç½®ã€‚ å‚è€ƒ Customizing IntelliJ for Emacs Compatibility</summary></entry><entry><title type="html">Android é¡¹ç›®æ‰“åŒ…åˆ° JCenter çš„å‘</title><link href="http://dourok.info/2015/05/09/trouble-of-publish-aar/" rel="alternate" type="text/html" title="Android é¡¹ç›®æ‰“åŒ…åˆ° JCenter çš„å‘" /><published>2015-05-09T00:00:00+00:00</published><updated>2018-09-27T07:53:40+00:00</updated><id>http://dourok.info/2015/05/09/trouble-of-publish-aar</id><content type="html" xml:base="http://dourok.info/2015/05/09/trouble-of-publish-aar/">&lt;p&gt;æœç´¢ä¸‹å¦‚ä½•å‘å¸ƒ Android é¡¹ç›®çš„ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†éƒ½ä¼šæ‰¾åˆ°è¿™ç¯‡æ–‡ç«  &lt;a href=&quot;https://www.virag.si/2015/01/publishing-gradle-android-library-to-jcenter/&quot;&gt;Publishing Gradle Android Library to jCenter Repository&lt;/a&gt;ï¼Œä¸­æ–‡çš„æŒ‡å¼•å¯ä»¥çœ‹&lt;a href=&quot;http://zhengxiaopeng.com/2015/02/02/%E4%BD%BF%E7%94%A8Gradle%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE%E5%88%B0JCenter%E4%BB%93%E5%BA%93/&quot;&gt;ä½¿ç”¨Gradleå‘å¸ƒé¡¹ç›®åˆ°JCenterä»“åº“&lt;/a&gt;ã€‚ä¸è¿‡ï¼Œå¦‚æœæŒ‰ç…§è¿™äº›æ–‡ç« æä¾›çš„ &lt;code&gt;build.gradle&lt;/code&gt;ï¼Œå¯èƒ½è¿˜ä¼šé‡åˆ°ä¸€äº›å‘ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è°ƒç”¨-getbootclasspath-å‡ºé”™&quot;&gt;è°ƒç”¨ getBootClassPath() å‡ºé”™&lt;/h3&gt;

&lt;p&gt;å…·ä½“çš„é”™è¯¯ä¿¡æ¯æ˜¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Cannot call getBootClasspath() before setTargetInfo() is called.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯ gradle çš„ android plugin 1.1.0 ç‰ˆæœ¬çš„ bugï¼Œè§ &lt;a href=&quot;(https://code.google.com/p/android/issues/detail?id=152811)&quot;&gt;Issue 152811 - android - Android Gradle Plugin 1.1.0 breaks Javadoc tasks&lt;/a&gt;ã€‚å°†æ’ä»¶æ›´æ–°åˆ° 1.1.1 ä»¥ä¸Šç‰ˆæœ¬å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;classpath 'com.android.tools.build:gradle:1.1.2'
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;gbk-ç¼–ç é—®é¢˜&quot;&gt;GBK ç¼–ç é—®é¢˜&lt;/h3&gt;

&lt;p&gt;Windows ç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä½ å°†æ–‡ä»¶è®¾ç½®ä¸º UTF-8 ç¼–ç ï¼Œjavadoc é»˜è®¤çš„æ˜¯ç³»ç»Ÿç¼–ç ï¼ŒWindows å°±æ˜¯ GBK ç¼–ç ã€‚æ‰€ä»¥ä¸€æ—¦ java æ–‡ä»¶ä¸­å‡ºç°ä¸­æ–‡æ³¨é‡Šå°±ä¼šæŠ¥é”™ï¼Œæç¤º&lt;code&gt;æ— æ³•æ˜ å°„çš„GBKç¼–ç &lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå¾ˆå®¹æ˜“è§£å†³ï¼Œä¸º javadoc æŒ‡æ˜ç¼–ç å°±å¯ä»¥ã€‚åœ¨ gradle å¯ä»¥è¿™ä¹ˆåšï¼š &lt;code&gt;options.encoding = &quot;utf-8&quot;&lt;/code&gt;ï¼Œå…·ä½“çš„ä»»åŠ¡ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;task javadoc(type: Javadoc) {
	...
    options.encoding = &quot;utf-8&quot;
	...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;javadoc-çš„ä¾èµ–é—®é¢˜&quot;&gt;javadoc çš„ä¾èµ–é—®é¢˜&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;task javadoc(type: Javadoc) {
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ–‡ç« ä¸­çš„ &lt;code&gt;javadoc&lt;/code&gt; ä»»åŠ¡æ˜¯è¿™æ ·çš„ï¼Œé‡ç‚¹åœ¨ classpath é‚£ä¸€è¡Œï¼Œè¿™ä¸€è¡Œçš„æ„æ€æ˜¯æ·»åŠ  Android æ¡†æ¶åˆ° &lt;code&gt;javadoc&lt;/code&gt; çš„ classpath ä¸­ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº†å…¶ä»–ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œé‚£ &lt;code&gt;javadoc&lt;/code&gt; ä»»åŠ¡å¾ˆå¯èƒ½ä¼šæ‰§è¡Œå¤±è´¥çš„ï¼Œå› ä¸ºä¸Šé¢çš„ä»£ç å¹¶æ²¡æœ‰è¿™äº›æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åˆ° classpath ä¸­ã€‚æ¯”å¦‚æˆ‘çš„é¡¹ç›®ï¼Œæœ‰ä¸‹é¢è¿™äº›ä¾èµ–ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.google.code.gson:gson:2.3.1'
    compile 'com.android.support:gridlayout-v7:22.1.1'
    compile 'com.android.support:support-v4:22.1.1'
    compile 'com.android.support:appcompat-v7:22.1.1'
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è·‘èµ·ä¸Šé¢çš„ &lt;code&gt;javadoc&lt;/code&gt; å°±ä¼šæŠ¥é”™ï¼Œç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	xxxx.java:20: é”™è¯¯: æ‰¾ä¸åˆ°ç¬¦å·
    public static &amp;lt;T&amp;gt; T create(JsonElement json, Class&amp;lt;T&amp;gt; classOfModel) {
                               ^
  ç¬¦å·:   ç±» JsonElement
  ä½ç½®: ç±» xxxx
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ—¶æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠç¬¬ä¸‰æ–¹ä¾èµ–åŠ å…¥ classpathï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; classpath += project.files(configurations.compile.files,android.getBootClasspath().join(File.pathSeparator))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯ä»ç„¶æŠ¥é”™&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Error:Could not find com.android.support:gridlayout-v7:22.1.1.
Searched in the following locations:
USER_HOME/.m2/repository/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.pom
USER_HOME/.m2/repository/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.jar
https://jcenter.bintray.com/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.pom
https://jcenter.bintray.com/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.jar
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ—¶æˆ‘çš„ repositories æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;allprojects {
    repositories {
        mavenLocal()
        jcenter()
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰¾ä¸åˆ° support åº“ï¼Œå› ä¸º support åº“æ˜¯ sdk ä¸‹è½½ä¸‹æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸¤ä¸ªä½ç½®æ‰¾ä¸åˆ°ä¹Ÿå¾ˆæ­£å¸¸ã€‚Android Plugin è‡ªå¸¦çš„ä»»åŠ¡æ‰§è¡Œèµ·æ¥å´ä¸ä¼šæŠ¥é”™ï¼Œæƒ³å¿…æ˜¯åšäº†ç‰¹æ®Šå¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;sdk ç›®å½•ä¸‹ä¹Ÿæœ‰ä¸ª maven repositoryï¼Œå°±æ˜¯é‚£äº› support libs æ‰€åœ¨çš„ä½ç½®ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ANDROID_HOME\extras\android\m2repository
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŠ è¿›å»å†è¯•ä¸€ä¸‹&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Properties properties = new Properties()
properties.load(project.rootProject.file('local.properties').newDataInputStream()) // local.properties æœ‰ sdk çš„ç»å¯¹ä½ç½®
allprojects {
    repositories {
        maven {
            url properties.getProperty(&quot;sdk.dir&quot;)+&quot;/extras/android/m2repository&quot;
        }
        mavenLocal()
        jcenter()
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¾ç„¶æŠ¥é”™ï¼Œè¿™æ¬¡æ˜¯æ‰¾åˆ°é‚£äº›åº“äº†ï¼Œä½†å› ä¸º sdk ç›®å½•ä¸‹çš„åº“æ˜¯ aar æ ¼å¼çš„ï¼Œjavadoc ä¸æ”¯æŒã€‚æ‰€ä»¥é—®é¢˜åˆ°è¿™é‡Œè¿‘ä¹æ— è§£äº†ï¼Œå¹¸å¥½æˆ‘åœ¨ stackoverflow æ‰¾åˆ°å¦ä¸€ä¸ª &lt;a href=&quot;http://stackoverflow.com/a/24026735/851344&quot;&gt;android ç”Ÿæˆ javadoc çš„æ–¹æ³•&lt;/a&gt;ã€‚ç¨åŠ æ”¹å†™å°±å¯ä»¥ç”Ÿæˆ javadoc ä¸º maven æ‰€ç”¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;android.libraryVariants.all { variant -&amp;gt;
    println variant.javaCompile.classpath.files
    if(variant.name == 'release') { //æˆ‘ä»¬åªéœ€ release çš„ javadoc
        task(&quot;generate${variant.name.capitalize()}Javadoc&quot;, type: Javadoc) {
            // title = ''
            // description = ''
            source = variant.javaCompile.source
            classpath = files(variant.javaCompile.classpath.files, project.android.getBootClasspath())
            options {
                encoding &quot;utf-8&quot;
                links &quot;http://docs.oracle.com/javase/7/docs/api/&quot;
                linksOffline &quot;http://d.android.com/reference&quot;, &quot;${android.sdkDirectory}/docs/reference&quot;
            }
            exclude '**/BuildConfig.java'
            exclude '**/R.java'
        }
        task(&quot;javadoc${variant.name.capitalize()}Jar&quot;, type: Jar, dependsOn: &quot;generate${variant.name.capitalize()}Javadoc&quot;) {
            classifier = 'javadoc'
            from tasks.getByName(&quot;generate${variant.name.capitalize()}Javadoc&quot;).destinationDir
        }
        artifacts {
            archives tasks.getByName(&quot;javadoc${variant.name.capitalize()}Jar&quot;)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ support-v4 ä¸ºä¾‹ï¼Œ&lt;code&gt;configurations.compile&lt;/code&gt; å’Œ &lt;code&gt;variant.javaCompile.classpath&lt;/code&gt; æ‰“å°å‡ºæ¥çš„ä½ç½®æ˜¯ä¸åŒçš„ï¼Œåˆ†åˆ«æ˜¯&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;SDK_HOME\extras\android\m2repository\com\android\support\support-v4\22.1.1\support-v4-22.1.1.aar&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;PROJECT_HOME/MODULE/build/intermediates/exploded-aar/com.android.support/support-v4/22.1.1/jars/libs/internal_impl-22.1.1.jar&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;çœ‹æ¥ Android Plugin ç¡®å®æœ‰ç‰¹æ®Šå¤„ç†ã€‚ç”Ÿæˆ javadoc æ²¡é—®é¢˜å…¶ä»–çš„ä¹ŸåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæœ€ç»ˆçš„ &lt;code&gt;build.gradle&lt;/code&gt; è§ &lt;a href=&quot;https://gist.github.com/douo/ef1856415c461953d3c1&quot;&gt;gist&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…³äº javadoc çš„å‘å†™å¾—ååˆ†å•°å—¦ï¼Œä¸»è¦æ˜¯æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº› gradle çš„ä½¿ç”¨ç»éªŒï¼Œå…¶å® gradle å¹¶ä¸å›°éš¾ï¼Œä¸»è¦æ˜¯ Android Plugin ç¼ºä¹æ–‡æ¡£åˆé²œæœ‰ä¾‹å­ï¼Œæ‰€ä»¥æŠ˜è…¾èµ·æ¥æ¯”è¾ƒéš¾å—ã€‚Android Plugin çš„ç”¨æˆ·æŒ‡å—æ˜¯åœ¨ &lt;a href=&quot;https://sites.google.com/a/android.com/tools/tech-docs/new-build-system&quot;&gt;New Build System&lt;/a&gt; è€Œ DSL æ–‡æ¡£åˆ™æ˜¯åœ¨ &lt;a href=&quot;https://developer.android.com/tools/building/plugin-for-gradle.html&quot;&gt;Android Plug-in for Gradle&lt;/a&gt; å³è¾¹æœ‰ä¸ªä¸‹è½½ DSL æ–‡æ¡£æŒ‰é’®ã€‚Gradle å¯çœ‹å®˜æ–¹çš„ç”¨æˆ·æŒ‡å— &lt;a href=&quot;http://gradle.org/docs/current/userguide/userguide&quot;&gt;Gradle User Guide&lt;/a&gt;ï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ª&lt;a href=&quot;/notes/tools/gradle/&quot;&gt;ä¹±ç³Ÿç³Ÿçš„ç¬”è®°&lt;/a&gt; è¿™ä¸ªä¸è¶³ä¸ºçœ‹äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä½•ä¸Šä¼ åˆ° JCenter è¿™ä¸ªæŒ‰ç…§ä¸€å¼€å§‹æåŠæ–‡ç« çš„æ“ä½œåº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œåæ­£æˆ‘æ²¡é‡åˆ°é—®é¢˜ï¼ŒæˆåŠŸä¸Šä¼ äº† &lt;a href=&quot;https://github.com/douo/lru-image&quot;&gt;lru-image&lt;/a&gt;ã€‚å…¶å®ï¼Œä¸ç”¨ä¸Šä¼ åˆ° jcenter å•å•è¿è¡Œ &lt;code&gt;install&lt;/code&gt; ä»»åŠ¡ï¼Œ gradle ä¼šåœ¨ maven çš„æœ¬åœ°ä»“åº“ä¸­ç”Ÿæˆå·¥ä»¶ï¼ˆartifactï¼‰ï¼Œåªéœ€å°† mavenLocal æ·»åŠ åˆ° repositoriesï¼Œæˆ‘ä»¬å¯ä»¥åƒå‘å¸ƒåˆ° JCenter ä¸€æ ·å¼•ç”¨è‡ªå·±çš„åº“ï¼Œæ–¹ä¾¿æ‰“åŒ…é‚£äº›å¤šä¸ªé¡¹ç›®å…±äº«åˆä¸æƒ³å‘å¸ƒçš„ç§æœ‰åº“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;allprojects {
    repositories {
        mavenLocal()
        jcenter()
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;java-8-doclint-å¯¼è‡´æ‰“åŒ…å¤±è´¥&quot;&gt;Java 8 doclint å¯¼è‡´æ‰“åŒ…å¤±è´¥&lt;/h3&gt;

&lt;p&gt;æŠŠä¸‹é¢ä»£ç åŠ å…¥ build.gradle åé¢ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;if (JavaVersion.current().isJava8Compatible()) {
    allprojects {
        tasks.withType(Javadoc) {
            options.addStringOption('Xdoclint:none', '-quiet')
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è§ &lt;a href=&quot;http://blog.joda.org/2014/02/turning-off-doclint-in-jdk-8-javadoc.html&quot;&gt;Stephen Colebourneâ€™s blog: Turning off doclint in JDK 8 Javadoc&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="coder" /><category term="android" /><category term="gradle" /><category term="jcenter" /><category term="maven" /><summary type="html">æœç´¢ä¸‹å¦‚ä½•å‘å¸ƒ Android é¡¹ç›®çš„ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†éƒ½ä¼šæ‰¾åˆ°è¿™ç¯‡æ–‡ç«  Publishing Gradle Android Library to jCenter Repositoryï¼Œä¸­æ–‡çš„æŒ‡å¼•å¯ä»¥çœ‹ä½¿ç”¨Gradleå‘å¸ƒé¡¹ç›®åˆ°JCenterä»“åº“ã€‚ä¸è¿‡ï¼Œå¦‚æœæŒ‰ç…§è¿™äº›æ–‡ç« æä¾›çš„ build.gradleï¼Œå¯èƒ½è¿˜ä¼šé‡åˆ°ä¸€äº›å‘ã€‚ è°ƒç”¨ getBootClassPath() å‡ºé”™ å…·ä½“çš„é”™è¯¯ä¿¡æ¯æ˜¯ Cannot call getBootClasspath() before setTargetInfo() is called. è¿™ä¸ªæ˜¯ gradle çš„ android plugin 1.1.0 ç‰ˆæœ¬çš„ bugï¼Œè§ Issue 152811 - android - Android Gradle Plugin 1.1.0 breaks Javadoc tasksã€‚å°†æ’ä»¶æ›´æ–°åˆ° 1.1.1 ä»¥ä¸Šç‰ˆæœ¬å°±å¯ä»¥äº†ã€‚ classpath 'com.android.tools.build:gradle:1.1.2' GBK ç¼–ç é—®é¢˜ Windows ç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä½ å°†æ–‡ä»¶è®¾ç½®ä¸º UTF-8 ç¼–ç ï¼Œjavadoc é»˜è®¤çš„æ˜¯ç³»ç»Ÿç¼–ç ï¼ŒWindows å°±æ˜¯ GBK ç¼–ç ã€‚æ‰€ä»¥ä¸€æ—¦ java æ–‡ä»¶ä¸­å‡ºç°ä¸­æ–‡æ³¨é‡Šå°±ä¼šæŠ¥é”™ï¼Œæç¤ºæ— æ³•æ˜ å°„çš„GBKç¼–ç ã€‚ è¿™ä¸ªå¾ˆå®¹æ˜“è§£å†³ï¼Œä¸º javadoc æŒ‡æ˜ç¼–ç å°±å¯ä»¥ã€‚åœ¨ gradle å¯ä»¥è¿™ä¹ˆåšï¼š options.encoding = &quot;utf-8&quot;ï¼Œå…·ä½“çš„ä»»åŠ¡ä»£ç å¦‚ä¸‹ï¼š task javadoc(type: Javadoc) { ... options.encoding = &quot;utf-8&quot; ... } javadoc çš„ä¾èµ–é—®é¢˜ task javadoc(type: Javadoc) { source = android.sourceSets.main.java.srcDirs classpath += project.files(android.getBootClasspath().join(File.pathSeparator)) } æ–‡ç« ä¸­çš„ javadoc ä»»åŠ¡æ˜¯è¿™æ ·çš„ï¼Œé‡ç‚¹åœ¨ classpath é‚£ä¸€è¡Œï¼Œè¿™ä¸€è¡Œçš„æ„æ€æ˜¯æ·»åŠ  Android æ¡†æ¶åˆ° javadoc çš„ classpath ä¸­ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº†å…¶ä»–ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œé‚£ javadoc ä»»åŠ¡å¾ˆå¯èƒ½ä¼šæ‰§è¡Œå¤±è´¥çš„ï¼Œå› ä¸ºä¸Šé¢çš„ä»£ç å¹¶æ²¡æœ‰è¿™äº›æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åˆ° classpath ä¸­ã€‚æ¯”å¦‚æˆ‘çš„é¡¹ç›®ï¼Œæœ‰ä¸‹é¢è¿™äº›ä¾èµ–ï¼š dependencies { compile fileTree(dir: 'libs', include: ['*.jar']) compile 'com.google.code.gson:gson:2.3.1' compile 'com.android.support:gridlayout-v7:22.1.1' compile 'com.android.support:support-v4:22.1.1' compile 'com.android.support:appcompat-v7:22.1.1' } è·‘èµ·ä¸Šé¢çš„ javadoc å°±ä¼šæŠ¥é”™ï¼Œç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼š xxxx.java:20: é”™è¯¯: æ‰¾ä¸åˆ°ç¬¦å· public static &amp;lt;T&amp;gt; T create(JsonElement json, Class&amp;lt;T&amp;gt; classOfModel) { ^ ç¬¦å·: ç±» JsonElement ä½ç½®: ç±» xxxx è¿™æ—¶æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠç¬¬ä¸‰æ–¹ä¾èµ–åŠ å…¥ classpathï¼š classpath += project.files(configurations.compile.files,android.getBootClasspath().join(File.pathSeparator)) ä½†æ˜¯ä»ç„¶æŠ¥é”™ Error:Could not find com.android.support:gridlayout-v7:22.1.1. Searched in the following locations: USER_HOME/.m2/repository/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.pom USER_HOME/.m2/repository/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.jar https://jcenter.bintray.com/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.pom https://jcenter.bintray.com/com/android/support/gridlayout-v7/22.1.1/gridlayout-v7-22.1.1.jar ... è¿™æ—¶æˆ‘çš„ repositories æ˜¯è¿™æ ·çš„ï¼š allprojects { repositories { mavenLocal() jcenter() } } æ‰¾ä¸åˆ° support åº“ï¼Œå› ä¸º support åº“æ˜¯ sdk ä¸‹è½½ä¸‹æ¥çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸¤ä¸ªä½ç½®æ‰¾ä¸åˆ°ä¹Ÿå¾ˆæ­£å¸¸ã€‚Android Plugin è‡ªå¸¦çš„ä»»åŠ¡æ‰§è¡Œèµ·æ¥å´ä¸ä¼šæŠ¥é”™ï¼Œæƒ³å¿…æ˜¯åšäº†ç‰¹æ®Šå¤„ç†ã€‚ sdk ç›®å½•ä¸‹ä¹Ÿæœ‰ä¸ª maven repositoryï¼Œå°±æ˜¯é‚£äº› support libs æ‰€åœ¨çš„ä½ç½®ã€‚ ANDROID_HOME\extras\android\m2repository åŠ è¿›å»å†è¯•ä¸€ä¸‹ Properties properties = new Properties() properties.load(project.rootProject.file('local.properties').newDataInputStream()) // local.properties æœ‰ sdk çš„ç»å¯¹ä½ç½® allprojects { repositories { maven { url properties.getProperty(&quot;sdk.dir&quot;)+&quot;/extras/android/m2repository&quot; } mavenLocal() jcenter() } } ä¾ç„¶æŠ¥é”™ï¼Œè¿™æ¬¡æ˜¯æ‰¾åˆ°é‚£äº›åº“äº†ï¼Œä½†å› ä¸º sdk ç›®å½•ä¸‹çš„åº“æ˜¯ aar æ ¼å¼çš„ï¼Œjavadoc ä¸æ”¯æŒã€‚æ‰€ä»¥é—®é¢˜åˆ°è¿™é‡Œè¿‘ä¹æ— è§£äº†ï¼Œå¹¸å¥½æˆ‘åœ¨ stackoverflow æ‰¾åˆ°å¦ä¸€ä¸ª android ç”Ÿæˆ javadoc çš„æ–¹æ³•ã€‚ç¨åŠ æ”¹å†™å°±å¯ä»¥ç”Ÿæˆ javadoc ä¸º maven æ‰€ç”¨ï¼š android.libraryVariants.all { variant -&amp;gt; println variant.javaCompile.classpath.files if(variant.name == 'release') { //æˆ‘ä»¬åªéœ€ release çš„ javadoc task(&quot;generate${variant.name.capitalize()}Javadoc&quot;, type: Javadoc) { // title = '' // description = '' source = variant.javaCompile.source classpath = files(variant.javaCompile.classpath.files, project.android.getBootClasspath()) options { encoding &quot;utf-8&quot; links &quot;http://docs.oracle.com/javase/7/docs/api/&quot; linksOffline &quot;http://d.android.com/reference&quot;, &quot;${android.sdkDirectory}/docs/reference&quot; } exclude '**/BuildConfig.java' exclude '**/R.java' } task(&quot;javadoc${variant.name.capitalize()}Jar&quot;, type: Jar, dependsOn: &quot;generate${variant.name.capitalize()}Javadoc&quot;) { classifier = 'javadoc' from tasks.getByName(&quot;generate${variant.name.capitalize()}Javadoc&quot;).destinationDir } artifacts { archives tasks.getByName(&quot;javadoc${variant.name.capitalize()}Jar&quot;) } } } ä»¥ support-v4 ä¸ºä¾‹ï¼Œconfigurations.compile å’Œ variant.javaCompile.classpath æ‰“å°å‡ºæ¥çš„ä½ç½®æ˜¯ä¸åŒçš„ï¼Œåˆ†åˆ«æ˜¯ SDK_HOME\extras\android\m2repository\com\android\support\support-v4\22.1.1\support-v4-22.1.1.aar PROJECT_HOME/MODULE/build/intermediates/exploded-aar/com.android.support/support-v4/22.1.1/jars/libs/internal_impl-22.1.1.jar çœ‹æ¥ Android Plugin ç¡®å®æœ‰ç‰¹æ®Šå¤„ç†ã€‚ç”Ÿæˆ javadoc æ²¡é—®é¢˜å…¶ä»–çš„ä¹ŸåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæœ€ç»ˆçš„ build.gradle è§ gistã€‚ å…³äº javadoc çš„å‘å†™å¾—ååˆ†å•°å—¦ï¼Œä¸»è¦æ˜¯æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº› gradle çš„ä½¿ç”¨ç»éªŒï¼Œå…¶å® gradle å¹¶ä¸å›°éš¾ï¼Œä¸»è¦æ˜¯ Android Plugin ç¼ºä¹æ–‡æ¡£åˆé²œæœ‰ä¾‹å­ï¼Œæ‰€ä»¥æŠ˜è…¾èµ·æ¥æ¯”è¾ƒéš¾å—ã€‚Android Plugin çš„ç”¨æˆ·æŒ‡å—æ˜¯åœ¨ New Build System è€Œ DSL æ–‡æ¡£åˆ™æ˜¯åœ¨ Android Plug-in for Gradle å³è¾¹æœ‰ä¸ªä¸‹è½½ DSL æ–‡æ¡£æŒ‰é’®ã€‚Gradle å¯çœ‹å®˜æ–¹çš„ç”¨æˆ·æŒ‡å— Gradle User Guideï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ªä¹±ç³Ÿç³Ÿçš„ç¬”è®° è¿™ä¸ªä¸è¶³ä¸ºçœ‹äº†ã€‚ å¦‚ä½•ä¸Šä¼ åˆ° JCenter è¿™ä¸ªæŒ‰ç…§ä¸€å¼€å§‹æåŠæ–‡ç« çš„æ“ä½œåº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œåæ­£æˆ‘æ²¡é‡åˆ°é—®é¢˜ï¼ŒæˆåŠŸä¸Šä¼ äº† lru-imageã€‚å…¶å®ï¼Œä¸ç”¨ä¸Šä¼ åˆ° jcenter å•å•è¿è¡Œ install ä»»åŠ¡ï¼Œ gradle ä¼šåœ¨ maven çš„æœ¬åœ°ä»“åº“ä¸­ç”Ÿæˆå·¥ä»¶ï¼ˆartifactï¼‰ï¼Œåªéœ€å°† mavenLocal æ·»åŠ åˆ° repositoriesï¼Œæˆ‘ä»¬å¯ä»¥åƒå‘å¸ƒåˆ° JCenter ä¸€æ ·å¼•ç”¨è‡ªå·±çš„åº“ï¼Œæ–¹ä¾¿æ‰“åŒ…é‚£äº›å¤šä¸ªé¡¹ç›®å…±äº«åˆä¸æƒ³å‘å¸ƒçš„ç§æœ‰åº“ã€‚ allprojects { repositories { mavenLocal() jcenter() } } Java 8 doclint å¯¼è‡´æ‰“åŒ…å¤±è´¥ æŠŠä¸‹é¢ä»£ç åŠ å…¥ build.gradle åé¢ï¼š if (JavaVersion.current().isJava8Compatible()) { allprojects { tasks.withType(Javadoc) { options.addStringOption('Xdoclint:none', '-quiet') } } } è§ Stephen Colebourneâ€™s blog: Turning off doclint in JDK 8 Javadoc</summary></entry></feed>